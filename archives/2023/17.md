---
title: Charles æŠ“åŒ…ä»¥åŠè§£å†³æŠ“å– HTTPS è¯·æ±‚ unknown çš„é—®é¢˜
number: '#17'
link: 'https://github.com/toFrankie/blog/issues/17'
created_at: '2023-02-25 18:46:20'
updated_at: '2023-11-27 14:12:20'
labels:
  - Mac
  - '2021'
---
![é…å›¾æºè‡ª Freepik](https://upload-images.jianshu.io/upload_images/5128488-83d240152ee56787.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


åœ¨ Mac ä¸‹ä½¿ç”¨ Charles å·¥å…·è¿›è¡ŒæŠ“åŒ…ï¼Œç„¶åæŠ“å– HTTPS è¯·æ±‚æ—¶ï¼Œå‡ºç° unknownï¼Œæ— æ³•è§£æçš„æƒ…å†µå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

è¯·ç»§ç»­å¾€ä¸‹çœ‹ï¼Œå°†ä¼šè¯¦ç»†ä»‹ç»ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹...

##### ä¸€ã€å®‰è£… Charles
è¿‡äºç®€å•ï¼Œçœç•¥ä¸€ä¸‡å­—...
<!--
é“¾æ¥: https://pan.baidu.com/s/1q_QBQ6ev7KEHp3lOGQaA-w  å¯†ç : 3437
-->

##### äºŒã€å®‰è£…è¯ä¹¦

åŒ…æ‹¬ç”µè„‘ç«¯å’Œæ‰‹æœºç«¯ï¼Œè¿™ä¹Ÿæ˜¯æŠ“å– HTTPS è¯·æ±‚çš„å…³é”®æ‰€åœ¨ã€‚

**1. ç”µè„‘ç«¯**

æ‰“å¼€ Charlesï¼Œç„¶ååœ¨èœå•æ é€‰æ‹© **Help â†’ SSL Proxying â†’ Install Charles Root Certificate**ï¼Œå°†è¯ä¹¦å®‰è£…è‡³ç”µè„‘ï¼Œå¹¶æ‰“å¼€**é’¥åŒ™ä¸²è®¿é—®**ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-ad271ab6e2ea9b27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¯ä¹¦å®‰è£…åï¼Œé»˜è®¤æ˜¯**ä¸è¢«ä¿¡ä»»**çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®ä¸ºä¿¡ä»»ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-34b1c55c772e3e68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åœ¨**é’¥åŒ™ä¸²**ä¸­æ‰¾åˆ°è¯¥è¯ä¹¦ **Charles Proxy CA**ï¼Œå¹¶è®¾ç½®ä¸º**å§‹ç»ˆä¿¡ä»»**ï¼Œç„¶åä¿å­˜ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-5bfe4f3e34e478e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿™æ ·ç”µè„‘ç«¯è¯ä¹¦å°±å®‰è£…å®Œæˆäº†ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-d9e427f58dcbc9c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**2. æ‰‹æœºç«¯**

> ä¸‹é¢ä»¥ iOS è®¾å¤‡ä¸ºä¾‹ï¼Œè€Œ Android ç«¯å„å®šåˆ¶ç³»ç»Ÿå®‰è£…è¯ä¹¦çš„æ–¹å¼å¯èƒ½ç•¥æœ‰å·®å¼‚ã€‚

åŒæ ·åœ¨èœå•æ é€‰æ‹© **Help â†’ SSL Proxying â†’ Install Charles Root Certificate on a Mobile Device or Remote Browser**ï¼Œå°†ä¼šæœ‰ä»¥ä¸‹æç¤ºã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-aac2e07fe69b8ec7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

> è¯·æ³¨æ„ï¼Œæ‰‹æœºä¸ç”µè„‘éœ€è¿æ¥åœ¨åŒä¸€å±€åŸŸç½‘å†…ã€‚

åœ¨æ‰‹æœºæ‰“å¼€ï¼š**è®¾ç½® â†’ Wi-Fi â†’ æ‰“å¼€æ‰€è¿ WiFi â†’ è®¾ç½® HTTP ä»£ç† â†’ é€‰æ‹©æ‰‹åŠ¨**ï¼Œæ¥ç€å°† IP åœ°å€ä»¥åŠç«¯å£å¡«å†™è¿›å»ï¼Œç„¶åå­˜å‚¨å³å¯ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-1a6fe70a3be5e365.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¾“å…¥è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸€æ  `.` ä¹‹é—´å¯èƒ½ä¼šè‡ªåŠ¨æ’å…¥ç©ºæ ¼ï¼Œæ‰‹åŠ¨åˆ é™¤ä¸€ä¸‹ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-33d517d6dca453c6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ¥ç€æ‰“å¼€ç³»ç»Ÿ **Safari æµè§ˆå™¨**ï¼ˆå…¶ä»–æµè§ˆå™¨å¯èƒ½æ— æ³•å”¤èµ·å®‰è£…è¯ä¹¦çš„å¼¹çª—ï¼‰ï¼Œè¾“å…¥åœ°å€ `chls.pro/ssl` æ‰“å¼€é¡µé¢ï¼Œä¼šè‡ªåŠ¨å”¤èµ·å®‰è£…æè¿°æ–‡ä»¶çš„å¼¹çª—ï¼Œé€‰æ‹©**å…è®¸**ã€‚
![](https://upload-images.jianshu.io/upload_images/5128488-400165f07f7bc407.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ç´§æ¥ç€ï¼Œå‰å¾€ï¼š**è®¾ç½® â†’ é€šç”¨ â†’ æè¿°æ–‡ä»¶ â†’ é€‰æ‹©å¯¹åº”æè¿°æ–‡ä»¶ â†’ å®‰è£…**ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-8b09818aaf5bf63c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


> è¿˜æœ‰æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå¾ˆå¤šäººå°±æ˜¯å¿½ç•¥äº†è¯¥æ­¥éª¤ï¼Œå¯¼è‡´å®‰è£…å®Œè¯ä¹¦åï¼ŒæŠ“å– HTTPS è¯·æ±‚ä»æ˜¯ unknownã€‚

å‰å¾€ï¼Œ**è®¾ç½® â†’ é€šç”¨ â†’ å…³äºæœ¬æœº â†’ è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼ˆæ»‘åˆ°å±å¹•æœ€ä¸‹é¢ï¼‰ â†’ å°† Charles è¯ä¹¦å‹¾é€‰ä¸Š**å³å¯ã€‚ï¼ˆPSï¼šæˆ‘æˆªå›¾æœ‰ä¸¤ä¸ªæ˜¯è¯ä¹¦æ˜¯ä¸¤å°ä¸åŒçš„æœºå™¨ï¼‰

![](https://upload-images.jianshu.io/upload_images/5128488-40df838734211e93.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


##### ä¸‰ã€Charles é…ç½®

Charles é»˜è®¤æ˜¯ `8888`ï¼Œä¸å ç”¨å…¶ä»–æœåŠ¡ç«¯å£æƒ…å†µä¸‹ï¼Œä¸ä¿®æ”¹é—®é¢˜ä¹Ÿä¸å¤§ï¼Œæ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œè°ƒæ•´ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-e7d95dd67603355b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

> è¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„é…ç½®æ˜¯ **SSL Proxying Settings**ï¼Œå‹¾é€‰ä¸Š **Enable SSL Proxying**ï¼Œæ·»åŠ  **Include**ã€‚å¦åˆ™å³ä½¿æ·»åŠ äº†è¯ä¹¦ï¼ŒæŠ“å– HTTPS ä¹Ÿæ˜¯ unknownã€‚
>
> è¿™é‡Œæ ¹æ®å®é™…éœ€æ±‚æ¥è®¾ç½® Include æˆ–è€… Excludeï¼Œæˆ‘è¿™é‡Œè®¾ç½®ä¸º `*.443`ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æˆ `*.*`ã€‚ï¼ˆé€šé…ç¬¦ `*` æ˜¯æŒ‡æ‰€æœ‰åŸŸåæˆ–è€…ç«¯å£ï¼‰


![](https://upload-images.jianshu.io/upload_images/5128488-6b36a25ed8279f67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


##### å››ã€æ•ˆæœ
è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°ç©è€äº†

![](https://upload-images.jianshu.io/upload_images/5128488-79e67cfbb76e8b8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


##### äº”ã€å…³äº Android æ— æ³•æŠ“åŒ…çš„é—®é¢˜

> ç”±äºæŒºä¹…æ²¡æœ‰æ€ä¹ˆæŠ˜è…¾è¿‡ Android æ‰‹æœºäº†ï¼Œä¸‹é¢è¿™å—å†…å®¹æºè‡ªç½‘ä¸Šæ•´ç†çš„ï¼Œä¹Ÿæ²¡æœ‰æ—¶é—´å»å®é™…æµ‹è¯•è¿‡ã€‚

ç”±äº Android æœºå‹ä¼—å¤šï¼Œå„å®šåˆ¶ç³»ç»Ÿå·®åˆ«ä¹Ÿä¸åŒï¼Œå®‰è£…è¯ä¹¦åœ¨ä¸åŒ Android ç‰ˆæœ¬ä¹Ÿæœ‰é™åˆ¶ï¼Œå¯¼è‡´åœ¨ä½¿ç”¨ Charles è¿›è¡ŒæŠ“åŒ…æ—¶è¦æ¯” iOS éš¾å¾ˆå¤šã€‚


Android 7.0 ä¹‹åé»˜è®¤ä¸ä¿¡ä»»ç”¨æˆ·æ·»åŠ åˆ°ç³»ç»Ÿçš„ CA è¯ä¹¦ï¼š

> To provide a more consistent and more secure experience across the Android ecosystem, beginning with Android Nougat, compatible devices trust only the standardized system CAs maintained in AOSP.ï¼ˆ[æºè‡ª Android Developers Blog](https://android-developers.googleblog.com/2016/07/changes-to-trusted-certificate.html)ï¼‰

æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯¹åŸºäº SDK24 åŠä»¥ä¸Šçš„ APP æ¥è¯´ï¼Œå³ä½¿ä½ åœ¨æ‰‹æœºä¸Šå®‰è£…äº†æŠ“åŒ…å·¥å…·çš„è¯ä¹¦ä¹Ÿæ— æ³•æŠ“å– HTTPS è¯·æ±‚ã€‚

ä¸‹é¢æä¾›å‡ ä¸ªé“¾æ¥ï¼š

* å®‰è£… Xposed æ¨¡å—è§£å†³ Android ç«¯è¯ä¹¦çš„é—®é¢˜ï¼Œè¯·çœ‹ ğŸ‘‰ [JustTrustMe](https://github.com/Fuzion24/JustTrustMe)ï¼ˆæˆ‘å¬è¯´å…¬å¸æµ‹è¯•åŒäº‹ä¹Ÿæ˜¯è¿™æ ·å¤„ç†çš„ï¼‰ã€‚

* [Android 7.0 ä¹‹åæŠ“åŒ… unknown å’Œè¯ä¹¦æ— æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼ˆæ— éœ€æ”¹ä»£ç ï¼‰](https://blog.csdn.net/shadowyspirits/article/details/79756274)

* [å°ç±³ç³»åˆ—æ‰‹æœºä¸èƒ½å®‰è£… Charles è¯ä¹¦æ€ä¹ˆåŠ](https://segmentfault.com/a/1190000011573699)

<!--
charlesè¿‡æœŸå¤„ç†ï¼š

1.ä»ç½‘ä¸Šæ‰¾ä¸€ä¸ª æ³¨å†Œç  è®°å½•ä¸‹ åç§°å’Œæ³¨å†Œç ä¿¡æ¯

Registered Name: https://zhile.io

License Key: 48891cf209c6d32bf4

-->

### å…­ã€å…¶ä»–

* [Charles æŠ“åŒ…å·¥å…·çš„ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ³•](https://www.cnblogs.com/xuxiaolu/p/6186410.html)
