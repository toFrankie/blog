---
title: Homebrew ä½¿ç”¨è¯¦è§£ï¼ŒmacOS çš„ç¬¬äºŒä¸ª Mac App Store
number: '#9'
link: 'https://github.com/toFrankie/blog/issues/9'
created_at: '2023-02-25 18:03:46'
updated_at: '2023-12-02 19:25:34'
labels:
  - Mac
  - Homebrew
  - '2017'
---
![](https://upload-images.jianshu.io/upload_images/5128488-3a346bef1131990c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

<!--

![](https://upload-images.jianshu.io/upload_images/5128488-61685bcdef30946f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

-->


## Homebrew æ˜¯ä»€ä¹ˆï¼Ÿ

[Homebrew](https://brew.sh/) æ˜¯ macOS å’Œ Linux ä¸Šéå¸¸æµè¡Œçš„å¼€æºåŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‘½ä»¤è¡Œç‰ˆæœ¬çš„åº”ç”¨å•†åº—ã€‚å®ƒæ˜¯ç›¸å¯¹å®‰å…¨çš„ï¼Œå¦‚æœä½ çŸ¥é“è‡ªå·±æ­£åœ¨ä¸‹è½½ä»€ä¹ˆã€‚èµ·ç ç›®å‰ Homebrew ä¸Šä¸å­˜åœ¨æ¶æ„åŒ…ï¼ˆ[All Formulae](https://formulae.brew.sh/)ï¼‰ã€‚

> Homebrew complements macOS (or your Linux system).

### æœ¯è¯­


è®²çœŸçš„ï¼ŒHomebrew æœ¯è¯­æœ‰ç‚¹ç¾æ¶©éš¾æ‡‚ï¼Œæœ¬èº«æœ‰è‡ªåˆ¶é…¿é…’ä¹‹æ„ï¼Œè¯¸å¦‚ Formulaã€Cask ç­‰ä¹Ÿæ˜¯ä¸é…¿é…’ç›¸å…³çš„ã€‚


| æœ¯è¯­ | æ„è¯‘ | è¯´æ˜ |
| :--- | :--- | :--- |
| formula | é…æ–¹ | è¡¨ç¤ºå®‰è£…åŒ…çš„æè¿°æ–‡ä»¶ã€‚å¤æ•°ä¸º formulaeã€‚ |
| cask | æœ¨æ¡¶ | è£…é…’çš„å™¨å…·ï¼Œè¡¨ç¤ºå…·æœ‰ GUI ç•Œé¢çš„åŸç”Ÿåº”ç”¨ã€‚ |
| keg | å°æ¡¶ | è¡¨ç¤ºæŸä¸ªåŒ…æŸä¸ªç‰ˆæœ¬çš„å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚ `/usr/local/Cellar/foo/0.1`ã€‚ |
| Cellar | åœ°çª– | å­˜æ”¾é…’çš„åœ°æ–¹ï¼Œè¡¨ç¤ºåŒ…çš„å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚ `/usr/local/Cellar`ã€‚|
| Caskroom | æœ¨æ¡¶é—´ | è¡¨ç¤ºç±»å‹ä¸º Cask çš„åŒ…çš„å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚ï¼š`/usr/local/Caskroom`ã€‚ |
| tap | æ°´é¾™å¤´ | è¡¨ç¤ºåŒ…çš„æ¥æºï¼Œä¹Ÿå°±æ˜¯é•œåƒæºã€‚ |
| bottle | ç“¶å­ | è¡¨ç¤ºé¢„å…ˆç¼–è¯‘å¥½çš„åŒ…ï¼Œä¸‹è½½å¥½ç›´æ¥ä½¿ç”¨ã€‚|


> Related Link: [Homebrew Terminology](https://docs.brew.sh/Manpage#terminology).

### ç»„æˆ

Homebrew ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆã€‚

| åç§° | è¯´æ˜ |
| :--- | :--- |
| brew | Homebrew æºä»£ç ä»“åº“ |
| homebrew-core | Homebrew Core ä»“åº“ |
| homebrew-cask | Homebrew Cask ä»“åº“ï¼Œæä¾› macOS åº”ç”¨å’Œå¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶çš„å®‰è£… |
| homebrew-bottles | Homebrew é¢„ç¼–è¯‘äºŒè¿›åˆ¶è½¯ä»¶åŒ…ä¸è½¯ä»¶åŒ…å…ƒæ•°æ®æ–‡ä»¶ |
| homebrew-cask-versions | Homebrew Cask å…¶ä»–ç‰ˆæœ¬ (alternative versions) è½¯ä»¶ä»“åº“ï¼Œæä¾›ä½¿ç”¨äººæ•°å¤šçš„ã€éœ€è¦çš„ç‰ˆæœ¬ä¸åœ¨ Cask ä»“åº“ä¸­çš„åº”ç”¨ã€‚|
| homebrew-services | ä¸ brew services æœ‰å…³çš„æ–‡ä»¶ï¼Œç”¨äºåœ¨ macOS (launchctl) ä¸ Linux (systemctl) ä¸Šç®¡ç† brew å®‰è£…çš„æœåŠ¡ã€‚|


## å®‰è£…

> æœ¬æ–‡ä»¥ macOS ä¸ºä¾‹ã€‚

å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼Œç²˜è´´åˆ°ã€Œç»ˆç«¯ã€åº”ç”¨å›è½¦æ‰§è¡Œï¼Œç­‰å¾…å®Œæˆå³å¯ã€‚

```shell
$ /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

å¦‚æœæ²¡æœ‰ ğŸªœ ä¸‹è½½å¾ˆæ…¢çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…çš„å®‰è£…è„šæœ¬ã€‚

```shell
$ /bin/bash -c "$(curl -fsSL https://mirrors.ustc.edu.cn/misc/brew-install.sh)"
```


å¦‚æœæ­¤å‰æ²¡æœ‰å®‰è£…è¿‡ Xcode Command Line Toolsï¼Œä¸Šè¿°è¿‡ç¨‹ä¼šæç¤ºå®‰è£…ï¼ŒæŒ‰å›è½¦è€å¿ƒç­‰å¾…å®‰è£…å®Œæˆã€‚

> Related link: [macOS Requirements](https://docs.brew.sh/Installation#macos-requirements).

```shell
==> The Xcode Command Line Tools will be installed.

Press RETURN/ENTER to continue or any other key to abort:
```

ä¹Ÿå¯å…ˆè‡ªè¡Œå®‰è£… Xcode Command Line Toolsï¼Œå†å®‰è£… Homebrewã€‚

```shell
$ xcode-select --install
```

å®Œæˆåå¯ä½¿ç”¨ `brew -v` å‘½ä»¤ï¼Œè‹¥æœ‰è¾“å‡ºç‰ˆæœ¬å·ï¼Œè¡¨ç¤ºå·²å®‰è£…æˆåŠŸï¼Œå¯å¿½ç•¥ä»¥ä¸‹ç¯å¢ƒå˜é‡é…ç½®æ­¥éª¤ã€‚

```shell
$ brew -v
Homebrew 4.1.22
Homebrew/homebrew-core (git revision a58688396f3; last commit 2023-12-02)
```

å¦‚æœå‡ºç°å¦‚ä¸‹é—®é¢˜ï¼Œåˆ™éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚

```shell
$ brew -v
brewï¼šcommand not found
```

æ‰§è¡Œ `which $SHELL` ç¡®è®¤ä½ çš„ macOS çš„é»˜è®¤ Shell æ˜¯å“ªä¸ªï¼Ÿ

```shell
$ which $SHELL
/bin/zsh
```

é€šå¸¸æ˜¯ `zsh` æˆ– `bash`ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶ä¸º `~/.zshrc` æˆ– `~/.bash_profile`ã€‚

> ä» macOS Catalina å¼€å§‹ï¼ŒMac å°†ä½¿ç”¨ `zsh` ä½œä¸ºé»˜è®¤ç™»å½• Shell å’Œäº¤äº’å¼ Shellï¼Œ[è¯¦è§](https://support.apple.com/zh-cn/HT208050)ã€‚

å¦‚æœé»˜è®¤ Shell ä¸º `zsh`ï¼Œå…ˆåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
# æ·»åŠ ç¯å¢ƒå˜é‡è‡³ .zshrc
$ echo 'export PATH="/usr/local/bin:/usr/local/sbin:/opt/homebrew/bin:/opt/homebrew/sbin:$PATH"' >> ~/.zshrc

# åˆ·æ–°ç¯å¢ƒå˜é‡
$ source ~/.zshrc
```

å¦‚æœé»˜è®¤ Shell ä¸º `bash`ï¼Œå…ˆåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
# æ·»åŠ ç¯å¢ƒå˜é‡è‡³ .bash_profile
$ echo 'export PATH="/usr/local/bin:/usr/local/sbin:/opt/homebrew/bin:/opt/homebrew/sbin:$PATH"' >> ~/.bash_profile

# åˆ·æ–°ç¯å¢ƒå˜é‡
$ source ~/.bash_profile
```

å®Œäº†ä¹‹åï¼Œå†æ‰§è¡Œ `brew -v` åº”è¯¥å°±èƒ½æ­£å¸¸è¾“å‡ºç‰ˆæœ¬å·äº†ã€‚

## å›½å†…é•œåƒæº

å®‰è£…åï¼Œå¦‚æœä½¿ç”¨ `brew install`ã€`brew upgrade`ã€`brew update` è¾ƒæ…¢ï¼Œå¯ä»¥è€ƒè™‘åˆ‡æ¢ä¸ºå›½å†…çš„é•œåƒæºï¼Œæ¯”å¦‚æ¸…åæˆ–è€…ä¸­ç§‘å¤§çš„ã€‚

- [æ¸…åé•œåƒæº](https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/)
- [ä¸­ç§‘å¤§é•œåƒæº](http://mirrors.ustc.edu.cn/help/brew.git.html)

ä»¥ USTC é•œåƒä¸ºä¾‹ï¼š

1. æ›¿æ¢ Homebrew æº

```
$ cd "$(brew --repo)"
$ git remote set-url origin https://mirrors.ustc.edu.cn/brew.git
```

2. åˆ‡æ¢ Homebrew Core æº
```
$ cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"
$ git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git
```

3. åˆ‡æ¢ Homebrew Cask æº

```
$ cd "$(brew --repo)/Library/Taps/homebrew/homebrew-cask"
$ git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git
```

> å…³äºæ›´å¤š USTC Homebrew é•œåƒè¯´æ˜ï¼Œè¯·çœ‹ [Homebrew æºä½¿ç”¨å¸®åŠ©](http://mirrors.ustc.edu.cn/help/brew.git.html)ã€‚

### äº”ã€Homebrew å®‰è£…/å¸è½½å‘½ä»¤

å…¶å®ç»†å¿ƒçš„æœ‹å‹å¯èƒ½ä¼šå‘ç°ï¼ŒHomebrew çš„å®‰è£…å‘½ä»¤å¥½åƒæœ‰ä¸¤ä¸ªï¼š

```
$ brew install <package>
$ brew install --cask <package>
```

è¿™ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

> å®˜æ–¹æè¿°ï¼š[Homebrew Cask](https://github.com/Homebrew/homebrew-cask) æ‰©å±•äº† Homebrewï¼Œå¹¶ä¸º Atom å’Œ Google Chrome ç­‰ GUI macOS åº”ç”¨ç¨‹åºçš„å®‰è£…å’Œç®¡ç†å¸¦æ¥äº†ä¼˜é›…ã€ç®€å•å’Œå¿«é€Ÿã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬æä¾›äº†å‹å¥½çš„ CLI å·¥ä½œæµæ¥ç®¡ç†ä½œä¸ºäºŒè¿›åˆ¶æ–‡ä»¶åˆ†å‘çš„ macOS åº”ç”¨ç¨‹åºã€‚

æˆ‘ä»¬æ‰§è¡Œå¦‚ä¸‹æœç´¢å‘½ä»¤ï¼Œä¼šå‘ç°ï¼š

```
frankie@iMac ~ % ğŸ¶ brew search google

==> Formulae
aws-google-auth                          google-sparsehash
google-authenticator-libpam              google-sql-tool
google-benchmark                         googler
google-go                                googletest
google-java-format

==> Casks
google-ads-editor
google-analytics-opt-out
google-backup-and-sync
...
```
ä»¥ä¸Šæœç´¢å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æœç´¢å…³é”®è¯ `google`ï¼Œç»“æœä¼šå‡ºç° `Formulae` å’Œ `Casks` ä¸¤ç§åˆ†ç±»ï¼Œæœ‰ä½•åŒºåˆ«ï¼Ÿ

* **Formulae** ä¸€èˆ¬æ˜¯é‚£äº›å‘½ä»¤è¡Œå·¥å…·ã€å¼€å‘åº“ã€å­—ä½“ã€æ’ä»¶ç­‰ä¸å« GUI ç•Œé¢çš„è½¯ä»¶ã€‚
* **Cask** æ˜¯æŒ‡é‚£äº›å«æœ‰ GUI å›¾å½¢åŒ–ç•Œé¢çš„è½¯ä»¶ï¼Œå¦‚ Google Chromeã€FireFox ã€Atom ç­‰ã€‚

å…¶å®æ‰€æœ‰çš„ Homebrew Cask å‘½ä»¤éƒ½ä»¥ `brew` å¼€å¤´ï¼Œè¿™å¯¹ Casks å’Œ Formulae å‡é€‚ç”¨ã€‚

æ‰€ä»¥ï¼Œä½¿ç”¨ Homebrew å®‰è£…è½¯ä»¶ï¼Œåªè¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯ï¼š

```
$ brew install <package>
```

è½¯ä»¶åŒ…ä¸‹è½½å®Œæˆåï¼Œè‹¥æ˜¯ CLI å‘½ä»¤ä¼šè‡ªåŠ¨è½¯é“¾æ¥è‡³ `/usr/local/bin` ç›®å½•ã€‚å¦‚æœæ˜¯åŸºäº ARM çš„ macOS åˆ™ä¼šè½¯é“¾æ¥è‡³ `/opt/homebrew/bin` ç›®å½•ã€‚

å…¶ä»–ä¸€äº›å‘½ä»¤ï¼š

```
$ brew uninstall <package>  # å¸è½½
$ brew reinstall <package>  # é‡è£…
```


### å…­ã€Homebrew å…¶ä»–å‘½ä»¤

1. è½¯ä»¶æœç´¢å‘½ä»¤

æ”¯æŒå…³é”®å­—ã€æ¨¡ç³Šæœç´¢ã€‚å‡è®¾æˆ‘ä»¬æƒ³å®‰è£…ä¸€ä¸ªå« Alfred çš„è½¯ä»¶ï¼Œä½†ä¸çŸ¥é“ Homebrew æ˜¯å¦æ”¯æŒå®‰è£…è¯¥åº”ç”¨ï¼Œæˆ‘ä»¬å¯é€šè¿‡è¯¥æ–¹æ³•æŸ¥è¯¢ã€‚å¦‚è¾“å…¥ `brew search alf` ä¼šåˆ—å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»“æœã€‚

```
$ brew search <keyword>
```
2. æ›´æ–° Homebrew

ä» Git ä»“åº“ä¸­è·å–æœ€æ–°ç‰ˆæœ¬çš„ Homebrewã€‚

```
$ brew update
```

> å¾ˆå¤šæœ‹å‹åœ¨è¿™ä¸ªæ“ä½œï¼Œä¼šå¡åœ¨ Updating Homebrewâ€¦ æŒ‰ç…§ä»¥ä¸Šæ–¹æ³•åˆ‡æ¢è‡³å›½å†…æºå‡ ä¹éƒ½èƒ½è§£å†³ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œè¯·çœ‹[æ–‡ç« ](https://www.jianshu.com/p/9ec9141c8dde)ã€‚

3. æ›´æ–°è½¯ä»¶

å¦‚ `brew upgrade highlight`

```
$ brew upgrade              # æ›´æ–°æ‰€æœ‰
$ brew upgrade <package>    # æ›´æ–°æŒ‡å®šè½¯ä»¶
```

4. æŸ¥çœ‹ Homebrew ç›¸å…³è·¯å¾„

```
$ brew --cache    # ä¸‹è½½ç¼“å­˜è·¯å¾„
$ brew --prefix   # å®‰è£…ç›®å½•ï¼Œé€šå¸¸æ˜¯è¯¥è·¯å¾„çš„ Cellar ç›®å½•ä¸‹
```

å…¶ä¸­ Intel Mac æ˜¯ `/usr/local/Cellar`ï¼ŒARM Mac åˆ™æ˜¯ `/opt/homebrew/Cellar`ã€‚

5. åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶

```
$ brew list             # æ‰€æœ‰çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬ Formulae  å’Œ Cask
$ brew list --formulae  # æ‰€æœ‰å·²å®‰è£…çš„ Formulae
$ brew list --cask      # æ‰€æœ‰å·²å®‰è£…çš„ Casks
$ brew list <package>   # åˆ—ä¸¾æŸä¸ª Formulate æˆ– Cask çš„è¯¦ç»†è·¯å¾„
```

6. åˆ—å‡ºå¯æ›´æ–°çš„è½¯ä»¶

```
$ brew outdated
```

7. æ¸…ç†æ—§ç‰ˆæœ¬è½¯ä»¶

å¦‚ `brew cleanup wget`

```
$ brew cleanup            # æ¸…ç†æ‰€æœ‰æ—§ç‰ˆæœ¬çš„åŒ…
$ brew cleanup <package>  # æ¸…ç†æŒ‡å®šçš„æ—§ç‰ˆæœ¬åŒ…
$ brew cleanup -n         # æŸ¥çœ‹å¯æ¸…ç†çš„æ—§ç‰ˆæœ¬åŒ…
```

8. å¼ºåˆ¶å¸è½½æŸä¸ªè½¯ä»¶

å¦‚ `brew uninstall --force wget`

```
$ brew uninstall --force <package>
```

9. é”å®šæŸä¸ªä¸æƒ³æ›´æ–°çš„è½¯ä»¶

å¦‚ `brew pin wget`

```
$ brew pin <package>       # é”å®šæŒ‡å®šåŒ…
$ brew unpin <package>     # å–æ¶ˆé”å®šæŒ‡å®šåŒ…
```

10. æŸ¥çœ‹å·²å®‰è£…è½¯ä»¶çš„ä¾èµ–

```
$ brew deps --installed --tree
```

11. æŸ¥çœ‹è½¯ä»¶çš„ä¿¡æ¯

å¦‚ `brew info wget`

```
$ brew info <package>     # æ˜¾ç¤ºæŸä¸ªåŒ…ä¿¡æ¯
$ brew info               # æ˜¾ç¤ºå®‰è£…çš„è½¯ä»¶æ•°é‡ã€æ–‡ä»¶æ•°é‡ä»¥åŠå ç”¨ç©ºé—´
```

### ä¸ƒã€å‚è€ƒ

* [Homebrew](https://brew.sh/index_zh-cn)
* [How to Use Homebrew Cask](https://github.com/Homebrew/homebrew-cask/blob/master/USAGE.md)
* [USTC Homebrew æºä½¿ç”¨å¸®åŠ©](http://mirrors.ustc.edu.cn/help/brew.git.html)

