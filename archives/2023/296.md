---
title: é›¶å®½ç©ºæ ¼ U+200B å¼•å‘çš„é—®é¢˜åŠæ‰©å±•
number: '#296'
link: 'https://github.com/toFrankie/blog/issues/296'
created_at: '2023-02-26 21:13:36'
updated_at: '2023-06-11 01:59:44'
labels:
  - å‰ç«¯
  - HTML
  - '2023'
---
![é…å›¾æºè‡ª Freepik](https://upload-images.jianshu.io/upload_images/5128488-136ccf9ecdd9d9f8.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


## èƒŒæ™¯

æ˜¯è¿™æ ·çš„ï¼Œæœ€è¿‘åœ¨å†™ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·çš„å¤„ç†è„šæœ¬ï¼Œç”¨æ¥æ›¿æ¢æ›¿æ¢æ–‡ç« ä¸­çš„æŒ‡å®šå†…å®¹ã€‚

```js
function getInsertElement(rootElement) {
  const matchFlag = 'AA'
  const pList = [...rootElement.querySelectorAll('p')]
  let matchedElement = pList.find(el => {
    const text = (el.textContent || el.innerText).replace(/\u00a0/gi, '').trim()
    return text === matchFlag
  })
  return matchedElement
}
```

ä¸Šé¢çš„æ–¹æ³•æ˜¯è„šæœ¬çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºè·å–æ–‡ç« ä¸­æŒ‡å®šå­—ç¬¦ä¸²æ‰€åœ¨çš„ DOM å…ƒç´ ï¼Œæ€è·¯æ˜¯é€šè¿‡ `Node.textContent` æ¥åŒ¹é…çš„ã€‚

åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå‘ç°æœ‰æ—¶å€™åŒ¹é…ä¸ä¸Šï¼Œç”¨ã€Œè‚‰çœ¼ã€çœ‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†ç¡¬æ˜¯åŒ¹é…ä¸ä¸Šã€‚ç»è¿‡ä¸€ç•ªæ’æŸ¥ä¹‹åï¼Œå‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œå¦‚å›¾ï¼š

![](https://upload-images.jianshu.io/upload_images/5128488-6410c751bc07389d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åœ¨ç¼–è¾‘å™¨å†…æœ‰å­—ç¬¦ `AA`ï¼Œç„¶åä½¿ç”¨ `encodeURIComponent($0.textContent)` çš„ç¼–ç ç»“æœæ˜¯ `AA%E2%80%8B`ï¼Œæ‰€ä»¥ä¸Šé¢ `text === matchFlag` æ¯”è¾ƒç»“æœä¸º `false`ï¼Œè‡ªç„¶å°±åŒ¹é…ä¸ä¸Šäº†ã€‚ä¸‹é¢å°†å…¶è½¬æ¢ä¸º Unicode å­—ç¬¦ï¼š

```js
function string2Unicode(str) {
  return str
    .split('')
    .map(value => {
      const temp = value.charCodeAt(0).toString(16).padStart(4, '0').toUpperCase()
      if (temp.length > 2) return '\\u' + temp
      return value
    })
    .join('')
}

const encodedStr = '%E2%80%8B'
const originString = decodeURIComponent(encodedStr)
const unicodeStr = string2Unicode(originString)
console.log(unicodeStr) // \u200B
```

è½¬æ¢å¾—å‡º `%E2%80%8B` çš„ Unicode ç¼–ç ä¸º `U+200B`ï¼Œç„¶åæŸ¥è¯¢[è¿™é‡Œ](https://unicode-table.com/cn/200B/)å‘ç°å®ƒæ˜¯ã€Œé›¶å®½ç©ºæ ¼ã€ï¼Œæ˜¯ä¸€ç§ä¸å¯è§çš„å­—ç¬¦ã€‚

å› æ­¤ï¼Œåªè¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ `/\u200b/gi`ï¼ŒæŠŠæ‰€æœ‰é›¶å®½ç©ºæ ¼å¹²æ‰å°±è¡Œäº†ã€‚

```js
function getInsertElement(rootElement) {
  const matchFlag = 'AA'
  const pList = [...rootElement.querySelectorAll('p')]
  let matchedElement = pList.find(el => {
    const text = (el.textContent || el.innerText)
      .replace(/\u00a0/gi, '')
      .replace(/\u200b/gi, '')
      .trim()
    return text === matchFlag
  })
  return matchedElement
}
```

## é›¶å®½ç©ºæ ¼

> é›¶å®½ç©ºæ ¼ï¼ˆzero-width spaceï¼ŒZWSPï¼‰æ˜¯ä¸€ç§ä¸å¯è§ã€ä¸å¯æ‰“å°çš„ Unicode å­—ç¬¦ï¼Œç”¨äºå¯èƒ½éœ€è¦æ¢è¡Œå¤„ã€‚

åœ¨ Unicode ä¸­ï¼Œè¯¥å­—å…ƒä¸º `U+200B`ã€‚åœ¨ HTML ä¸­è½¬ä¹‰å­—ç¬¦æœ‰ï¼š`&#8203;`ã€`&ZeroWidthSpace;`ã€`&#x200B;`ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸å¯è§çš„ï¼Œä½†ä¸€äº›è½¯ä»¶å¯¹è¿™äº›ä¸å¯è§å­—ç¬¦åšäº†å¤„ç†ï¼Œè§†è§‰ä¸Šå¯æ„ŸçŸ¥ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

ç›¸é‚»å•è¯ä¹‹é—´æœ‰ä¸€ä¸ªé›¶å®½ç©ºæ ¼ ğŸ‘‡

```
LoremIpsumDolorSitAmetConsecteturAdipiscingElitSedDoEiusmodTemporIncididuntUtLaboreEtDoloreMagnaAliquaUtEnimAdMinimVeniamQuisNostrudExercitationUllamcoLaborisNisiUtAliquipExEaCommodoConsequatDuisAuteIrureDolorInReprehenderitInVoluptateVelitEsseCillumDoloreEuFugiatNullaPariaturExcepteurSintOccaecatCupidatatNonProidentSuntInCulpaQuiOfficiaDeseruntMollitAnimIdEstLaborum
```
ç›¸é‚»å•è¯ä¹‹é—´æ— é›¶å®½ç©ºæ ¼ ğŸ‘‡
```
LoremIpsumDolorSitAmetConsecteturAdipiscingElitSedDoEiusmodTemporIncididuntUtLaboreEtDoloreMagnaAliquaUtEnimAdMinimVeniamQuisNostrudExercitationUllamcoLaborisNisiUtAliquipExEaCommodoConsequatDuisAuteIrureDolorInReprehenderitInVoluptateVelitEsseCillumDoloreEuFugiatNullaPariaturExcepteurSintOccaecatCupidatatNonProidentSuntInCulpaQuiOfficiaDeseruntMollitAnimIdEstLaborum
```

å®ƒä»¬åœ¨ VS Code åŠé¡µé¢ä¸­çš„å±•ç¤ºæ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![](https://upload-images.jianshu.io/upload_images/5128488-67789488fcdea503.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](https://upload-images.jianshu.io/upload_images/5128488-28af3b15691241b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## æ‰©å±•

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰é›¶å®½è¿å­—ã€é›¶å®½ä¸è¿å­—ä¹Ÿæ˜¯ä¸å¯è§å­—ç¬¦ã€‚

> * **é›¶å®½è¿å­—**ï¼ˆzero-width joinerï¼ŒZWJï¼‰æ˜¯ä¸€ä¸ªæ§åˆ¶å­—ç¬¦ï¼Œæ”¾åœ¨æŸäº›éœ€è¦å¤æ‚æ’ç‰ˆè¯­è¨€ï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ã€å°åœ°è¯­ï¼‰çš„ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªæœ¬ä¸ä¼šå‘ç”Ÿè¿å­—çš„å­—ç¬¦äº§ç”Ÿäº†è¿å­—æ•ˆæœã€‚å…¶ Unicode ç¼–ç ä¸º `U+200D`ï¼ŒHTML è½¬ä¹‰å­—ç¬¦æœ‰ï¼š`&#8205;`ã€`&zwj;`ã€‚
>
> * **é›¶å®½ä¸è¿å­—**ï¼ˆzero-width non-joinerï¼ŒZWNJï¼‰æ˜¯ä¸€ä¸ªä¸æ‰“å°å­—ç¬¦ï¼Œæ”¾åœ¨ç”µå­æ–‡æœ¬çš„ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´ï¼ŒæŠ‘åˆ¶æœ¬æ¥ä¼šå‘ç”Ÿçš„è¿å­—ï¼Œè€Œæ˜¯ä»¥è¿™ä¸¤ä¸ªå­—ç¬¦åŸæœ¬çš„å­—å½¢æ¥ç»˜åˆ¶ã€‚å…¶ Unicode ç¼–ç ä¸º`U+200C`ï¼ŒHTML è½¬ä¹‰å­—ç¬¦æœ‰ï¼š`&#8204;`ã€`&zwnj;`ã€‚


ç›¸ä¿¡ä½ ä¹Ÿçœ‹è¿‡ç½‘å‹ã€ŒæŠŠå¹¸ç¦çš„ä¸€å®¶å‡ å£å¼ºè¡Œåˆ†å¼€ã€çš„æ®µå­ï¼Œå“ˆå“ˆï¼š

![](https://upload-images.jianshu.io/upload_images/5128488-d54ed217f2bcac8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æˆ‘ä»¬åˆ©ç”¨å‰é¢çš„ `string2Unicode()` æ–¹æ³•ï¼Œå°†å…¶è½¬åŒ–ä¸º Unicode ç¼–ç ï¼Œå¦‚ä¸‹ï¼š

![](https://upload-images.jianshu.io/upload_images/5128488-b27f1d52a9fb08e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å…¶å®å®ƒä»¬æ˜¯ç”±å¤šä¸ªå­—ç¬¦ç»„åˆè€Œæˆçš„ï¼Œå‰é¢æ‰€çœ‹åˆ°çš„â€œç©ºå­—ç¬¦ä¸²â€å…¶å®å°±æ˜¯ `U+200D`ï¼ˆé›¶å®½è¿å­—ï¼‰ã€‚

> ä¸€ç¯‡æœ‰è¶£çš„æ–‡ç« ï¼š[Why [â€¦â€˜ğŸ‘©â¤ï¸ğŸ’‹ğŸ‘¨â€™] returns [â€˜ğŸ‘©â€™, â€˜â€™, â€˜â¤â€™, â€˜ï¸â€™, â€˜â€™, â€˜ğŸ’‹â€™, â€˜â€™, â€˜ğŸ‘¨â€™] in JavaScript?](https://medium.com/frontend-canteen/why-%EF%B8%8F-returns-%EF%B8%8F-in-javascript-7b890e3a13b2)

## åº”ç”¨

é›¶å®½å­—ç¬¦èƒ½åšä»€ä¹ˆï¼Ÿ

* ä¼ é€’ä¿¡æ¯ï¼šåˆ©ç”¨å…¶ä¸å¯è§çš„ç‰¹æ€§ï¼Œåœ¨æœªå¯¹é›¶å®½å­—ç¬¦åšè¿‡æ»¤çš„ç½‘ç«™æ’å…¥ä¸å¯è§çš„éšå½¢æ–‡æœ¬ã€‚
* æ°´å°ï¼šåŒæ ·åˆ©ç”¨å…¶ä¸å¯è§çš„ç‰¹æ€§ï¼Œç»™æˆ‘ä»¬çš„äº§å“æ·»åŠ éšå½¢æ°´å°ã€‚
* ...

The end.
