---
title: å°† CSScomb é›†æˆåˆ°å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸­
number: '#128'
link: 'https://github.com/toFrankie/blog/issues/128'
created_at: '2023-02-25 21:29:44'
updated_at: '2023-04-26 22:07:25'
labels:
  - ç¼–ç è§„èŒƒ
  - '2021'
---
æœ€è¿‘åœ¨çœ‹ [AlloyTeam](http://www.alloyteam.com/) å›¢é˜Ÿçš„ [Code Guide](http://alloyteam.github.io/CodeGuide/) ä»£ç ä¹¦å†™ä¹ æƒ¯ï¼Œå…¶ä¸­ä¸€é¡¹æ˜¯ [CSS å±æ€§ç¼–å†™é¡ºåº](http://alloyteam.github.io/CodeGuide/#css-declaration-order)ã€‚

è™½ç„¶ CSS å±æ€§é¡ºåºå…ˆåå¹¶ä¸å½±å“æˆ‘ä»¬çš„ç¨‹åºï¼Œé‚£ä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹å‘¢ï¼Ÿæˆ‘ç†è§£æ˜¯å¯åˆ†ç±»ã€æœ‰è¿¹å¯å¾ªã€æœ‰åˆ©äºæ’æŸ¥é”™è¯¯ã€‚

ç”±äºå±æ€§ä¼—å¤šï¼Œé‚£ä¹ˆäººæ€»æ˜¯ä¼šçŠ¯é”™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªå·¥å…·æ¥å¤„ç†ï¼Œå®ƒå°±æ˜¯ [CSScomb](https://github.com/csscomb/csscomb.js)ï¼Œç”¨äº CSS æ ¼å¼åŒ–ã€ä¸”å¯æ’åºã€‚å®˜æ–¹æè¿°æ˜¯ï¼šCSScomb is a coding style formatter for CSS.

> **æœ¬æ–‡æ—¨åœ¨ä½¿å¾— CSScomb æ”¯æŒæ ¼å¼åŒ–å°ç¨‹åºæ ·å¼ `.wxss`ã€‚**åŒæ—¶ä¹Ÿæ”¯æŒæ”¯ä»˜å®å°ç¨‹åº `.acss`ï¼Œè€Œç™¾åº¦å°ç¨‹åºæ ·å¼æ–‡ä»¶çš„æ‰©å±•åæ˜¯ `.css`ï¼Œæ‰€ä»¥å®ƒå¤©ç”Ÿå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚
>
> æ–‡ç« æœ‰ä¸¤ç¯‡ï¼š
> 1. [å°† CSScomb é›†æˆåˆ°å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ä¸­](https://github.com/toFrankie/blog/issues/128)ï¼ˆæœ¬æ–‡ï¼‰
> 2. [å°† CSScomb é›†æˆåˆ° Git Hook ä¸­](https://github.com/toFrankie/blog/issues/129)
>
> é¡¹ç›®æ”¾åœ¨ GitHub ä¸Š ğŸ‘‰ [csscomb-mini](https://github.com/toFrankie/csscomb-mini) æ¬¢è¿ Star ğŸ‘‹ã€‚

æ­¤å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« [ã€ä½¿ Prettier ä¸€é”®æ ¼å¼åŒ– WXSSã€‘](https://github.com/toFrankie/blog/issues/123)æ˜¯è®²è¿°ä½¿ç”¨ Prettier æ¥æ ¼å¼åŒ–å°ç¨‹åºçš„ï¼Œä½†å®ƒæ²¡æœ‰ CSScomb çš„å±æ€§æ’åºåŠŸèƒ½ã€‚ï¼ˆåç»­å¯èƒ½ä¼šè€ƒè™‘æ•´åˆèµ·æ¥ï¼Œè¿™æ˜¯åè¯äº†ï¼‰

### ä¸€ã€CSScomb å®‰è£…ä½¿ç”¨

åˆ›å»ºä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºé¡¹ç›®ï¼Œå› è¿‡äºç®€å•ï¼Œå¿½ç•¥è¯¥æ­¥éª¤ã€‚

##### 1. æœ¬åœ°å®‰è£…
```shell
$ yarn add csscomb --dev
```

##### 2. æ·»åŠ é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ `.csscomb.json`ã€‚

è‹¥æ— é…ç½®æ–‡ä»¶ï¼ŒCSScomb çš„é»˜è®¤é…ç½®è¯·çœ‹ [csscomb.js/config/csscomb.json](https://github.com/csscomb/csscomb.js/blob/master/config/csscomb.json)ã€‚

è€Œæœ¬æ–‡å‡é‡‡ç”¨ AlloyTeam æ¨èçš„[æ’åºè§„åˆ™](http://alloyteam.github.io/CodeGuide/#css-declaration-order)ï¼Œè€Œéé»˜è®¤ã€‚**ä½†ç”±äº `sort-order` å¾ˆé•¿ï¼Œå½±å“æ–‡ç« ç¯‡å¹…ï¼Œéƒ¨åˆ†é…ç½®æ²¡è´´ä¸Šå»ï¼Œå®Œæ•´é…ç½®è¯·çœ‹çœ‹ ğŸ‘‰ [csscomb-mini/.csscomb.json](https://github.com/toFrankie/csscomb-mini/blob/master/.csscomb.json)ã€‚**

> å…³äºè¯¥é…ç½®æ–‡ä»¶æ˜¯æŒ‰æˆ‘å¹³å¸¸ç¼–å†™ä»£ç çš„ä¹ æƒ¯è°ƒæ•´æœ‰æ‰€è°ƒæ•´çš„ï¼Œå¹¶é CSScomb é»˜è®¤é…ç½®ã€‚å…·ä½“é…ç½®é¡¹æ‰€æŒ‡å¯ç»†çœ‹ ğŸ‘‰ [CSScomb Configuration Options](https://github.com/csscomb/csscomb.js/blob/dev/doc/options.md)ã€‚æ³¨æ„ CSScomb æ‰€èƒ½åšçš„äº‹æƒ…å¹¶éå°±åªæœ‰å±æ€§æ’åºå“¦ï¼Œæ¯”å¦‚è®¾ç½®ç¼©è¿›ã€é¢œè‰²å€¼åå…­è¿›åˆ¶å¤§å°å†™ã€å‰å¯¼é›¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
```json
{
  "exclude": [".git/**", "node_modules/**", "bower_components/**"],
  "verbose": true,
  "always-semicolon": true,
  "block-indent": 2,
  "color-case": "lower",
  "color-shorthand": true,
  "element-case": "lower",
  "eof-newline": true,
  "leading-zero": false,
  "quotes": "single",
  "remove-empty-rulesets": false,
  "space-before-colon": 0,
  "space-after-colon": 1,
  "space-before-combinator": 1,
  "space-after-combinator": 1,
  "space-before-opening-brace": 1,
  "space-after-opening-brace": "\n",
  "space-before-closing-brace": "\n",
  "space-before-selector-delimiter": 0,
  "space-after-selector-delimiter": "\n",
  "space-between-declarations": "\n ",
  "strip-spaces": true,
  "unitless-zero": true,
  "vendor-prefix-align": false,
  "sort-order": []
}
```

##### 3. æ·»åŠ  NPM è„šæœ¬

ä¸ºäº†æµ‹è¯•æ•ˆæœï¼Œæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `app.css` æ–‡ä»¶ã€‚

```json
{
  "scripts": {
    "csscomb": "csscomb app.css"
  }
}
```

##### 4. è¿è¡Œè„šæœ¬

```shell
$ yarn run csscomb

âœ“ app.css
âœ¨  Done in 0.45s.
```

##### 5. æ•ˆæœ

æŒ‰ä»¥ä¸Šé…ç½®æ–‡ä»¶çš„æ’åºè§„åˆ™ï¼Œ`padding-right` å±æ€§åœ¨ `padding-left` ä¹‹å‰ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°ä¿®æ”¹å‰åçš„å¯¹æ¯”å¦‚ä¸‹ï¼š

```css
/* before */
view {
  padding-left: 30px;
  padding-right: 30px;
}

/* after */
view {
  padding-right: 30rpx;
  padding-left: 30rpx;
}
```

### äºŒã€å¾®ä¿¡å°ç¨‹åºå¦‚ä½•ä½¿ç”¨ csscomb

ç”±äº CSScomb ä»…æ”¯æŒæ‰©å±•åä¸º `.css`ã€`.sass`ã€`.scss`ã€`.less` çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

> åªèƒ½åˆ©ç”¨ Gulp æ¥**æ›²çº¿æ•‘å›½**äº†ã€‚
>
> å¤§è‡´æ€è·¯ï¼Œåˆ©ç”¨ Gulp å°† WXSS æ–‡ä»¶ä¸´æ—¶è½¬ä¸º CSS æ‰©å±•åï¼Œä½¿ç”¨ CSScomb æ ¼å¼åŒ–ä¹‹åï¼Œå†å°†å…¶è½¬æ¢å› WXSS çš„æ‰©å±•åï¼Œä»¥è¾¾åˆ°æ›²çº¿æ•‘å›½çš„ç›®çš„ã€‚

æ’äº†ä¸€ä¸‹ï¼Œæ°å·§æœ‰ä¸€æ¬¾ Gulp æ’ä»¶ [gulp-csscomb](https://github.com/koistya/gulp-csscomb) å¯ç”¨ï¼Œè¯ä¸å¤šè¯´ã€‚

##### 1. å®‰è£…ç›¸å…³ä¾èµ–åŒ…
```shell
$ yarn add --dev gulp gulp-debug gulp-csscomb gulp-rename
```

##### 2. åˆ›å»º Gulp ä»»åŠ¡

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `gulpfile.js` æ–‡ä»¶ã€‚è€Œ gulp-csscomb çš„[ä½¿ç”¨æ–¹æ³•](https://github.com/koistya/gulp-csscomb#readme)å¾ˆç®€å•ï¼Œäºæ˜¯æˆ‘ä»¬å¾ˆå¿«å¯ä»¥å†™å‡ºï¼š
```js
const { src, dest } = require('gulp')
const rename = require('gulp-rename')
const debug = require('gulp-debug')
const csscomb = require('gulp-csscomb')

const wxssTask = cb => {
  return src('app.wxss')
    .pipe(debug()) // æ‰“å°ä¸€äº›è°ƒè¯•ä¿¡æ¯
    .pipe(
      rename({
        extname: '.css'
      })
    )
    .pipe(csscomb()) // æ ¼å¼åŒ–æ“ä½œ
    .pipe(
      rename({
        extname: '.wxss'
      })
    )
    .pipe(dest(file => file.base))
}

module.exports = {
  wxssTask
}
```

ä¿®æ”¹ NPM è„šæœ¬ï¼š

```json
{
  "scripts": {
    "csscomb": "gulp wxssTask"
  }
}
```

æ‰§è¡Œè„šæœ¬ `yarn run csscomb` å¯ä»¥çœ‹åˆ°ï¼š
```shell
$ yarn run csscomb

yarn run v1.22.4
$ gulp wxssformat
[15:34:11] Using gulpfile ~/Desktop/Web/MyGitHub/csscomb-mini/gulpfile.js
[15:34:11] Starting 'wxssformat'...
[15:34:11] gulp-debug: app.wxss

Failed to configure "remove-empty-rulesets" option:
 Value must be one of the following: true.

Failed to configure "vendor-prefix-align" option:
 Value must be one of the following: true.
[15:34:11] gulp-debug: 1 item
[15:34:11] Finished 'wxssformat' after 98 ms
âœ¨  Done in 1.05s.
```

æ­¤æ—¶ `app.wxss` æ–‡ä»¶å·²ç»è¢«æ ¼å¼åŒ–äº†ï¼Œä½†å¾ˆé—æ†¾æˆ‘ä»¬çœ‹åˆ°ä¸¤è¡Œ Failed ä¿¡æ¯ï¼š

```sehll
Failed to configure "remove-empty-rulesets" option:
 Value must be one of the following: true.

Failed to configure "vendor-prefix-align" option:
 Value must be one of the following: true.
```

å®ƒä¸æ”¯æŒ `remove-empty-rulesets` å’Œ `vendor-prefix-align` é…ç½®é€‰é¡¹ï¼Œä¼°è®¡æ˜¯ gulp-csscomb â€œå¹´ä¹…å¤±ä¿®â€äº†ã€‚å½“å‰å®‰è£… csscomb æ˜¯æœ€æ–°ç‰ˆæœ¬ `4.3.0`ï¼ˆæœ¬æ–‡ç¼–å†™æ—¶ï¼‰ï¼Œè€Œ gulp-csscomb é‡Œé¢å¼•ç”¨çš„ [csscomb ç‰ˆæœ¬](https://github.com/koistya/gulp-csscomb/blob/master/package.json)è¿˜æ˜¯ `3.1.7`ï¼ŒçŒœæµ‹æ˜¯æ—§ç‰ˆæœ¬ä¸æ”¯æŒè¯¥é€‰é¡¹ã€‚

```shell
# æŸ¥çœ‹ä¾èµ–åŒ…ç‰ˆæœ¬
$ npm view <package> versions
```

> å†æ¬¡**æ›²çº¿æ•‘å›½**ä¸€ä¸‹ï¼Œå¹²è„†è‡ªå·±å®ç°ä¸€ä¸ª csscomb-gulp æ’ä»¶çš„åŠŸèƒ½ã€‚

### ä¸‰ã€ç¼–å†™ Gulp æ’ä»¶

é¡ºä¾¿å­¦ä¹ ä¸€ä¸‹ï¼Œå¦‚ä½•å†™ä¸€ä¸ª Gulp æ’ä»¶å“¦ã€‚

> ç¬¬ä¸€æ¬¡å†™çš„åŒå­¦ï¼Œå¯ç®€å•çœ‹ä¸‹è¿™ç¯‡æ–‡ç« ï¼š[Gulp æ’ä»¶ç¼–å†™å…¥é—¨](https://www.cnblogs.com/chyingp/p/writting-gulp-plugin.html)ã€‚

æˆ‘çœ‹äº† [gulp-csscomb](https://github.com/koistya/gulp-csscomb/blob/master/index.js) å’Œ [CSScomb Core](https://github.com/csscomb/core) çš„æºç ï¼Œå‘ç°è‡ªå·±å®ç°ä¸€ä¸ªæ’ä»¶ä¸éš¾ï¼ŒåŒæ—¶è¿˜å‘ç°å¯ä»¥å°‘ä¸€æ­¥ `wxss` å’Œ `css` æ¥å›åˆ‡æ¢çš„è½¬æ¢è¿‡ç¨‹ã€‚

é¦–å…ˆæ˜¯ gulp-csscomb çš„æºç ï¼ˆ[gulp-csscomb](https://github.com/koistya/gulp-csscomb/blob/master/index.js)ï¼‰ï¼Œæˆªå–äº†ä¸€éƒ¨åˆ†ä¸‹æ¥ï¼š
```js
// éƒ¨åˆ†æºç 
var comb = new Comb(config || 'csscomb'); // æ ¹æ®é…ç½®å®ä¾‹åŒ–å¯¹è±¡
var syntax = options.syntax || file.path.split('.').pop(); // è·å– syntaxï¼Œä»å‚æ•°æˆ–è€…æ‰©å±•åè·å–ï¼Œå³ cssã€lessã€sassã€scss

try {
  var output = comb.processString( // å…³é”®å°±æ˜¯è¿™æ­¥ï¼Œå¯¹æˆ‘ä»¬çš„æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–
    file.contents.toString('utf8'), {
      syntax: syntax,
      filename: file.path
    });
  file.contents = new Buffer(output); // å°†æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²æ›¿æ¢å›æ–‡ä»¶ä¸­
} catch (err) {
  this.emit('error', new PluginError(PLUGIN_NAME, file.path + '\n' + err));
}
```

ä»ä»¥ä¸Šæºç å¯ä»¥çœ‹åˆ°ï¼Œå…³é”®åœ¨äº `comb.processString()` æ–¹æ³•ã€‚äºæ˜¯æ‰¾åˆ° CSScomb çš„æ ¸å¿ƒæºç ï¼ˆ[CSScomb Core](https://github.com/csscomb/core)ï¼‰ï¼Œè¯¥æ–¹æ³•çš„æè¿°å¦‚ä¸‹ï¼š
```
comb.processString(string, options)

Params:
  {String} Code to process
  {{context: String, filename: String, syntax: String}} Options (optional) where context is Gonzales PE rule, filename is a file's name that is used to display errors and syntax is syntax name with css being a default value.

Return: {Promise} Resolves with processed string.
```

> syntax is syntax name with `css` being a default value.

æ‰€ä»¥åªè¦åœ¨è°ƒç”¨ `comb.processString()` æ–¹æ³•æ—¶ï¼Œå¯¹å¾®ä¿¡å°ç¨‹åºçš„æ ·å¼æ–‡ä»¶ï¼Œä¼ å€¼ä¸º `{syntax: 'css'}` å³å¯ã€‚

ä¸Šä»£ç ï¼Œæ¡†æ¶å¤§è‡´æ˜¯è¿™æ ·ï¼š

å…ˆå®‰è£…å¿…è¦ä¾èµ–

```shell
$ yarn add --dev gulp-csscomb through2
```

```js
// gulpfile.js
const { src, dest } = require('gulp')
const rename = require('gulp-rename')
const debug = require('gulp-debug')
const csscomb = require('gulp-csscomb')
const through = require('through2')

// csscomb æ’ä»¶
const csscombPlugin = () => {
  return through.obj(function (file, enc, cb) {
    // æš‚æ—¶ä»€ä¹ˆéƒ½æ²¡åš...
    return cb()
  })
}

// Gulp ä»»åŠ¡
const csscombTask = cb => {
  try {
    return src('app.wxss')
      .pipe(debug())
      .pipe(csscombPlugin())
      .pipe(dest(file => file.base))
  } catch (e) {
    console.warn(e)
  }
}

module.exports = {
  csscombTask
}
```

åˆ›å»ºæ–°è„šæœ¬ï¼Œå¹¶è¿è¡Œ `yarn run csscomb:mini`ã€‚
```json
{
  "scripts": {
    "csscomb:mini": "gulp csscombTask"
  }
}
```

çœ‹æ ·å­æ˜¯å¯ä»¥æ­£å¸¸è·‘èµ·æ¥çš„ï¼Œæ¥ä¸‹æ¥å°±å®ç° csscomb è½¬åŒ–è¿‡ç¨‹ã€‚

```shell
$ yarn run csscomb:mini

yarn run v1.22.10
$ gulp csscombTask
[20:29:25] Using gulpfile ~/Desktop/Web/Git/csscomb-mini/gulpfile.js
[20:29:25] Starting 'csscombTask'...
[20:29:25] gulp-debug: app.wxss
[20:29:25] gulp-debug: 1 item
[20:29:25] Finished 'csscombTask' after 14 ms
âœ¨  Done in 0.51s.
```

> å¦‚å¯¹ [Gulp](https://www.gulpjs.com.cn/) å’Œ [through2](https://github.com/rvagg/through2) ä¸äº†è§£ï¼Œå¯å»å®˜ç½‘äº†è§£ä¸€ä¸‹ã€‚through2 æ˜¯å¿«é€Ÿåˆ›å»ºä¸€ä¸ª transform stream çš„å·¥å…·å‡½æ•°ã€‚


##### ç¼–å†™ csscombPlugin å®ç°

å®‰è£…å¿…è¦ä¾èµ–

```shell
$ yarn add --dev plugin-error
```

```js
const fs = require('fs')
const path = require('path')
const { src, dest } = require('gulp')
const rename = require('gulp-rename')
const debug = require('gulp-debug')
const Comb = require('csscomb')
const csscomb = require('gulp-csscomb')
const through = require('through2')
const PluginError = require('plugin-error') // ç”¨äºå¤„ç†å¼‚å¸¸


// csscomb æ’ä»¶
const csscombPlugin = () => {
  // é»˜è®¤æ”¯æŒæ‰©ç±»å‹
  const defaultExts = ['.css', '.sass', '.scss', '.less']
  // æ‰©å±•ç±»å‹ï¼Œå‡è®¾ä»¥åå…¼å®¹å­—èŠ‚è·³åŠ¨å°ç¨‹åºï¼Œå¯åŠ ä¸Š .ttss
  const expandExts = ['.wxss', '.acss']
  const supportExts = defaultExts.concat(expandExts)

  return through.obj(async function (file, enc, cb) {
    let syntax = 'css'
    const filePath = file.path
    const extname = path.extname(filePath)
    // è·å– csscomb é…ç½®
    const combConfigPath = Comb.getCustomConfigPath(path.resolve(__dirname, '.csscomb.json'))
    const combConfig = Comb.getCustomConfig(combConfigPath)

    if (file.isNull()) {
      // æ–‡ä»¶ä¸ºç©ºä¸åšå¤„ç†ï¼Œç›´æ¥è¿”å›è¿›å…¥ä¸‹ä¸€ä¸ª pipe()
      return cb()
    } else if (file.isStream()) {
      // ä¸æ”¯æŒå¯¹æµï¼ˆStreamï¼‰è¿›è¡Œæ“ä½œï¼ŒæŠ›å‡ºå¼‚å¸¸
      this.emit('error', new PluginError('csscombPlugin', 'Streams are not supported!'))
      return cb()
    } else if (file.isBuffer() && supportExts.includes(extname)) {
      // é»˜è®¤æ”¯æŒç±»å‹ï¼Œé€šè¿‡æ‰©å±•åè·å–ã€‚å…¶ä½™å½“åš css
      if (defaultExts.includes(extname)) {
        syntax = extname.split('.').pop()
      }

      // æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶
      if (combConfigPath && !fs.existsSync(combConfigPath)) {
        this.emit('error', new PluginError('csscombPlugin', 'Configuration file not found: ' + configPath))
        return cb()
      }

      try {
        // å®ä¾‹åŒ–
        const comb = new Comb(combConfig)
        // å¯¹æ‰€è¦è½¬æ¢çš„æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–
        const output = await comb.processString(
          file.contents.toString('utf8'),
          {
            syntax,
            filename: filePath
          }
        )
        // åˆ›å»º Bufferï¼Œå¹¶å°†æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²æ›¿æ¢åŸæœ¬çš„ contents
        file.contents = Buffer.from(output, 'utf-8')
        this.push(file)
        return cb()
      } catch (e) {
        this.emit('error', new PluginError('csscombPlugin', filePath + '\n' + e))
      }

    } else {
      // å…¶ä½™æƒ…å†µï¼Œç›´æ¥è¿”å›ã€‚ä¾‹å¦‚ file ä¸º JS æ–‡ä»¶ç­‰
      return cb()
    }
  })
}


// Gulp ä»»åŠ¡
const csscombTask = cb => {
  try {
    return src('app.wxss')
      .pipe(debug())
      .pipe(csscombPlugin())
      .pipe(dest(file => file.base))
  } catch (e) {
    console.warn(e)
  }
}


module.exports = {
  csscombTask
}
```
æˆ‘ä»¬å†æ¬¡è¿è¡Œè„šæœ¬ `yarn run csscomb:mini`ï¼Œå¯ä»¥çœ‹åˆ° `app.wxss` æ–‡ä»¶çš„å˜åŒ–ï¼š

```css
/* before */
.container {
  height: 100%;
  padding: 200rpx 0;
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: space-between;
  box-sizing: border-box;
}

/* after */
.container {
  display: flex;

  box-sizing: border-box;
  padding: 200rpx 0;
  height: 100%;

  align-items: center;
  flex-direction: column;
  justify-content: space-between;
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„å·¥ä½œå®Œæˆäº† 90%... è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ã€‚

> ä½ æ³¨æ„åˆ°æˆ‘ä»¬ `csscombTask` æ–¹æ³•é‡Œé¢æ˜¯é’ˆå¯¹ä¸€ä¸ªç›¸å¯¹å›ºå®šçš„è·¯å¾„æˆ–è€…æ–‡ä»¶äº†å—ï¼Ÿå‡è®¾æˆ‘æ¯æ¬¡æ ¼å¼åŒ–å…¶ä»–ç›®å½•çš„æ–‡ä»¶ï¼Œéƒ½éœ€è¦ä¿®æ”¹æ­¤æ–¹æ³•ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚

æˆ‘ä»¬å¯åœ¨ NPM è„šæœ¬è¿›è¡Œä¼ å‚ï¼Œç„¶åé€šè¿‡ `process.argv` æ¥è·å–ï¼Œæˆ‘ä»¬å¤„ç†ä¸‹å†ä¼ å…¥ `gulp.src()` æ–¹æ³•å³å¯ã€‚

### å››ã€ä¼˜åŒ–

å…ˆçº¦å®šå¥½ä¼ å‚è§„åˆ™ï¼š

* `--path` è¡¨ç¤ºç¬¦åˆ glob æ–‡ä»¶åŒ¹é…æ¨¡å¼çš„è·¯å¾„ï¼Œå¤šä¸ªè·¯å¾„æ˜¯ç”¨ `,` éš”å¼€ï¼Œå¹¶ç”¨å•å¼•å· `'` æ‹¬èµ·æ¥ï¼Œè¿˜æœ‰æˆ‘é™åˆ¶äº†ä»…æ”¯æŒé¡¹ç›®ä¸‹çš„æ–‡ä»¶ã€‚
* `--ext` è¡¨ç¤ºæ‰©å±•åï¼Œå¦‚ `.css`ã€`.wxss` ç­‰ã€‚ï¼ˆæ­¤é€‰é¡¹ç›®å‰æ²¡ä»€ä¹ˆç”¨ï¼Œä¿ç•™ä¸‹æ¥åç»­ä¼˜åŒ–ç”¨ï¼‰

> è‹¥å¯¹ Glob æ¨¡å¼ä¸äº†è§£ï¼Œå¯çœ‹ [Glob è¯¦è§£](https://www.gulpjs.com.cn/docs/getting-started/explaining-globs/#glob-è¯¦è§£)ã€‚å…¶ä¸­ `gulp.src(globs[, options])` ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¿™ç§æ¨¡å¼çš„ã€‚

```json
{
  "scripts": {
    "csscomb:mini": "gulp csscombTask --path '<filepath>' --ext <extension>"
  }
}
```

æˆ‘ä»¬å€ŸåŠ© [minimist](https://github.com/substack/minimist) æ¥è·å– NPM å‚æ•°ï¼Œé€šè¿‡


å®‰è£…å¿…è¦ä¾èµ–ï¼Œ

```shell
$ yarn add --dev minimist
```

```js
// gulp.js
// è¿™é‡Œçœç•¥å…¶ä»–éƒ¨åˆ†ï¼Œä»…ä¿®æ”¹äº† csscombTask æ–¹æ³•
const minimist = require('minimist')

// Gulp ä»»åŠ¡
const csscombTask = cb => {
  try {
    // è·å–å‚æ•°ï¼Œå¦‚ { _: [ 'csscomb:mini' ], path: 'xxx', ext: 'xxx' }
    const options = minimist(process.argv.slice(2))

    // è¿‡æ»¤æ‰éé¡¹ç›®ä¸‹çš„è·¯å¾„
    const paths = options.path.split(',').filter(item => {
      const re1 = /^\//
      const re2 = /^\.\.\//
      return item && !re2.test(item) && (!re1.test(item) || (re1.test(item) && item.includes(__dirname)))
    })

    // å»é‡
    const newPaths = Array.from(new Set(paths))

    if (!newPaths.length) {
      return cb()
    }

    // allowEmpty é€‰é¡¹æ˜¯ä¸ºäº†é¿å…åœ¨æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶æ—¶æŠ›å‡ºé”™è¯¯
    // Error: File not found with singular glob: xxx (if this was purposeful, use `allowEmpty` option)
    return src(newPaths, { allowEmpty: true })
      .pipe(debug())
      .pipe(csscombPlugin())
      .pipe(dest(file => file.base))
  } catch (e) {
    console.warn(e)
  }
}
```

ä¿®æ”¹ NPM è„šæœ¬ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ”¯ä»˜å®å°ç¨‹åºçš„æ ·å¼æ–‡ä»¶ `app.acss` æµ‹è¯•ä¸€ä¸‹ï¼š

```json
{
  "scripts": {
    "csscomb:mini": "gulp csscombTask --path './**/*.wxss,app.acss'"
  }
}
```

è¿è¡Œè„šæœ¬ï¼Œå‘ç°å¯ä»¥ä¸€é”®æ ¼å¼åŒ–äº†ï¼Œè‡³æ­¤åŸºæœ¬å®Œæˆäº†ã€‚

### äº”ã€GitHub

é¡¹ç›®æ”¾åœ¨ GitHub ä¸Š ğŸ‘‰ [csscomb-mini](https://github.com/toFrankie/csscomb-mini) æ¬¢è¿ Star ğŸ‘‹ã€‚

ä¸‹ä¸€ç¯‡ä»‹ç»ï¼š[å°† CSScomb é›†æˆåˆ° Git Hook ä¸­](https://github.com/toFrankie/blog/issues/129)ã€‚

### å…­ã€å‚è€ƒ
* [Code Guide by @AlloyTeam](http://alloyteam.github.io/CodeGuide/)
* [CSScomb Core](https://github.com/csscomb/core)
* [CSScomb](https://github.com/csscomb/csscomb.js)
* [gulp-csscomb](https://github.com/koistya/gulp-csscomb/blob/master/index.js)
* [glob-promise](https://github.com/ahmadnassri/node-glob-promise)
* [Gulp.js](https://www.gulpjs.com.cn/)
* [Gulpï¼šæ’ä»¶ç¼–å†™å…¥é—¨](https://www.cnblogs.com/chyingp/p/writting-gulp-plugin.html)
* [Gulp ä»å‘½ä»¤è¡Œä¼ é€’å‚æ•°](https://v3.gulpjs.com.cn/docs/recipes/pass-arguments-from-cli/)
* [Gulp ç³»åˆ—ä¹‹ through2 æºç ç¬”è®°](https://www.dazhuanlan.com/2020/03/13/5e6a9510f0cbc/)
