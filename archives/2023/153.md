---
title: å…³äº React ä¸­ä½¿ç”¨ wx-open-launch-weapp å”¤èµ·å¾®ä¿¡å°ç¨‹åº
number: '#153'
link: 'https://github.com/toFrankie/blog/issues/153'
created_at: '2023-02-25 22:18:58'
updated_at: '2025-06-19 14:31:25'
labels:
  - å°ç¨‹åº
  - '2020'
---
![é…å›¾æºè‡ª Freepik](https://upload-images.jianshu.io/upload_images/5128488-0ff32ff14994a6e0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ç³»åˆ—æ–‡ç« 

- [å…³äº React ä¸­ä½¿ç”¨ wx-open-launch-weapp å”¤èµ·å¾®ä¿¡å°ç¨‹åº](https://github.com/toFrankie/blog/issues/153)
- [wx-open-launch-weapp æ ·å¼é—®é¢˜](https://github.com/toFrankie/blog/issues/154)

## èƒŒæ™¯

æœ€è¿‘åœ¨åšä¸­ç§‹å›½åº†æ´»åŠ¨ï¼Œå…¶ä¸­ä¸€ä¸ªéœ€æ±‚æ˜¯åœ¨ H5 é¡µé¢ä¸­å”¤èµ·å¾®ä¿¡å°ç¨‹åºã€‚

å‰ä¸ä¹…ï¼Œå¾®ä¿¡ JSSDK å¼€æ”¾äº†è¯¥æ¥å£ `wx-open-launch-weapp` ï¼Œä»…æ”¯æŒå¾®ä¿¡æµè§ˆå™¨å†…å”¤èµ·å°ç¨‹åºã€‚[å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html#2)

è®°å½•ä¸€ä¸‹è¸©å‘çš„è¿‡ç¨‹ã€‚

## é‡è¦å‰æ

> [!WARNING]
> å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œå¦åˆ™æ¸²æŸ“ä¸å‡ºæ¥ã€‚

- **å·²è®¤è¯çš„æœåŠ¡å·**ï¼šæœåŠ¡å·ç»‘å®šâ€œJSæ¥å£å®‰å…¨åŸŸåâ€ä¸‹çš„ç½‘é¡µå¯ä½¿ç”¨æ­¤æ ‡ç­¾è·³è½¬ä»»æ„åˆæ³•åˆè§„çš„å°ç¨‹åºã€‚

- **å·²è®¤è¯çš„éä¸ªäººä¸»ä½“çš„å°ç¨‹åº**ï¼šä½¿ç”¨å°ç¨‹åºäº‘å¼€å‘çš„[é™æ€ç½‘ç«™æ‰˜ç®¡](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/staticstorage/introduction.html)ç»‘å®šçš„åŸŸåä¸‹çš„ç½‘é¡µï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ ‡ç­¾è·³è½¬ä»»æ„åˆæ³•åˆè§„çš„å°ç¨‹åºã€‚

è¿™é‡Œè¸©å‘äº†ã€‚æˆ‘ä¸€ç›´ä»¥ä¸ºç”Ÿäº§ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒéƒ½æ˜¯åŒä¸€ä¸ªå…¬ä¼—å·ï¼ˆæœåŠ¡å·ï¼‰ã€‚åæ¥é—®äº†åç«¯æ‰çŸ¥é“ï¼Œæµ‹è¯•ç¯å¢ƒæ˜¯ä¸€ä¸ªç§äººå…¬ä¼—å·ï¼ˆè®¢é˜…å·ï¼‰ï¼Œæ‰€ä»¥åœ¨æµ‹è¯•ç¯å¢ƒæ£é¼“äº†åŠå¤©ä¹Ÿæ²¡å¼„å‡ºæ¥ï¼ ğŸ˜”

## ç‰ˆæœ¬è¦æ±‚

> è¦çœŸæœºä¸Šæ‰æœ‰æ•ˆæœï¼Œå¾®ä¿¡å¼€å‘å·¥å…·æ˜¯çœ‹ä¸åˆ°çš„ï¼

- å¾®ä¿¡ JS-SDK ç‰ˆæœ¬ï¼š1.6.0 åŠä»¥ä¸Š
- å¾®ä¿¡ç‰ˆæœ¬ï¼š7.0.12 åŠä»¥ä¸Š
- ç³»ç»Ÿç‰ˆæœ¬ï¼šiOS 10.3 åŠä»¥ä¸Šã€Android 5.0 åŠä»¥ä¸Š

## wx.config

```js
wx.config({
  debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°
  appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
  timestamp: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
  nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
  signature: '',// å¿…å¡«ï¼Œç­¾å
  jsApiList: [], // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
  openTagList: [ 'wx-open-launch-weapp' ] // å¯é€‰ï¼Œéœ€è¦ä½¿ç”¨çš„å¼€æ”¾æ ‡ç­¾åˆ—è¡¨
})
```

> æˆ‘çœ‹è¿‡[æŸå¸–](https://developers.weixin.qq.com/community/develop/article/doc/00002a05760be03915caee70e51413)è¯´ï¼Œå³ä½¿æ²¡ç”¨åˆ° `jsApiList`ï¼Œä¹Ÿè¦æ˜¾å¼é…ç½® `jsApiList: []`ï¼Œè¿™æ · `wx.config()` æ‰èƒ½ç”Ÿæ•ˆã€‚ä½†æˆ‘é¡¹ç›®æœ¬èº«å°±æœ‰ä½¿ç”¨å®ƒï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰å»éªŒè¯ã€‚

å¯é€šè¿‡æŒ‡å®š `debug: true` æ¥éªŒè¯ `wx.config()` æ˜¯å¦æˆåŠŸã€‚

åªæœ‰é…ç½®æˆåŠŸäº†ï¼Œåç»­çš„åŠŸèƒ½æ‰èƒ½å®ç°ã€‚

## wx-open-launch-weapp

æä¸€å˜´ï¼Œåˆ«å¼„é”™æ ‡ç­¾äº†ï¼Œé•¿å¾—æœ‰ç‚¹åƒï¼

* `<wx-open-launch-app>` æ‰“å¼€ APP æ ‡ç­¾
* `<wx-open-launch-weapp>` æ‰“å¼€å¾®ä¿¡å°ç¨‹åºæ ‡ç­¾

> [!NOTE]
> å®˜æ–¹æ–‡æ¡£æœ‰æ›´æ–°ï¼Œæ”¯æŒæ›´å¤šå±æ€§ï¼Œè¯¦è§[è¿™é‡Œ](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html#%E8%B7%B3%E8%BD%AC%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%9Awx-open-launch-weapp)ã€‚
> 
å±æ€§ï¼š

- **username**ï¼ˆå¿…å¡«ï¼‰ï¼šæ‰€éœ€è·³è½¬çš„**å°ç¨‹åºåŸå§‹ id**ã€‚æ˜¯ä»¥ `gh_` å¼€å¤´çš„åŸå§‹ idï¼Œéä»¥ `wx` å¼€å¤´çš„å°ç¨‹åº APPIDã€‚

- **path**ï¼ˆéå¿…å¡«ï¼‰ï¼šæ‰€éœ€è·³è½¬çš„å°ç¨‹åºå†…é¡µé¢è·¯å¾„åŠå‚æ•°ã€‚é¡µé¢è·¯å¾„å¿…é¡»æ·»åŠ `.html`åç¼€ï¼Œæ¯”å¦‚`pages/index/index.html`ã€‚


ä»¥ä¸‹æ˜¯ä½¿ç”¨ React çš„å†™æ³•ï¼Œå…¶ä»–çš„æ¡†æ¶æˆ–åº“æˆ‘æ²¡ç‰¹æ„å»å†™è¿‡ï¼Œå¯ä»¥å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html)ã€‚

> ä½†çœ‹å¾®ä¿¡æ–‡æ¡£è¦å¸¦ä¸€åŒæ…§çœ¼ï¼ŒåˆæœŸå®˜æ–¹ç¤ºä¾‹ä¼¼ä¹æœ‰è¯­æ³•é”™è¯¯ï¼Œç°åœ¨ä¼¼ä¹ä¿®å¤äº†ã€‚

React ä¸­ä¸æ”¯æŒç›´æ¥å†™ `<template />` æ ‡ç­¾ï¼Œéœ€è¦ä½¿ç”¨ `<script type="text/wxtag-template" />` æ›¿æ¢ã€‚æˆ–è€ƒè™‘ä½¿ç”¨ [dangerouslySetInnerHTML](https://react.dev/reference/react-dom/components/common#dangerously-setting-the-inner-html)ã€‚

```jsx
<div style={{ position: 'relative', width: '6.3rem', height: '2.46rem' }}>
  <div>å”¤èµ·å°ç¨‹åºçš„é¡µé¢å…ƒç´ ï¼Œå¦‚æŒ‰é’®ç­‰</div>
  <wx-open-launch-weapp
    id="launch-btn"
    username="gh_****"
    path="/pages/index/index.html"
    style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}
  >
    <script type="text/wxtag-template">
      <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', opacity: 0 }} />
    </script>
  </wx-open-launch-weapp>
</div>
```

è‹¥ä½¿ç”¨ TS é‡åˆ° 

```
Property 'wx-open-launch-weapp' does not exist on type 'JSX.IntrinsicElements'.
```

å¯æ·»åŠ ç±»å‹å£°æ˜ï¼š

```ts
declare global {
  namespace JSX {
    interface IntrinsicElements {
      'wx-open-launch-weapp': React.DetailedHTMLProps<
        React.HTMLAttributes<HTMLElement>,
        HTMLElement
      > & {
        username: string
        path?: string
      }
    }
  }
}
```

## References

- [react é‡Œé¢ h5 wx-open-launch-weapp è·³è½¬å°ç¨‹åºæŒ‰é’®æ ·å¼æ— æ³•è®¾ç½®ï¼Ÿ](https://developers.weixin.qq.com/community/develop/doc/00048ee3af87a0bd09aaee4c35b800?jumpto=comment&commentid=00004e8f228440dd0caae0a29568)
- [å…¬ä¼—å·è·³è½¬ H5](https://juejin.im/post/6868526637458128903)
- [react é‡Œé¢ h5 wx-open-launch-weapp ä¸æ˜¾ç¤ºï¼Œæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ](https://developers.weixin.qq.com/community/develop/doc/0004c86fcf80801413aab38fc5c000?_at=1576086274183)
