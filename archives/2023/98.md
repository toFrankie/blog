---
title: ÊàñËÆ∏ËÉΩÂ∏Æ‰Ω†Ëß£ÂºÄ node-sass ÁöÑÊâÄÊúâÁñëÈóÆÔºü
number: '#98'
link: 'https://github.com/toFrankie/blog/issues/98'
created_at: '2023-02-25 20:33:34'
updated_at: '2025-06-24 10:20:35'
labels:
  - Node.js
  - '2023'
---
![ÈÖçÂõæÊ∫êËá™ Freepik](https://upload-images.jianshu.io/upload_images/5128488-fb3c7e1fb18995e0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ÈÇ£‰∏™ÊòØ‰∏çÊòØ `node-sass` ÁöÑÂÆâË£ÖÂ∞±ÂèØËÉΩÈöæÂÄí‰∏ÄÊâπÂâçÁ´ØÂêåÂ≠¶„ÄÇÁúãÂÆåËøôÁØáÊñáÁ´†ÔºåÊàñËÆ∏ËÉΩËß£ÂºÄ‰∏Ä‰∫õÁñëÊÉë„ÄÇ

## ÂÜôÂú®ÂâçÈù¢

* Êñ∞È°πÁõÆÈÄâÊã© Dart SassÔºàÂç≥ [`sass`](https://www.npmjs.com/package/sass)ÔºâÔºåNode Sass ‰∏çÂÜçÊèê‰æõ CSS Êñ∞ÁâπÊÄßÁöÑÊîØÊåÅ„ÄÇ

* Â∞ΩÁÆ° Node Sass ÁöÑÊÄßËÉΩÁõÆÂâçÊúÄ‰Ω≥Ôºå‰ΩÜÂÆÉË¢´ÂºÉÁî®Â∑≤Êàê‰∫ãÂÆû„ÄÇËÄå‰∏îË∑ü Dart Sass ÁöÑÊÄßËÉΩÂ∑ÆÂºÇÔºå‰∏ÄËà¨ËßÑÊ®°ÁöÑÈ°πÁõÆÁõ∏‰ø° 99% ÈÉΩÊó†ÊÄßËÉΩÂ∑ÆÂºÇÊÑüÁü•„ÄÇ

* Â§ßÂÆ∂ÈÉΩÁü•ÈÅìÊîπ‰∏∫ÂõΩÂÜÖÈïúÂÉèÊ∫êÔºåÂèØ‰ª•Âä†Âø´ npm ÂåÖÁöÑ‰∏ãËΩΩ„ÄÇ‰ΩÜ `node-sass` ÂåÖËæÉ‰∏∫ÁâπÊÆäÔºåÂú®ÂÆâË£ÖÊó∂ËøòË¶Å‰ªé GitHub ‰∏≠‰∏ãËΩΩÂØπÂ∫îÂπ≥Âè∞ÁöÑ `binding.node` Êñá‰ª∂ÔºåÂõ†Ê≠§ËøòË¶ÅÂ∞Ü Sass Binary Site ÊåáÂÆö‰∏∫ÂõΩÂÜÖÈïúÂÉèÊ∫ê‰ΩøÂÖ∂‰πüÂú®ÂõΩÂÜÖÈïúÂÉèÊ∫ê‰∏≠‰∏ãËΩΩÔºåÊâçËÉΩÂΩªÂ∫ïËß£ÂÜ≥ÁΩëÁªú‰∏çÁ®≥ÂÆöÂØºËá¥ÂÆâË£ÖÂ§±Ë¥•ÁöÑÈóÆÈ¢ò„ÄÇ

* `node-sass` Âü∫‰∫é LibSass ÊûÑÂª∫ÔºåÂêéËÄÖ‰ΩøÁî® C++ ÂºÄÂèë„ÄÇÂõ†Ê≠§ÈúÄË¶ÅÁî®Âà∞ `node-gyp`ÔºåÂú®ËæÉÊñ∞ÁâàÊú¨ÁöÑ Node.js ‰∏≠‰ºöËá™Â∏¶ `node-gyp`ÔºåÂõ†Ê≠§Â§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÊó†ÈúÄÈ¢ùÂ§ñÂÆâË£Ö„ÄÇ
* `node-gyp` ÊòØ GYP ÁöÑ Node ÂÆûÁé∞ÔºåÊòØÁî®Êù•ÁºñËØë C++ Ê®°ÂùóÁöÑË∑®Âπ≥Âè∞Â∑•ÂÖ∑„ÄÇËÄå GYP ÊòØÂü∫‰∫é Python ÂºÄÂèëÔºåÊâÄ‰ª•ÈúÄË¶ÅÂÆâË£Ö Python„ÄÇ

* `node-gyp` Èô§‰∫ÜÈúÄË¶ÅÂÆâË£Ö Python ‰πãÂ§ñÔºåÂú®‰∏çÂêåÂπ≥Âè∞ËøòË¶ÅÂÆâË£ÖÂÖ∂‰ªñ‰∏Ä‰∫õ‰∏úË•øÔºåÊØîÂ¶Ç macOS ÁöÑ Xcode„ÄÅWindows ÁöÑ VC++ ÁºñËØëÂô®Á≠â„ÄÇ

* Âú® Node ‰∏≠Ë∞ÉÁî®ÂÖ∂‰ªñËØ≠Ë®ÄÁºñÂÜôÁöÑÊ®°ÂùóÔºåÈúÄË¶ÅÁî® `node-gyp` ÁîüÊàêÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÈ°πÁõÆÊñá‰ª∂ÔºåÁÑ∂ÂêéË∞ÉÁî® gcc„ÄÅvsbuild„ÄÅxcode Á≠âÁºñËØëÂπ≥Âè∞Êù•ËøõË°åÁºñËØë„ÄÇ

* Âú® `node-gyp` ÊûÑÂª∫È°πÁõÆÊñá‰ª∂ÁöÑËøáÁ®ã‰∏≠ÔºåÈúÄË¶ÅÊåáÂÆö Python Ë∑ØÂæÑÔºåÂú®Êú™ÈÖçÁΩÆÁöÑÊÉÖÂÜµ‰∏ãÔºåÈªòËÆ§‰ªéÁéØÂ¢ÉÂèòÈáè `PATH` Êü•ÊâæÂêç‰∏∫ `python2` ÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåÊâæ‰∏çÂà∞Â∞±‰ºöÊä•Èîô„ÄÇÈÄöÂ∏∏ÂÅöÊ≥ïÊòØÁî® `npm config set python /path/to/your/python` ÂéªÊåáÂÆöÔºåÁâπÂà´ÊòØÊú¨Êú∫ÊúâÂ§ö‰∏™ Python ÁâàÊú¨„ÄÇ
* ÈïúÂÉèÊ∫êÈóÆÈ¢òÂè™ËÉΩËß£ÂÜ≥‰∏ãËΩΩÊÖ¢ÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊûú `node-sass` ËøòÂÆâË£ÖÂ§±Ë¥•ÔºåÂéüÂõ†Êó†ÈùûÂ∞±Âá†‰∏™Ôºö
    * ‰∏ÄÊòØÔºåÊú™ÂÆâË£ÖÂπ≥Âè∞Áõ∏ÂÖ≥ÁöÑÁºñËØëÂô®„ÄÇÊØîÂ¶Ç macOS ÁöÑ Xcode Á≠â„ÄÇ
    * ‰∫åÊòØÔºåÂΩìÂâç `node-sass` ‰∏é Node ÁâàÊú¨‰∏çÂÖºÂÆπÔºåËøô‰∏™ÁâàÊú¨ÂØπÂ∫îÂÖ≥Á≥ªÂèØ‰ª•Âú® `node-sass` ÂÆòÁΩë‰∏≠Êü•ÁúãÔºõ
    * ‰∏âÊòØÔºåÂΩìÂâç `node-sass` ÊâÄ‰æùËµñÁöÑ `node-gyp` ‰∏çÊîØÊåÅ‰Ω†Êú¨Êú∫ÂÆâË£ÖÁöÑ Python ÁâàÊú¨ÔºåÂèØÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÈôç‰Ωé/ÂçáÁ∫ß Python Ëß£ÂÜ≥„ÄÇ

## ÂâçË®Ä

Ëá™ËØûÁîü‰ª•Êù•ÔºåCSS Âú®ËØ≠Ê≥ï‰∏äÈÉΩËæÉ‰∏∫ÁÆÄÂçï„ÄÇÈöèÁùÄ Web ÁöÑÈ£ûÈÄüÂèëÂ±ïÔºåWeb È°πÁõÆË∂äÊù•Ë∂äÂ§çÊùÇÔºåÂéüÁîü CSS Âú®Â∫îÂØπÂ§çÊùÇÈ°πÁõÆÁöÑÊó∂ÂÄô‰ºº‰πéÂäõ‰∏ç‰ªéÂøÉ„ÄÇÂêéÊù•Á§æÂå∫‰∏äÂá∫Áé∞‰∫ÜÂæàÂ§ö CSS È¢ÑÂ§ÑÁêÜÂô®ÔºàCSS preprocessorÔºâÔºåÊØîÂ¶Ç Sass„ÄÅLess„ÄÅStylus„ÄÅPostCSS Á≠â„ÄÇÂÆÉ‰ª¨Êèê‰æõ‰∫ÜÂéüÁîü CSS ‰∏çÂÖ∑Â§áÁöÑÁâπÊÄßÔºåÊØîÂ¶Ç‰ª£Á†ÅÊ∑∑Âêà„ÄÅÂµåÂ•óÈÄâÊã©Âô®„ÄÅÁªßÊâøÈÄâÊã©Âô®Á≠âÔºå‰ΩøÂæó CSS Êõ¥ÂÆπÊòìÁª¥Êä§„ÄÇCSS È¢ÑÂ§ÑÁêÜÂô®ÂèØ‰ª•ÁêÜËß£‰∏∫‰∏ÄÈó®Êñ∞ÁöÑËØ≠Ë®ÄÔºåÈÉΩÊúâÁùÄÁâπÂÆöÁöÑËØ≠Ê≥ïÔºåÁÑ∂ÂêéÈÄöËøáÂØπÂ∫îÁöÑÁºñËØëÂô®ÁîüÊàêÊµèËßàÂô®ÂèØËØÜÂà´ÁöÑÂéüÁîü CSS„ÄÇ

### Sass ‰∏éÂÖ∂‰ªñÈ¢ÑÂ§ÑÁêÜÂô®ÁöÑÂå∫Âà´

Ê≠§Â§Ñ‰∏çËÆ®ËÆ∫ËØ≠Ê≥ï‰∏äÁöÑÂ∑ÆÂºÇ„ÄÇLess Âíå Stylus ÁöÑÁºñËØëÂô®ÈÉΩÊòØ‰ΩøÁî® JavaScript ÁºñÂÜôÁöÑ„ÄÇËÄå Sass ÂàôÁªèÂéÜ‰∫Ü Ruby Sass„ÄÅNode Sass„ÄÅDart Sass ‰∏â‰ª£ÁºñËØëÂô®Ôºå‰∏îÈÉΩ‰∏çÊòØÂü∫‰∫é JavaScript ÁºñÂÜôÁöÑ„ÄÇ

### Sass ÁºñËØëÂô®

* [Ruby Sass](https://sass-lang.com/ruby-sass)ÔºöÂü∫‰∫é Ruby ËØ≠Ë®ÄÁºñÂÜôÔºåÊÄßËÉΩÊúÄÂ∑ÆÔºå‰∫é 2019 Âπ¥ÂÅúÊ≠¢Áª¥Êä§„ÄÇ
* [Node Sass]()ÔºöÂü∫‰∫é LibSass ÊûÑÂª∫Âπ∂‰∏é Node.js ËøõË°åÈõÜÊàêÔºåËÄå LibSass ÊòØÁî® C++ ÁºñÂÜôÁöÑ„ÄÇ‰∫é 2020 Âπ¥ÂÆ£Â∏É‰∏çÂÜçÊèê‰æõÊñ∞ÁâπÊÄßÁöÑÊîØÊåÅ„ÄÇ
* [Dart Sass](https://sass-lang.com/dart-sass)ÔºöÂü∫‰∫é Dart ËØ≠Ë®ÄÁºñÂÜôÔºåDart ÊòØ Flutter ÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆÉÂèØ‰ª•ÁºñËØë‰∏∫ JavaScript„ÄÇ

Node Sass ÊÄßËÉΩÊúÄ‰Ω≥ÔºåDart Sass Ê¨°‰πãÔºåRuby Sass ÊúÄÊãâ„ÄÇÂ∞ΩÁÆ° Node Sass ÁöÑÊÄßËÉΩÊúÄ‰Ω≥Ôºå‰ΩÜÁî±‰∫é [LibSass](https://sass-lang.com/libsass) Ë∑ü‰∏ç‰∏ä CSS Âèä Sass Âø´ÈÄüÂèëÂ±ïÁöÑÊ≠•‰ºêÔºåÊâÄ‰ª• Sass Âõ¢ÈòüÂÜ≥ÂÆöÊîæÂºÉÂÆÉÔºåÂÖ®Èù¢Êã•Êä± Dart Sass„ÄÇ

* [LibSass is Deprecated](https://sass-lang.com/blog/libsass-is-deprecated)
* [Ruby Sass is Deprecated](https://sass-lang.com/blog/ruby-sass-is-deprecated)

### Node Sass ‰∏é Dart Sass Â¶Ç‰ΩïÈÄâÊã©Ôºü

Êñ∞È°πÁõÆ‰ºòÂÖàËÄÉËôë Dart SassÔºåËøô‰πüÊòØ Sass Âõ¢ÈòüÊâÄÊé®ËçêÁöÑ„ÄÇ

> **Warning:**¬†[LibSass and Node Sass are deprecated](https://sass-lang.com/blog/libsass-is-deprecated). While they will continue to receive maintenance releases indefinitely, there are no plans to add additional features or compatibility with any new CSS or Sass features. Projects that still use it should move onto¬†[Dart Sass](https://sass-lang.com/dart-sass).

Áî±‰∫é Node Sass ‰∏çÂÜçÊîØÊåÅÊñ∞ÁâπÊÄßÔºåÊú™Êù•ÈÄêÊ≠•Ë¢´Ê∑òÊ±∞ÊòØÂæàËá™ÁÑ∂ÁöÑ‰∫ã„ÄÇ

Dart Sass Êèê‰æõ‰∫ÜÁ∫Ø JavaScript ÁöÑ npm ÂåÖ [`sass`](https://www.npmjs.com/package/sass)Ôºà‰ª•ÂâçÂè´ÂÅö [`dart-sass`](https://www.npmjs.com/package/dart-sass)ÔºâÔºåÂÆÉÁöÑÂÆâË£ÖÂèØÊØî [`node-sass`](https://www.npmjs.com/package/node-sass) ÁúÅÂøÉÂ§ö‰∫Ü üò™„ÄÇ‰ªé Node Sass ËøÅÁßªÂà∞ Dart Sass ‰πüÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™Ë¶ÅÊää `package.json` ‰∏≠ÁöÑ `node-sass` ‰æùËµñÊîπ‰∏∫ `sass` Âç≥ÂèØÔºå‰∏§ËÄÖÊèê‰æõÁöÑ JavaScript API ÊòØÁõ∏ÂêåÁöÑ„ÄÇ

## node-sass

### node-gyp

Áî±‰∫é `node-sass` ÊûÑÂª∫Âú® LibSass ‰πã‰∏äÔºåLibSass ÂàôÊòØÁî® C++ ÂÆûÁé∞ÁöÑÔºåÂõ†Ê≠§‰ΩøÁî® `node-sass` ÁöÑËØùÔºå`node-gyp` ÊòØÂøÖÈúÄÁöÑ„ÄÇ`node-gyp` ÊòØ [GYP](https://gyp.gsrc.io/index.md) Âú® Node ‰∏≠ÁöÑÂÆûÁé∞ÔºåÁî®Êù•ÁºñËØëÂéüÁîü C++ Ê®°ÂùóÁöÑ„ÄÇÂÖ∂‰∏≠ `node-gyp` Âú®ËæÉÊñ∞ÁâàÊú¨ÁöÑ Node.js ÊòØËá™Â∏¶ÁöÑ„ÄÇ

### node-gyp Ê≠£Â∏∏ËøêË°åÁöÑÂâçÊèê

‰ΩøÁî® `node-gyp`‰πãÂâçÔºåË¶ÅÂÆâË£ÖÂØπÂ∫îÂπ≥Âè∞ÁöÑÁõ∏ÂÖ≥Â∑•ÂÖ∑ÊâçËÉΩÊ≠£Â∏∏‰ΩøÁî®„ÄÇÊõ¥Â§öÂÆâË£Ö‰ªãÁªçËØ∑ÁúãÔºö[node-gyp Installation](https://github.com/nodejs/node-gyp#installation)„ÄÇ

Linux/Unix Âπ≥Âè∞Ôºö

> * Python 3.x
> * make
> * A proper C/C++ compiler toolchain, like¬†[GCC](https://gcc.gnu.org/)

macOS Âπ≥Âè∞Ôºö

> * Python 3.x
> * XCode Command Line Tools

Windows Âπ≥Âè∞Ôºö

> * Python
> * VC++ ÁºñËØëÂô®



‰ª• macOS ‰∏∫‰æãÔºåËøôÈáå‰∏çÂÖ®ÈáèÂÆâË£Ö XCodeÔºåÂè™Ë¶ÅÂÆâË£Ö XCode Command Line Tools Âç≥ÂèØ„ÄÇ

```shell
# ÂÆâË£Ö XCode Command Line Tools
$ xcode-select --install

# ÂÆâË£Ö Python 3
$ brew install python
```

‰ª• Windows ‰∏∫‰æãÔºåÂÖà Microsoft Store ‰∏ãËΩΩÂÆâË£Ö PythonÔºåÊé•ÁùÄ‰ª•ÁÆ°ÁêÜÂëòË∫´‰ªΩÊâìÂºÄ cmd Êàñ PowerShell ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§‰ª•ÂÆâË£Ö VC++ ÁºñËØëÂô®ÔºàÊõ¥Â§öËØ∑Áúã [Environment setup and configuration](https://github.com/Microsoft/nodejs-guidelines/blob/master/windows-environment.md#environment-setup-and-configuration)Ôºâ„ÄÇ

```shell
$ npm install --global --production windows-build-tools
```

### ÊåáÂÆö Python ÁâàÊú¨

Â¶ÇÊûú‰Ω†ÂÆâË£Ö‰∫ÜÂ§ö‰∏™ Python ÁâàÊú¨ÔºåÂèØÂú® npm Êàñ yarn ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊåáÂÆö„ÄÇ‰ª• macOS ‰∏∫‰æãÔºö

```shell
# Ëé∑Âèñ Python Ë∑ØÂæÑ
$ which python3
/usr/local/bin/python3

# ÈÖçÁΩÆ npm Êàñ yarn ÁöÑ python Ë∑ØÂæÑ
$ npm config set python /usr/local/bin/python3
$ yarn config set python /usr/local/bin/python3
```

> ËØ∑Ê≥®ÊÑèÔºå‰ΩéÁâàÊú¨ `node-gyp` ÂèØËÉΩ‰ªÖÊîØÊåÅ Python 2.x„ÄÇ

### node-sass ÂÆâË£ÖÊÖ¢ÊòØÊÄé‰πàÂõû‰∫ãÔºü

È¶ñÂÖàÊòØÈïúÂÉèÊ∫êÁöÑÈóÆÈ¢òÔºåÂÆÉ‰∏çÂçïÊòØ `node-sass` ÂåÖÊâçËøôÊ†∑ÔºåÊâÄÊúâÂåÖÈÉΩ‰∏ÄÊ†∑„ÄÇÁî±‰∫é npm ÈªòËÆ§ÈïúÂÉèÊ∫ê `https://registry.npmjs.org/` Âú®Â¢ÉÂ§ñÔºåËÆøÈóÆÁöÑÊó∂ÂÄôÊÖ¢ÊàñËÄÖ‰∏çÁ®≥ÂÆöÊòØÊ≠£Â∏∏ÁöÑ„ÄÇËøô‰∏™ÂèØ‰ª•ÊåÇÊ¢ØÂ≠êÊàñËÄÖ‰øÆÊîπ‰∏∫ÂõΩÂÜÖÈïúÂÉèÊ∫êËß£ÂÜ≥„ÄÇ

ÊØîÂ¶ÇÔºå‰øÆÊîπ‰∏∫Ê∑òÂÆùÈïúÂÉèÊ∫êÔºö

```shell
$ npm config set registry https://registry.npmmirror.com/
$ yarn config set reigstry https://registry.npmmirror.com/
```
> Â¶ÇÊûúÊòØÁÆ°ÁêÜÈïúÂÉèÊ∫êÔºå‰∏™‰∫∫Êé®Ëçê‰ΩøÁî® [nrm](https://www.jianshu.com/p/5ec39caa01cd) Êàñ [yrm](https://www.jianshu.com/p/2a4b345f35a8)„ÄÇ

### ‰∏∫‰ªÄ‰πà‰øÆÊîπ‰∏∫ÂõΩÂÜÖÈïúÂÉèÊ∫êËøòÊÖ¢ÔºåÁîöËá≥Â§±Ë¥•Ôºü

Âú® `node-sass` ÁöÑ `package.json` ‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Êúâ‰∏§‰∏™ÂëΩ‰ª§Ôºö

```json
{
  "scripts": {
    "install": "node scripts/install.js",
    "postinstall": "node scripts/build.js"
  }
}
```

ÊâÄ‰ª•Âú®ÂÆâË£Ö‰æùËµñÁöÑÊó∂ÂÄôÔºå‰ºöÂÖàÂêéÊâßË°å `install`„ÄÅ`postinstall` ÂØπÂ∫îÂëΩ‰ª§ÔºåÂÆÉ‰ª¨ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÂ§ßËá¥ÊòØÔºö

1. ‰∏ãËΩΩÂØπÂ∫îÂπ≥Âè∞ÁöÑ `binding.node` Êñá‰ª∂Ôºõ
2. ‰∏ãËΩΩÂÆåÊàêÔºåÊâßË°å [`node-gyp rebuild`](https://github.com/nodejs/node-gyp#commands) ÂëΩ‰ª§ËøõË°åÊûÑÂª∫„ÄÇ

Âú® `script/index.js` ‰ºöÊâßË°å‰∏Ä‰∏™ `checkAndDownloadBinary()` ÊñπÊ≥ïÔºå‰ª•Ê£ÄÊü•ÊòØÂê¶ÊúâÁºìÂ≠ò„ÄÇËã•Êó†ÔºåÁªßÁª≠ÊâßË°å‰∏Ä‰∏™ `download()` ÊñπÊ≥ïÂú®ÊåáÂÆö URL ‰∏≠‰∏ãËΩΩ `binding.node` Êñá‰ª∂ÔºåËÄå URL ÂàôÈÄöËøá `getBinaryUrl()` ÊñπÊ≥ïËé∑ÂèñÔºö

```js
function getBinaryUrl() {
  var site = getArgument('--sass-binary-site') ||
             process.env.SASS_BINARY_SITE  ||
             process.env.npm_config_sass_binary_site ||
             (pkg.nodeSassConfig && pkg.nodeSassConfig.binarySite) ||
             'https://github.com/sass/node-sass/releases/download';

  return [site, 'v' + pkg.version, getBinaryName()].join('/');
}
```

‰ªé‰ª£Á†ÅÂèØÁü•ÔºåÂÖàÂêéÈ°∫Â∫èÊòØÔºö
* ÂëΩ‰ª§Ë°åÂèÇÊï∞ `--sass-binary-site`
* ÁéØÂ¢ÉÂèòÈáè `SASS_BINARY_SITE`
* `.npmrc` ÈÖçÁΩÆ `sass_binary_site`
* `package.json` ‰∏≠ÁöÑ `nodeSass.binarySite` Â≠óÊÆµ
* Ëã•‰ª•‰∏äÈÉΩÊ≤°ÊúâÊåáÂÆöÔºåÂàô‰ªé Github ‰∏≠‰∏ãËΩΩÔºåÊØîÂ¶ÇÔºö`https://github.com/sass/node-sass/releases/download/v8.0.0/darwin-x64-83_binding.node`„ÄÇ

Âõ†Ê≠§Ôºå‰ªÖ‰ªÖÊåáÂÆöÂõΩÂÜÖÈïúÂÉèÊ∫êËøò‰∏çÂ§üÔºåËøòË¶ÅÊåáÂÆö Sass Binary SiteÔºåÊñπÂºèÊúâ‰ª•‰∏äÂõõÁßç„ÄÇ

### ÊåáÂÆö Sass Binary Site

È¶ñÂÖàÔºå‰ªé‰∏äÈù¢ÁöÑ `getBinaryUrl()` ÊñπÊ≥ïÂèØÁü•ÔºåÂèØ‰ª•ÊúâÂ§öÁßçÊñπÂºèÂéªÊåáÂÆöÔºå‰ΩÜ‰∏™‰∫∫Êé®ËçêÂú® `.npmrc` Êàñ `.yarnrc` ‰∏≠ÊåáÂÆöÔºö

```shell
$ npm config set sass_binary_site https://npmmirror.com/mirrors/node-sass
$ yarn config set sass_binary_site https://npmmirror.com/mirrors/node-sass
```

ËøôÊ†∑ÁöÑËØùÔºåÂÖ∂ `binding.node` Êñá‰ª∂Â∞±‰ºö‰ªé `https://npmmirror.com/mirrors/node-sass/v8.0.0/darwin-x64-83_binding.node` ‰∏ãËΩΩÔºåÂ∞±‰∏ç‰ºöÈæüÈÄüÈÇ£‰πàÊÖ¢‰∫Ü„ÄÇ

ËøòÂèØ‰ª•ËøôÊ†∑Ôºö

> * Â¶ÇÊûúÊòØ‰ΩøÁî®ÂëΩ‰ª§Ë°åÔºåÂèØ‰ª•Âú® `--sass-binary-site` ÂèÇÊï∞ÊåáÂÆöÔºåÊØîÂ¶ÇÔºö`npm install node-sass --sass-binary-site=https://npmmirror.com/mirrors/node-sass`„ÄÇ
> * ÂèØ‰ª•ËÆæÁΩÆ `SASS_BINARY_SITE` ÁéØÂ¢ÉÂèòÈáèÔºåÊúâ‰∏§ÁßçÊñπÂºèÔºö
>   * ÂÖ®Â±ÄÁéØÂ¢ÉÂèòÈáèÔºàÊåÅ‰πÖÂåñÔºâÔºåÊØîÂ¶Ç `echo 'export SASS_BINARY_SITE=https://npmmirror.com/mirrors/node-sass' >> ~/.zshrc`„ÄÇ
>   * ‰∏¥Êó∂ÁéØÂ¢ÉÂèòÈáèÔºåÊØèÊ¨°ÂÆâË£ÖÁöÑÊó∂ÂÄôÊåáÂÆö„ÄÇÊØîÂ¶Ç `SASS_BINARY_SITE=https://npmmirror.com/mirrors/node-sass npm install`„ÄÇ

ÊÄªÁöÑÊù•ËÆ≤ÔºåÂú® `.npmrc` Êàñ `.yarnrc` ‰∏≠ÊåáÂÆö‰∏™‰∫∫ËÆ§‰∏∫ÊòØÊúÄÂêàÈÄÇÁöÑ„ÄÇ

## ÈóÆÈ¢òÊéíÊü•

ÂÆåÊàê‰ª•‰∏äÊ≠•È™§‰πãÂêéÔºåÂÆâË£Ö `node-sass` ËøòÊòØ‰∏çÊàêÂäüÔºü

### Ê£ÄÊü• Node ÁâàÊú¨

ÂÖàÊ£ÄÊü•ÂΩìÂâç `node-sass` ÁâàÊú¨ÊâÄÊîØÊåÅÁöÑ Node ÁâàÊú¨ÔºåÁÑ∂ÂêéÂú®ÂÆâË£ÖÂØπÂ∫îÁöÑ Node ÁâàÊú¨ÈáçËØï„ÄÇËØ¶ËßÅ [Node version support policy](https://github.com/sass/node-sass#node-version-support-policy)„ÄÇ

![](https://upload-images.jianshu.io/upload_images/5128488-419b999883435558.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


ÂÉèÊàëÈ°πÁõÆ‰∏≠ `node-sass` ÁâàÊú¨Âè∑‰∏∫ `4.13.0`Ôºå‰ΩøÁî® Node 16 Â∞±‰∏çË°åÔºåÂõ†Ê≠§ÊàëÈôçÂà∞‰∫Ü Node 12„ÄÇ

```shell
$ fnm install 12
$ fnm use 12
```

> Node Â§öÁâàÊú¨ÁÆ°ÁêÜÁöÑËØùÔºå‰∏™‰∫∫Êé®Ëçê‰ΩøÁî® [`fnm`](https://www.jianshu.com/p/0843d55e044e)„ÄÇ

Èô§‰∫Ü Node ÁâàÊú¨ËøáÈ´ò‰πãÂ§ñÔºåËØ•ÁâàÊú¨‰ªÖÊîØÊåÅ Python 2„ÄÇËÄåÁ≥ªÁªüÂÜÖÁΩÆÁöÑ Python 2.x Âú® macOS 12.3 ‰πãÂêéË¢´ÁßªÈô§‰∫ÜÔºåËÄå‰∏îÁõÆÂâç Homebrew ‰∏çÂÜçÊîØÊåÅÂÆâË£Ö Python 2„ÄÇÁÑ∂ÂêéÂèÇËÄÉËøôÁØá[ÊñáÁ´†](https://www.wyr.me/post/658)ÔºåÊâæÂà∞‰∫Ü‰∏Ä‰∏™ÂÆâË£Ö Python 2 ÁöÑÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö

```shell
$ brew install pyenv
$ pyenv install 2.7.18
$ echo 'export PATH="$(pyenv root)/shims:${PATH}"' >> ~/.zshrc
$ source ~/.zshrc
$ pyenv global 2.7.18
```
ÂÆâË£ÖÂÆå‰πãÂêéÔºåÂÜçÂ∞ÜÂÆÉÁöÑË∑ØÂæÑËÆæÁΩÆÂà∞ `.npmrc` ÈáåÈù¢„ÄÇ

```shell
$ python --version
Python 2.7.18

$ which python
/Users/frankie/.pyenv/shims/python

$ npm config set python /Users/frankie/.pyenv/shims/python
$ yarn config set python /Users/frankie/.pyenv/shims/python
```

### Ëøò‰∏çË°åÔºü

ÈÇ£ÊàëÊÉ≥ÔºåÈóÆÈ¢òÂ§öÂçäÊòØÂá∫Áé∞Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠Ôºö

```json
{
  "scripts": {
    "postinstall": "node scripts/build.js"
  }
}
```

ÂÆÉÊó†ÈùûÂ∞±ÊòØÈÄöËøá Node Êèê‰æõ `child_process.spawn` ÂéªÊâßË°å Shell ÂëΩ‰ª§„ÄÇ

```js
function build(options) {
  var args = [require.resolve(path.join('node-gyp', 'bin', 'node-gyp.js')), 'rebuild', '--verbose'].concat(
    ['libsass_ext', 'libsass_cflags', 'libsass_ldflags', 'libsass_library'].map(function(subject) {
      return ['--', subject, '=', process.env[subject.toUpperCase()] || ''].join('');
    })).concat(options.args);

  console.log('Building:', [process.execPath].concat(args).join(' '));

  var proc = spawn(process.execPath, args, {
    stdio: [0, 1, 2]
  });

  proc.on('exit', function(errorCode) {
    if (!errorCode) {
      afterBuild(options);
      return;
    }

    if (errorCode === 127 ) {
      console.error('node-gyp not found!');
    } else {
      console.error('Build failed with error code:', errorCode);
    }

    process.exit(1);
  });
}
```

ÊâßË°åÁöÑÂëΩ‰ª§Ë°åÁ±ª‰ºº `node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=`„ÄÇ‰πüÂ∞±ÊòØ `node-gyp rebuild` ÂëΩ‰ª§„ÄÇ‰πüÂ∞±ÊòØ‰∏ãÈù¢Ëøô‰∏™Ôºö

| **Command**   | **Description**
|:--------------|:---------------------------------------------------------------
| `help`        | Shows the help dialog
| `build`       | Invokes `make`/`msbuild.exe` and builds the native addon
| `clean`       | Removes the `build` directory if it exists
| `configure`   | Generates project build files for the current platform
| `rebuild`     | Runs `clean`, `configure` and `build` all in a row
| `install`     | Installs Node.js header files for the given version
| `list`        | Lists the currently installed Node.js header versions
| `remove`      | Removes the Node.js header files for the given version

ÊâÄ‰ª• `node-gyp rebuild` Â∞±ÊòØÂÖàÂêéÊâßË°å `node-gyp clean`„ÄÅ`node-gyp configure`„ÄÅ`node-gyp build` ‰∏âÊù°ÂëΩ‰ª§ËÄåÂ∑≤„ÄÇÁªùÂ§ßÂ§öÊï∞ÈóÆÈ¢òÔºåÂèØËÉΩ‰ºöÂá∫Áé∞Âú® `node-gyp configure` ‰∏äÔºå‰πüÂ∞±ÊòØÁîüÊàêÂØπÂ∫îÂπ≥Âè∞ÁöÑÈ°πÁõÆÊûÑÂª∫Êñá‰ª∂„ÄÇ


### Á§∫‰æãÂàÜÊûê‰∏Ä
```
yarn install v1.22.19
[1/5] üîç  Validating package.json...
[2/5] üîç  Resolving packages...
[3/5] üöö  Fetching packages...
[4/5] üîó  Linking dependencies...
warning " > styled-jsx@3.2.3" has incorrect peer dependency "react@15.x.x || 16.x.x".
warning "zent > react-beautiful-dnd > react-motion@0.5.2" has incorrect peer dependency "react@^0.14.9 || ^15.3.0 || ^16.0.0".
warning "zent > react-beautiful-dnd > react-redux@5.1.1" has incorrect peer dependency "react@^0.14.0 || ^15.0.0-0 || ^16.0.0-0".
[5/5] üî®  Building fresh packages...
[-/3] ‚†Å waiting...
[2/3] ‚†Å fsevents
error /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass: Command failed.
Exit code: 1
Command: node scripts/build.js
Arguments: 
Directory: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass
Output:
Building: /usr/local/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/usr/local/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@3.8.0
gyp info using node@16.15.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb check python checking for Python executable "python2" in the PATH
gyp verb `which` failed Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
gyp verb `which` failed  python2 Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21) {
gyp verb `which` failed   code: 'ENOENT'
gyp verb `which` failed }
gyp verb check python checking for Python executable "python" in the PATH
gyp verb `which` failed Error: not found: python
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
gyp verb `which` failed  python Error: not found: python
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21) {
gyp verb `which` failed   code: 'ENOENT'
gyp verb `which` failed }
gyp ERR! configure error 
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYTHON env variable.
gyp ERR! stack     at PythonFinder.failNoPython (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/lib/configure.js:484:19)
gyp ERR! stack     at PythonFinder.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/lib/configure.js:406:16)
gyp ERR! stack     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:16)
gyp ERR! stack     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp ERR! stack     at FSReqCallback.oncomplete (node:fs:198:21)
gyp ERR! System Darwin 22.3.0
gyp ERR! command "/usr/local/bin/node" "/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass
gyp ERR! node -v v16.15.0
gyp ERR! node-gyp -v v3.8.0
gyp ERR! not ok 

...
```

ÁÑ∂ÂêéÂèØ‰ª•Âø´ÈÄüÈîÅÂÆöÂà∞ËøôÂá†Ë°åÔºö

```
Building: /usr/local/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/usr/local/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@3.8.0
gyp info using node@16.15.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb check python checking for Python executable "python2" in the PATH
gyp verb `which` failed Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
```

ÁúãÊ†∑Â≠êÂá∫Áé∞Âú® `node-gyp configure` ËøáÁ®ã‰∏äÔºåÁÑ∂ÂêéËøΩÊ∫ØÂà∞ `node-gyp/lib/configure.js` ‰∏≠ÁöÑ `findPython()` ÊñπÊ≥ï‰∏äÔºåÂÖ∂Ë∑ØÂæÑÂèñÂÜ≥‰∫éÔºö

```js
var python = gyp.opts.python || process.env.PYTHON || 'python2'
```

ÂÖ∂‰∏≠ `gyp.opts` ÂèØ‰ª•ÊòØ Command Options ÊàñËÄÖÊòØ `.npmrc` ‰∏≠ÁöÑÂØπÂ∫îÈÖçÁΩÆ„ÄÇÁî±‰∫éÊâßË°å `node-gyp rebuild` Êó∂Ê≤°Êúâ‰º†ÈÄí `--python` ÂèÇÊï∞Ôºå`.npmrc` ‰∏≠Ê≤°ÊúâËÆæÁΩÆ `python` ÈÖçÁΩÆÔºåÂõ†Ê≠§ÈªòËÆ§‰ΩøÁî® `python2`„ÄÇ‰ΩÜÁî±‰∫éÊàëÊú¨Êú∫ÁöÑÁéØÂ¢ÉÂèòÈáè `PATH` ÁöÑË∑ØÂæÑ‰∏≠Âπ∂Ê≤°ÊúâÂêç‰∏∫ `python2` ÁöÑÂèØÊâßË°åÊñá‰ª∂ÔºåÂõ†Ê≠§Êä•Èîô‰∫Ü„ÄÇ

Ëß£ÂÜ≥ÊñπÊ≥ïÊÄùË∑ØÂæàÁÆÄÂçïÔºö

* Â¶ÇÊûúÊòØËæÉÊñ∞ÁâàÊú¨ÁöÑ `node-sass`ÔºåÂÆÉÂØπÂ∫îÁöÑ `node-gyp` ÁâàÊú¨‰πüËæÉÊñ∞ÔºåÊ≠§Êó∂Â∫îÈ¶ñÈÄâÂÆâË£Ö Python 3„ÄÇ
* Â¶ÇÊûúÂΩìÂâç `node-sass` ÁâàÊú¨‰ªÖÊîØÊåÅ Python 2.xÔºåÈÇ£‰πàÂÆâË£ÖËØ•ÁâàÊú¨Â∞±Ë°å„ÄÇ

ÂÆâË£ÖÂÆå‰πãÂêéÔºåËÆæÁΩÆ npm Êàñ yarn ÈÖçÁΩÆÔºåÈÇ£‰πàÂÆÉËÉΩ‰ªé `var python = gyp.opts.python` ‰∏≠Ëé∑Âèñ Python ÁöÑË∑ØÂæÑ‰∫Ü„ÄÇ‰ª• macOS ‰∏∫‰æãÔºö

```shell
# Ëã•ÊòØ Python 2ÔºåÂàôÊòØ which python
$ which python3
/usr/local/bin/python3

$ npm config set python /usr/local/bin/python3
$ yarn config set python /usr/local/bin/python3
```

### Á§∫‰æãÂàÜÊûê‰∫å

```
yarn install v1.22.19
[1/5] üîç  Validating package.json...
[2/5] üîç  Resolving packages...
[3/5] üöö  Fetching packages...
[4/5] üîó  Linking dependencies...
warning " > styled-jsx@3.2.3" has incorrect peer dependency "react@15.x.x || 16.x.x".
warning "zent > react-beautiful-dnd > react-motion@0.5.2" has incorrect peer dependency "react@^0.14.9 || ^15.3.0 || ^16.0.0".
warning "zent > react-beautiful-dnd > react-redux@5.1.1" has incorrect peer dependency "react@^0.14.0 || ^15.0.0-0 || ^16.0.0-0".
[5/5] üî®  Building fresh packages...
[-/3] ‚†Ç waiting...
[2/3] ‚†Ç fsevents
warning Error running install script for optional dependency: "/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents: Command failed.
Exit code: 1
Command: node install
Arguments: 
Directory: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
Output:
node-pre-gyp info it worked if it ends with ok
node-pre-gyp info using node-pre-gyp@0.12.0
node-pre-gyp info using node@12.22.12 | darwin | x64
node-pre-gyp WARN Using request for node-pre-gyp https download 
node-pre-gyp info check checked for \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node\" (not found)
node-pre-gyp http GET https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz
node-pre-gyp http 403 https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz
node-pre-gyp WARN Tried to download(403): https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz 
node-pre-gyp WARN Pre-built binaries not found for fsevents@1.2.9 and node@12.22.12 (node-v72 ABI, unknown) (falling back to source compile with node-gyp) 
node-pre-gyp http 403 status code downloading tarball https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@12.22.12 | darwin | x64
gyp info ok 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@12.22.12 | darwin | x64
gyp ERR! configure error 
gyp ERR! stack Error: Command failed: /usr/bin/python3 -c import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack   File \"<string>\", line 1
gyp ERR! stack     import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack                       ^
gyp ERR! stack SyntaxError: invalid syntax
gyp ERR! stack 
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:308:12)
gyp ERR! stack     at ChildProcess.emit (events.js:314:20)
gyp ERR! stack     at maybeClose (internal/child_process.js:1022:16)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:287:5)
gyp ERR! System Darwin 22.3.0
gyp ERR! command \"/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js\" \"configure\" \"--fallback-to-build\" \"--module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node\" \"--module_name=fse\" \"--module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64\" \"--napi_version=8\" \"--node_abi_napi=napi\" \"--napi_build_version=0\" \"--node_napi_label=node-v72\" \"--python=/usr/bin/python3\"
gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v3.8.0
gyp ERR! not ok 
node-pre-gyp ERR! build error 
node-pre-gyp ERR! stack Error: Failed to execute '/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node --module_name=fse --module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64 --napi_version=8 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v72 --python=/usr/bin/python3' (1)
node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
node-pre-gyp ERR! stack     at ChildProcess.emit (events.js:314:20)
node-pre-gyp ERR! stack     at maybeClose (internal/child_process.js:1022:16)
node-pre-gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:287:5)
node-pre-gyp ERR! System Darwin 22.3.0
node-pre-gyp ERR! command \"/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/bin/node-pre-gyp\" \"install\" \"--fallback-to-build\"
node-pre-gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
node-pre-gyp ERR! node -v v12.22.12
node-pre-gyp ERR! node-pre-gyp -v v0.12.0
node-pre-gyp ERR! not ok 
```

Êàë‰ª¨ÂèØ‰ª•Âø´ÈÄüÂÆö‰ΩçÂà∞Ôºö

```
gyp ERR! configure error 
gyp ERR! stack Error: Command failed: /usr/bin/python3 -c import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack   File \"<string>\", line 1
gyp ERR! stack     import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack                       ^
gyp ERR! stack SyntaxError: invalid syntax
```

ÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØ‰ΩøÁî® Python3 ÊâßË°å‰ª£Á†ÅÊó∂ÂÄôÊèêÁ§∫ËØ≠Ê≥ïÈîôËØØÔºåÂõ†‰∏∫ `print "xxx"` ÊòØ Python2 ÁöÑËØ≠Ê≥ïÔºåËÄå Python3 ÁöÑËØ≠Ê≥ïÂ∫îËØ•ÊòØ `print("xxx")`„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÁåúÂà∞ÊòØÁõÆÂâç `node-sass` ÊâÄ‰æùËµñÁöÑ `node-gyp` ÁâàÊú¨Ëøá‰ΩéÔºåÂêéËÄÖÁî®ÁöÑÊòØ Python2 ËØ≠Ê≥ïÂÆûÁé∞ÁöÑ„ÄÇ

Ëß£ÂÜ≥ÊÄùË∑ØÂæàÁÆÄÂçïÔºåÂÆâË£Ö Python2 Âπ∂Â∞ÜÂÖ∂Ë∑ØÂæÑÊ∑ªÂä†Âà∞ npm ÈÖçÁΩÆ‰∏≠Êù•ÔºåÂÖ∑‰ΩìÊìç‰Ωú‰∏çÂ±ïÂºÄËµòËø∞ÔºåÂâçÊñáÂ∑≤‰ªãÁªçËøá‰∫Ü„ÄÇ

### Á§∫‰æãÂàÜÊûê‰∏â

ÂâçÈù¢ÂÆâË£ÖÂÆåÊàê‰πãÂêéÔºåÊâßË°å `yarn start` ÊûÑÂª∫È°πÁõÆÁöÑÊó∂ÂÄôÔºåÂá∫Áé∞ÈóÆÈ¢òÔºö

```
$ yarn start
yarn run v1.22.19
$ webpack-dev-server --env.NODE_ENV=development --hot
‚Ñπ ÔΩ¢wdsÔΩ£: Project is running at http://0.0.0.0:3001/
‚Ñπ ÔΩ¢wdsÔΩ£: webpack output is served from /
‚Ñπ ÔΩ¢wdsÔΩ£: Content not from webpack is served from /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/dist/
Browserslist: caniuse-lite is outdated. Please run next command `yarn upgrade`
[styled-jsx] Loading plugin from path: styled-jsx-plugin-sass
‚úñ ÔΩ¢wdmÔΩ£: Hash: baa097cdaf43c729d164
Version: webpack 4.41.2
Time: 455ms
Built at: 2023/02/07 18:21:57
                  Asset       Size  Chunks                                Chunk Names
           ./index.html  812 bytes          [emitted]                     
assets/main.baa097cd.js    923 KiB    main  [emitted] [immutable]  [big]  main
Entrypoint main [big] = assets/main.baa097cd.js
[0] multi (webpack)-dev-server/client?http://0.0.0.0:3001 (webpack)/hot/dev-server.js ./src/index.tsx 52 bytes {main} [built]
[./node_modules/strip-ansi/index.js] 161 bytes {main} [built]
[./node_modules/webpack-dev-server/client/index.js?http://0.0.0.0:3001] (webpack)-dev-server/client?http://0.0.0.0:3001 4.29 KiB {main} [built]
[./node_modules/webpack-dev-server/client/overlay.js] (webpack)-dev-server/client/overlay.js 3.51 KiB {main} [built]
[./node_modules/webpack-dev-server/client/socket.js] (webpack)-dev-server/client/socket.js 1.53 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/createSocketUrl.js] (webpack)-dev-server/client/utils/createSocketUrl.js 2.89 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/log.js] (webpack)-dev-server/client/utils/log.js 964 bytes {main} [built]
[./node_modules/webpack-dev-server/client/utils/reloadApp.js] (webpack)-dev-server/client/utils/reloadApp.js 1.59 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/sendMessage.js] (webpack)-dev-server/client/utils/sendMessage.js 402 bytes {main} [built]
[./node_modules/webpack/hot sync ^\.\/log$] (webpack)/hot sync nonrecursive ^\.\/log$ 170 bytes {main} [built]
[./node_modules/webpack/hot/dev-server.js] (webpack)/hot/dev-server.js 1.59 KiB {main} [built]
[./node_modules/webpack/hot/emitter.js] (webpack)/hot/emitter.js 75 bytes {main} [built]
[./node_modules/webpack/hot/log-apply-result.js] (webpack)/hot/log-apply-result.js 1.27 KiB {main} [built]
[./node_modules/webpack/hot/log.js] (webpack)/hot/log.js 1.34 KiB {main} [built]
[./src/index.tsx] 1.21 KiB {main} [built] [failed] [1 error]
    + 20 hidden modules

ERROR in ./src/index.tsx
Module build failed (from ./node_modules/babel-loader/lib/index.js):
Error: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/src/index.tsx: Node Sass does not yet support your current environment: OS X Unsupported architecture (arm64) with Unsupported runtime (93)
For more information on which environments are supported please see:
https://github.com/sass/node-sass/releases/tag/v4.13.0
    at module.exports (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/lib/binding.js:13:13)
    at Object.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/lib/index.js:14:35)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/styled-jsx-plugin-sass/index.js:1:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
Child html-webpack-plugin for "index.html":
     1 asset
    Entrypoint undefined = ./index.html
    [./node_modules/html-webpack-plugin/lib/loader.js!./src/index.html] 980 bytes {0} [built]
    [./node_modules/lodash/lodash.js] 528 KiB {0} [built]
    [./node_modules/webpack/buildin/global.js] (webpack)/buildin/global.js 472 bytes {0} [built]
    [./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 497 bytes {0} [built]
‚Ñπ ÔΩ¢wdmÔΩ£: Failed to compile.
```

> Node Sass does not yet support your current environment: OS X Unsupported architecture (arm64) with Unsupported runtime (93)

ÂèØ‰ª•ËøΩÊü•Âà∞ `node-sass/lib/extensions.js` ÁöÑ `isSupportedEnvironment()` ÊñπÊ≥ïÔºö

```js
function isSupportedEnvironment(platform, arch, abi) {
  return (
    false !== getHumanPlatform(platform) &&
    false !== getHumanArchitecture(arch) &&
    false !== getHumanNodeVersion(abi)
  );
}
```

ÂØπÂ∫î `getHumanArchitecture()` ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö

```js
function getHumanArchitecture(arch) {
  switch (arch || process.arch) {
    case 'ia32': return '32-bit';
    case 'x86': return '32-bit';
    case 'x64': return '64-bit';
    default: return false;
  }
}
```

Âπ∂‰∏çÊîØÊåÅ `arm64` Êû∂ÊûÑÔºåÂõ†Ê≠§Êä•Èîô‰∫Ü„ÄÇÁõ∏ÂÖ≥ IssueÔºö[Apple ARM Support #3033](https://github.com/sass/node-sass/issues/3033)„ÄÇ

Ëß£ÂÜ≥ÊñπÊ≥ïÊòØÈôç‰Ωé Node ÁâàÊú¨ÔºåÊØîÂ¶ÇÔºö

```
$ fnm use 12
```

ÁÑ∂Âêé‰∏∫‰ªÄ‰πà Node 12 Ê≤°ÈóÆÈ¢òÂë¢ÔºüÁøªÊü•Ê∫êÁ†Å `node-sass/lib/binding.js` ÂèëÁé∞Ôºö

```js
/**
 * Require binding
 */
module.exports = function (ext) {
  if (!ext.hasBinary(ext.getBinaryPath())) {
    if (!ext.isSupportedEnvironment()) {
      throw new Error(errors.unsupportedEnvironment());
    } else {
      throw new Error(errors.missingBinary());
    }
  }

  return require(ext.getBinaryPath());
};
```

È¶ñÂÖà `ext.hasBinary(ext.getBinaryPath())` ‰ºöÊåáÂÆöÁõÆÂΩïÊü•ÊâæÊòØÂê¶Â≠òÂú® `binding.node` Êñá‰ª∂ÔºåÊåáÂÆöË∑ØÂæÑÁ±ª‰ººÔºö `/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/vendor/darwin-x64-72/binding.node`„ÄÇËøô‰∏™Ë∑ØÂæÑÂèØ‰ª•ÈÄöËøá `SASS_BINARY_PATH`„ÄÅ`SASS_BINARY_DIR`„ÄÅ `SASS_BINARY_NAME` Êù•ÊåáÂÆö„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÔºåÂÖ∂ÈªòËÆ§ÂÄºÁî± `platform-arch-versions.modules` ÁªÑÊàêÔºàÂ¶Ç `darwin-x64-72`ÔºâÔºåÂâçÈù¢‰∏§‰∏™Â•ΩÁêÜËß£ÔºåÂêéÈù¢ÈÇ£‰∏™Â∫îËØ•ÊòØÁî± [Node Module](https://github.com/sass/node-sass#node-version-support-policy) ÂØπÂ∫îÁªÑÊàê„ÄÇ

Âú®‰ΩøÁî® Node 12 ÁöÑÊó∂ÂÄôÔºåÊú¨Âú∞ÂèØ‰ª•ÊâæÂà∞ `node_modules/node-sass/vendor/darwin-x64-72/binding.node` Êñá‰ª∂ÔºåÂõ†Ê≠§Ë∑≥Ëøá‰∫Ü `isSupportedEnvironment()` ÁöÑÊ£ÄÊü•ÔºåÊâÄ‰ª•Èôç‰Ωé Node ÁâàÊú¨‰πüÊòØËß£ÂÜ≥ÊñπÊ≥ï‰πã‰∏Ä„ÄÇÂΩì‰ΩøÁî® Node 16 ÁöÑÊó∂ÂÄôÔºåÊú¨Âú∞Ê≤°Êúâ `node_modules/node-sass/vendor/darwin-arm64-93/binding.node` Êñá‰ª∂ÔºåÂõ†Ê≠§Ë∑ëÂéªÊ†°È™åÂπ≥Âè∞„ÄÅÊû∂ÊûÑÂéª‰∫ÜÔºå‰ΩÜÁî±‰∫éÊú¨Êú∫ÊòØ ARM Êû∂ÊûÑÁöÑ MacÔºåËÄåÂâçÈù¢‰ª£Á†ÅÊâÄÁ§∫ÊòØ‰∏çÊîØÊåÅ arm64 Êû∂ÊûÑÁöÑÔºåÂõ†Ê≠§Â∞±Êä•Èîô‰∫Ü„ÄÇ

Ëß£ÂÜ≥ÊñπÊ≥ïÊòØÔºåÂâçÂæÄ GitHub ‰∏ãËΩΩÂØπÂ∫îÁâàÊú¨ÁöÑ `binding.node` Êñá‰ª∂Ëá≥Êú¨Âú∞ÔºåÁÑ∂ÂêéÈÄöËøá  `SASS_BINARY_PATH`„ÄÅ`SASS_BINARY_DIR`„ÄÅ `SASS_BINARY_NAME` Êù•ÊåáÂÆöËØ•Ë∑ØÂæÑÔºàÂÖ∑‰ΩìÈÖçÁΩÆÊñπÊ≥ïËØ∑ÁúãÔºö[Binary configuration parameters](https://github.com/sass/node-sass#binary-configuration-parameters)Ôºâ„ÄÇ

![](https://upload-images.jianshu.io/upload_images/5128488-5bf3d319da8cf854.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

Â∞ΩÁÆ°Ëá≥‰ªä Node Sass ËøòÊú™ÊîØÊåÅ ARM Êû∂ÊûÑÔºå‰ΩÜ ARM Mac Âú®‰ΩøÁî® Node 12 Êó∂ÔºåÂØπÂ∫îÁöÑ `darwin-x64-72/binding.node` ÊòØÊ≤°ÈóÆÈ¢òÁöÑÔºåÂõ†Ê≠§ÊàëÁåú‰∏ãËΩΩ `darwin-x64-xx_binding.node` ‰πüÊòØ OK ÁöÑÔºåÊ≤°‰∫≤ÊµãÔºåÊúâÂÖ¥Ë∂£ÂèØ‰ª•Ëá™Ë°åÂ∞ùËØï„ÄÇ

### Á§∫‰æãÂàÜÊûêÂõõ

```shell
$ yarn install                                                                                                                                                                                                                          [9:51:54]
yarn install v1.22.19
[1/4] üîç  Resolving packages...
[2/4] üöö  Fetching packages...
[3/4] üîó  Linking dependencies...
warning " > slick-carousel@1.8.1" has unmet peer dependency "jquery@>=1.8.0".
warning "react-dev-utils > fork-ts-checker-webpack-plugin@6.5.0" has unmet peer dependency "typescript@>= 2.7".
[4/4] üî®  Building fresh packages...
[6/6] ‚†Å node-sass
[-/6] ‚†Å waiting...
[-/6] ‚†Å waiting...
[-/6] ‚†Å waiting...
error /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass: Command failed.
Exit code: 1
Command: node scripts/build.js
Arguments: 
Directory: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass
Output:
Building: /Users/frankie/.nvm/versions/node/v18.16.0/bin/node /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/Users/frankie/.nvm/versions/node/v18.16.0/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@8.4.1
gyp info using node@18.16.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb find Python checking Python explicitly set from command line or npm configuration
gyp verb find Python - "--python=" or "npm config get python" is "/Users/frankie/.pyenv/shims/python"
gyp verb find Python - executing "/Users/frankie/.pyenv/shims/python" to get executable path
gyp verb find Python - executable path is "/Users/frankie/.pyenv/versions/2.7.18/bin/python"
gyp verb find Python - executing "/Users/frankie/.pyenv/versions/2.7.18/bin/python" to get version
gyp verb find Python - version is "2.7.18"
gyp verb find Python - version is 2.7.18 - should be >=3.6.0
gyp verb find Python - THIS VERSION OF PYTHON IS NOT SUPPORTED
gyp verb find Python Python is not set from environment variable PYTHON
gyp verb find Python checking if "python3" can be used
gyp verb find Python - executing "python3" to get executable path
gyp verb find Python - executable path is "/opt/homebrew/opt/python@3.12/bin/python3.12"
gyp verb find Python - executing "/opt/homebrew/opt/python@3.12/bin/python3.12" to get version
gyp verb find Python - version is "3.12.3"
gyp info find Python using Python version 3.12.3 found at "/opt/homebrew/opt/python@3.12/bin/python3.12"
gyp verb get node dir no --target version specified, falling back to host node version: 18.16.0
gyp verb command install [ '18.16.0' ]
gyp verb install input version string "18.16.0"
gyp verb install installing version: 18.16.0
gyp verb install --ensure was passed, so won't reinstall if already installed
gyp verb install version is already installed, need to check "installVersion"
gyp verb got "installVersion" 11
gyp verb needs "installVersion" 9
gyp verb install version is good
gyp verb get node dir target node version installed: 18.16.0
gyp verb build dir attempting to create "build" dir: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build
gyp verb build dir "build" dir needed to be created? Yes
gyp verb build/config.gypi creating config file
gyp verb build/config.gypi writing out config file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build/config.gypi
gyp verb config.gypi checking for gypi file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/config.gypi
gyp verb common.gypi checking for gypi file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/common.gypi
gyp verb gyp gyp format was not specified; forcing "make"
gyp info spawn /opt/homebrew/opt/python@3.12/bin/python3.12
gyp info spawn args [
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/gyp_main.py',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'make',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build/config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Library/Caches/node-gyp/18.16.0/include/node/common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=/Users/frankie/Library/Caches/node-gyp/18.16.0',
gyp info spawn args   '-Dnode_gyp_dir=/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp',
gyp info spawn args   '-Dnode_lib_file=/Users/frankie/Library/Caches/node-gyp/18.16.0/<(target_arch)/node.lib',
gyp info spawn args   '-Dmodule_root_dir=/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass',
gyp info spawn args   '-Dnode_engine=v8',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--no-parallel',
gyp info spawn args   '--generator-output',
gyp info spawn args   'build',
gyp info spawn args   '-Goutput_dir=.'
gyp info spawn args ]
Traceback (most recent call last):
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/gyp_main.py", line 42, in <module>
    import gyp  # noqa: E402
    ^^^^^^^^^^
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/pylib/gyp/__init__.py", line 9, in <module>
    import gyp.input
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/pylib/gyp/input.py", line 19, in <module>
    from distutils.version import StrictVersion
ModuleNotFoundError: No module named 'distutils'
gyp ERR! configure error 
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/lib/configure.js:259:16)
gyp ERR! stack     at ChildProcess.emit (node:events:513:28)
gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
gyp ERR! System Darwin 23.5.0
gyp ERR! command "/Users/frankie/.nvm/versions/node/v18.16.0/bin/node" "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
gyp ERR! cwd /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass
gyp ERR! node -v v18.16.0
```

Êä•ÈîôÂéüÂõ†ÊòØÊâæ‰∏çÂà∞ `distutils` Ê®°ÂùóÔºö

```shell
ModuleNotFoundError: No module named 'distutils'
```

‰ªé‰ª•‰∏ãÂèØÁü•Ôºö

- [What‚Äôs New In Python 3.10](https://docs.python.org/3/whatsnew/3.10.html#distutils-deprecated)
- [What‚Äôs New In Python 3.12](https://docs.python.org/3.12/whatsnew/3.12.html#distutils)

`distutils` Âú® Python 3.10 Ë¢´Â∫üÂºÉÔºå‰∫é Python 3.12 Ê≠£ÂºèÁßªÈô§„ÄÇ


ÊàëËøôÈáåÂàöÂ•ΩÊòØ 3.12 ÁâàÊú¨Ôºå‰∏ÄÊòØÈÄöËøá pyenv ÂàáÊç¢Êõ¥‰ΩéÁâàÊú¨ PythonÔºå‰∫åÊòØÂÆâË£Ö `python-setuptools` Êù•Ëß£ÂÜ≥„ÄÇ

```shell
$ brew install python-setuptools
```

Related Link: 

- [distutils is removed in Python 3.12 #2869](https://github.com/nodejs/node-gyp/issues/2869)
- [no module named distutils....but distutils installed?](https://stackoverflow.com/a/76691103/14569218)

<!--

## 2025.06.24

```shell
‚Üí ‚óè‚óè ifanr-wxlayout-editor $ yarn install                                                                                                                                                   [10:12:32]
yarn install v1.22.15
[1/5] üîç  Validating package.json...
[2/5] üîç  Resolving packages...
[3/5] üöö  Fetching packages...
[4/5] üîó  Linking dependencies...
warning "zent > react-beautiful-dnd > react-motion@0.5.2" has incorrect peer dependency "react@^0.14.9 || ^15.3.0 || ^16.0.0".
warning "zent > react-beautiful-dnd > react-redux@5.1.1" has incorrect peer dependency "react@^0.14.0 || ^15.0.0-0 || ^16.0.0-0".
[5/5] üî®  Building fresh packages...
[-/3] ‚†† waiting...
[2/3] ‚†† fsevents
warning Error running install script for optional dependency: "/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents: Command failed.
Exit code: 1
Command: node install
Arguments: 
Directory: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
Output:
node-pre-gyp info it worked if it ends with ok
node-pre-gyp info using node-pre-gyp@0.12.0
node-pre-gyp info using node@10.24.1 | darwin | x64
node-pre-gyp WARN Using request for node-pre-gyp https download 
node-pre-gyp info check checked for \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64/fse.node\" (not found)
node-pre-gyp http GET https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v64-darwin-x64.tar.gz
node-pre-gyp http 404 https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v64-darwin-x64.tar.gz
node-pre-gyp WARN Tried to download(404): https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v64-darwin-x64.tar.gz 
node-pre-gyp WARN Pre-built binaries not found for fsevents@1.2.9 and node@10.24.1 (node-v64 ABI, unknown) (falling back to source compile with node-gyp) 
node-pre-gyp http 404 status code downloading tarball https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v64-darwin-x64.tar.gz 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@10.24.1 | darwin | x64
gyp info ok 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@10.24.1 | darwin | x64
gyp http GET https://nodejs.org/download/release/v10.24.1/node-v10.24.1-headers.tar.gz
gyp http 200 https://nodejs.org/download/release/v10.24.1/node-v10.24.1-headers.tar.gz
gyp http GET https://nodejs.org/download/release/v10.24.1/SHASUMS256.txt
gyp http 200 https://nodejs.org/download/release/v10.24.1/SHASUMS256.txt
gyp info spawn /Users/frankie/.pyenv/shims/python
gyp info spawn args [ '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/gyp_main.py',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'make',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/build/config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/.node-gyp/10.24.1/include/node/common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=/Users/frankie/.node-gyp/10.24.1',
gyp info spawn args   '-Dnode_gyp_dir=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp',
gyp info spawn args   '-Dnode_lib_file=/Users/frankie/.node-gyp/10.24.1/<(target_arch)/node.lib',
gyp info spawn args   '-Dmodule_root_dir=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents',
gyp info spawn args   '-Dnode_engine=v8',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--no-parallel',
gyp info spawn args   '--generator-output',
gyp info spawn args   'build',
gyp info spawn args   '-Goutput_dir=.' ]
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 147, in <module>
    globals()[__func_name] = __get_hash(__func_name)
  File \"/Users/frankie/.pyenv/versions/2.7.18/lib/python2.7/hashlib.py\", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/gyp_main.py\", line 16, in <module>
    sys.exit(gyp.script_main())
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/__init__.py\", line 545, in script_main
    return main(sys.argv[1:])
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/__init__.py\", line 538, in main
    return gyp_main(args)
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/__init__.py\", line 514, in gyp_main
    options.duplicate_basename_check)
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/__init__.py\", line 98, in Load
    generator.CalculateVariables(default_variables, params)
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/generator/make.py\", line 79, in CalculateVariables
    import gyp.generator.xcode as xcode_generator
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/generator/xcode.py\", line 7, in <module>
    import gyp.xcodeproj_file
  File \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/gyp/pylib/gyp/xcodeproj_file.py\", line 152, in <module>
    _new_sha1 = hashlib.sha1
AttributeError: 'module' object has no attribute 'sha1'
gyp ERR! configure error 
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/lib/configure.js:345:16)
gyp ERR! stack     at ChildProcess.emit (events.js:198:13)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)
gyp ERR! System Darwin 24.5.0
gyp ERR! command \"/Users/frankie/.nvm/versions/node/v10.24.1/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js\" \"configure\" \"--fallback-to-build\" \"--module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64/fse.node\" \"--module_name=fse\" \"--module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64\" \"--napi_version=7\" \"--node_abi_napi=napi\" \"--napi_build_version=0\" \"--node_napi_label=node-v64\" \"--python=/Users/frankie/.pyenv/shims/python\"
gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
gyp ERR! node -v v10.24.1
gyp ERR! node-gyp -v v3.8.0
gyp ERR! not ok 
node-pre-gyp ERR! build error 
node-pre-gyp ERR! stack Error: Failed to execute '/Users/frankie/.nvm/versions/node/v10.24.1/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64/fse.node --module_name=fse --module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64 --napi_version=7 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v64 --python=/Users/frankie/.pyenv/shims/python' (1)
node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
node-pre-gyp ERR! stack     at ChildProcess.emit (events.js:198:13)
node-pre-gyp ERR! stack     at maybeClose (internal/child_process.js:982:16)
node-pre-gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5)
node-pre-gyp ERR! System Darwin 24.5.0
node-pre-gyp ERR! command \"/Users/frankie/.nvm/versions/node/v10.24.1/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/bin/node-pre-gyp\" \"install\" \"--fallback-to-build\"
node-pre-gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
node-pre-gyp ERR! node -v v10.24.1
node-pre-gyp ERR! node-pre-gyp -v v0.12.0
node-pre-gyp ERR! not ok 
Failed to execute '/Users/frankie/.nvm/versions/node/v10.24.1/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v64-darwin-x64/fse.node --module_name=fse --module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_m
‚ú®  Done in 19.45s.
```

## Other

https://www.cnblogs.com/yyh1/p/15954139.html
‰∏ãËæπÊàë‰ª¨Êù•‰∏ìÈó®ËØ¥‰∏Ä‰∏ã sass„ÄÅdart-sass Âíå node-sassÔºö

* sass ÊòØÁî± tsË∞ÉÁî® dart-sassÂÆûÁé∞ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÊù•ÁºñËØë sassÔºà‰ª•ÂâçÊòØÁî±ÂçïÁ∫ØÁöÑ tsÂÆûÁé∞ÁöÑÔºâ
* dart-sass ÊòØÁî± dart ÂÆûÁé∞ÁöÑ,ÈÄöËøá dart vm ËøêË°å dart ÊòØÁºñËØë sassÔºàÂú® npm ÂèØ‰ª•ÁúãÂà∞ËØ•ÂåÖÂ∑≤‰∏çË¢´ÂºÄÊîæ‰∏ãËΩΩ‰∫ÜÔºâ
* node-sass ÊòØÁî± node Ë∞ÉÁî® Â∫ïÂ±Ç c++ ÂÆûÁé∞ÁöÑ libsass Êù•ÁºñËØë sass


https://cloud.tencent.com/developer/article/1843877
https://github.com/sass/node-sass/releases/tag/v4.13.0
node-sass@4.13.0 ÁâàÊú¨ÁúüÁöÑ‰∏çÊîØÊåÅ node@14

https://www.npmjs.com/package/dart-sass
This package has been renamed to 'sass'.

https://juejin.cn/post/7052193042752602148
ÁªßÂæÄÂºÄÊù•ÁöÑ sass ‰∏â‰ª£ÁºñËØëÂô®Ôºöruby sass„ÄÅnode-sass„ÄÅdart-sass


https://www.zhihu.com/question/36291768/answer/318429630
Ë¶ÅÁêÜËß£node-gypÈ¶ñÂÖàË¶ÅÁü•ÈÅì‰ªÄ‰πàÊòØgyp([https://gyp.gsrc.io/index.md](https://link.zhihu.com/?target=https%3A//gyp.gsrc.io/index.md))„ÄÇgypÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™Áî®Êù•ÁîüÊàêÈ°πÁõÆÊñá‰ª∂ÁöÑÂ∑•ÂÖ∑Ôºå‰∏ÄÂºÄÂßãÊòØËÆæËÆ°ÁªôchromiumÈ°πÁõÆ‰ΩøÁî®ÁöÑÔºåÂêéÊù•Â§ßÂÆ∂ÂèëÁé∞ÊØîËæÉÂ•ΩÁî®Â∞±Áî®Âà∞‰∫ÜÂÖ∂‰ªñÂú∞Êñπ„ÄÇÁîüÊàêÈ°πÁõÆÊñá‰ª∂ÂêéÂ∞±ÂèØ‰ª•Ë∞ÉÁî®GCC, vsbuild, xcodeÁ≠âÁºñËØëÂπ≥Âè∞Êù•ÁºñËØë„ÄÇËá≥‰∫é‰∏∫‰ªÄ‰πàË¶ÅÊúânode-gypÔºåÊòØÁî±‰∫énodeÁ®ãÂ∫è‰∏≠ÈúÄË¶ÅË∞ÉÁî®‰∏Ä‰∫õÂÖ∂‰ªñËØ≠Ë®ÄÁºñÂÜôÁöÑÂ∑•ÂÖ∑ÁîöËá≥ÊòØdllÔºåÈúÄË¶ÅÂÖàÁºñËØë‰∏Ä‰∏ãÔºåÂê¶ÂàôÂ∞±‰ºöÊúâË∑®Âπ≥Âè∞ÁöÑÈóÆÈ¢òÔºå‰æãÂ¶ÇÂú®windows‰∏äËøêË°åÁöÑËΩØ‰ª∂copyÂà∞mac‰∏äÂ∞±‰∏çËÉΩÁî®‰∫ÜÔºå‰ΩÜÊòØÂ¶ÇÊûúÊ∫êÁ†ÅÊîØÊåÅÔºåÁºñËØë‰∏Ä‰∏ãÔºåÂú®mac‰∏äËøòÊòØÂèØ‰ª•Áî®ÁöÑ„ÄÇ


-->
