---
title: æˆ–è®¸èƒ½å¸®ä½ è§£å¼€ node-sass çš„æ‰€æœ‰ç–‘é—®ï¼Ÿ
number: '#98'
link: 'https://github.com/toFrankie/blog/issues/98'
created_at: '2023-02-25 20:33:34'
updated_at: '2024-05-20 11:10:13'
labels:
  - Node.js
  - '2023'
---
![é…å›¾æºè‡ª Freepik](https://upload-images.jianshu.io/upload_images/5128488-fb3c7e1fb18995e0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

é‚£ä¸ªæ˜¯ä¸æ˜¯ `node-sass` çš„å®‰è£…å°±èƒ½éš¾å€’ä¸€æ‰¹å‰ç«¯åŒå­¦ã€‚

çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ–è®¸èƒ½è§£å¼€æ‰€æœ‰ node-sass å®‰è£…ç–‘æƒ‘ï¼Ÿ

## å†™åœ¨å‰é¢

* æ–°é¡¹ç›®é¦–é€‰ Dart Sassï¼ˆå³ [`sass`](https://www.npmjs.com/package/sass)ï¼‰ï¼ŒNode Sass ä¸å†æä¾› CSS æ–°ç‰¹æ€§çš„æ”¯æŒã€‚

* å°½ç®¡ Node Sass çš„æ€§èƒ½ç›®å‰æœ€ä½³ï¼Œä½†å®ƒè¢«å¼ƒç”¨å·²æˆäº‹å®ã€‚è€Œä¸”è·Ÿ Dart Sass çš„æ€§èƒ½å·®å¼‚ï¼Œä¸€èˆ¬é¡¹ç›®ç›¸ä¿¡ 99% éƒ½æ— æ„ŸçŸ¥ã€‚

* å¤§å®¶éƒ½çŸ¥é“æ”¹ä¸ºå›½å†…é•œåƒæºï¼Œå¯ä»¥åŠ å¿« npm åŒ…çš„ä¸‹è½½ã€‚ä½† `node-sass` åŒ…è¾ƒä¸ºç‰¹æ®Šï¼Œåœ¨å®‰è£…æ—¶è¿˜è¦ä» GitHub ä¸­ä¸‹è½½å¯¹åº”å¹³å°çš„ `binding.node` æ–‡ä»¶ï¼Œå› æ­¤è¿˜è¦å°† Sass Binary Site æŒ‡å®šä¸ºå›½å†…é•œåƒæºä½¿å…¶ä¹Ÿåœ¨å›½å†…é•œåƒæºä¸­ä¸‹è½½ï¼Œæ‰èƒ½å½»åº•è§£å†³ç½‘ç»œä¸ç¨³å®šå¯¼è‡´å®‰è£…å¤±è´¥çš„é—®é¢˜ã€‚

* `node-sass` åŸºäº LibSass æ„å»ºï¼Œåè€…ä½¿ç”¨ C++ å¼€å‘ã€‚å› æ­¤éœ€è¦ç”¨åˆ° `node-gyp`ï¼Œåœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ Node.js ä¸­ä¼šè‡ªå¸¦ `node-gyp`ï¼Œå› æ­¤å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ— éœ€é¢å¤–å®‰è£…ã€‚
* `node-gyp` æ˜¯ GYP çš„ Node å®ç°ï¼Œæ˜¯ç”¨æ¥ç¼–è¯‘ C++ æ¨¡å—çš„è·¨å¹³å°å·¥å…·ã€‚è€Œ GYP æ˜¯åŸºäº Python å¼€å‘ï¼Œæ‰€ä»¥éœ€è¦å®‰è£… Pythonã€‚

* `node-gyp` é™¤äº†éœ€è¦å®‰è£… Python ä¹‹å¤–ï¼Œåœ¨ä¸åŒå¹³å°è¿˜è¦å®‰è£…å…¶ä»–ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚ macOS çš„ Xcodeã€Windows çš„ VC++ ç¼–è¯‘å™¨ç­‰ï¼Œä¸‹æ–‡ä¼šä»‹ç»ã€‚

* åœ¨ Node ä¸­è°ƒç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„æ¨¡å—ï¼Œéœ€è¦ç”¨ `node-gyp` ç”Ÿæˆå¹³å°ç›¸å…³çš„é¡¹ç›®æ–‡ä»¶ï¼Œç„¶åè°ƒç”¨ gccã€vsbuildã€xcode ç­‰ç¼–è¯‘å¹³å°æ¥è¿›è¡Œç¼–è¯‘ã€‚

* åœ¨ `node-gyp` æ„å»ºé¡¹ç›®æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŒ‡å®š Python è·¯å¾„ï¼Œåœ¨æœªé…ç½®çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ä»ç¯å¢ƒå˜é‡ `PATH` æŸ¥æ‰¾åä¸º `python2` çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ã€‚é€šå¸¸åšæ³•æ˜¯ç”¨ `npm config set python /path/to/your/python` å»æŒ‡å®šï¼Œç‰¹åˆ«æ˜¯æœ¬æœºæœ‰å¤šä¸ª Python ç‰ˆæœ¬ã€‚
* é•œåƒæºé—®é¢˜åªèƒ½è§£å†³ä¸‹è½½æ…¢çš„é—®é¢˜ï¼Œå¦‚æœ `node-sass` è¿˜å®‰è£…å¤±è´¥ï¼ŒåŸå› æ— éå°±å‡ ä¸ªï¼š
    * ä¸€æ˜¯ï¼Œæœªå®‰è£…å¹³å°ç›¸å…³çš„ç¼–è¯‘å™¨ã€‚æ¯”å¦‚ macOS çš„ Xcode ç­‰ã€‚
    * äºŒæ˜¯ï¼Œå½“å‰ `node-sass` ä¸ Node ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œè¿™ä¸ªç‰ˆæœ¬å¯¹åº”å…³ç³»å¯ä»¥åœ¨ `node-sass` å®˜ç½‘ä¸­æŸ¥çœ‹ï¼›
    * ä¸‰æ˜¯ï¼Œå½“å‰ `node-sass` æ‰€ä¾èµ–çš„ `node-gyp` ä¸æ”¯æŒä½ æœ¬æœºå®‰è£…çš„ Python ç‰ˆæœ¬ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µé™ä½/å‡çº§ Python è§£å†³ã€‚

## å‰è¨€

è‡ªè¯ç”Ÿä»¥æ¥ï¼ŒCSS åœ¨è¯­æ³•ä¸Šéƒ½è¾ƒä¸ºç®€å•ã€‚éšç€ Web çš„é£é€Ÿå‘å±•ï¼ŒWeb é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼ŒåŸç”Ÿ CSS åœ¨åº”å¯¹å¤æ‚é¡¹ç›®çš„æ—¶å€™ä¼¼ä¹åŠ›ä¸ä»å¿ƒã€‚åæ¥ç¤¾åŒºä¸Šå‡ºç°äº†å¾ˆå¤š CSS é¢„å¤„ç†å™¨ï¼ˆCSS preprocessorï¼‰ï¼Œæ¯”å¦‚ Sassã€Lessã€Stylusã€PostCSS ç­‰ã€‚å®ƒä»¬æä¾›äº†åŸç”Ÿ CSS ä¸å…·å¤‡çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ä»£ç æ··åˆã€åµŒå¥—é€‰æ‹©å™¨ã€ç»§æ‰¿é€‰æ‹©å™¨ç­‰ï¼Œä½¿å¾— CSS æ›´å®¹æ˜“ç»´æŠ¤ã€‚CSS é¢„å¤„ç†å™¨å¯ä»¥ç†è§£ä¸ºä¸€é—¨æ–°çš„è¯­è¨€ï¼Œéƒ½æœ‰ç€ç‰¹å®šçš„è¯­æ³•ï¼Œç„¶åé€šè¿‡å¯¹åº”çš„ç¼–è¯‘å™¨ç”Ÿæˆæµè§ˆå™¨å¯è¯†åˆ«çš„åŸç”Ÿ CSSã€‚

### Sass ä¸å…¶ä»–é¢„å¤„ç†å™¨çš„åŒºåˆ«

æ­¤å¤„ä¸è®¨è®ºè¯­æ³•ä¸Šçš„å·®å¼‚ã€‚Less å’Œ Stylus çš„ç¼–è¯‘å™¨éƒ½æ˜¯ä½¿ç”¨ JavaScript ç¼–å†™çš„ã€‚è€Œ Sass åˆ™ç»å†äº† Ruby Sassã€Node Sassã€Dart Sass ä¸‰ä»£ç¼–è¯‘å™¨ï¼Œä¸”éƒ½ä¸æ˜¯åŸºäº JavaScript ç¼–å†™çš„ã€‚

### Sass ç¼–è¯‘å™¨

* [Ruby Sass](https://sass-lang.com/ruby-sass)ï¼šåŸºäº Ruby è¯­è¨€ç¼–å†™ï¼Œæ€§èƒ½æœ€å·®ï¼Œäº 2019 å¹´åœæ­¢ç»´æŠ¤ã€‚
* [Node Sass]()ï¼šåŸºäº LibSass æ„å»ºå¹¶ä¸ Node.js è¿›è¡Œé›†æˆï¼Œè€Œ LibSass æ˜¯ç”¨ C++ ç¼–å†™çš„ã€‚äº 2020 å¹´å®£å¸ƒä¸å†æä¾›æ–°ç‰¹æ€§çš„æ”¯æŒã€‚
* [Dart Sass](https://sass-lang.com/dart-sass)ï¼šåŸºäº Dart è¯­è¨€ç¼–å†™ï¼ŒDart æ˜¯ Flutter çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥ç¼–è¯‘ä¸º JavaScriptã€‚

Node Sass æ€§èƒ½æœ€ä½³ï¼ŒDart Sass æ¬¡ä¹‹ï¼ŒRuby Sass æœ€æ‹‰ã€‚å°½ç®¡ Node Sass çš„æ€§èƒ½æœ€ä½³ï¼Œä½†ç”±äº [LibSass](https://sass-lang.com/libsass) è·Ÿä¸ä¸Š CSS åŠ Sass å¿«é€Ÿå‘å±•çš„æ­¥ä¼ï¼Œæ‰€ä»¥ Sass å›¢é˜Ÿå†³å®šæ”¾å¼ƒå®ƒï¼Œå…¨é¢æ‹¥æŠ± Dart Sassã€‚

* [LibSass is Deprecated](https://sass-lang.com/blog/libsass-is-deprecated)
* [Ruby Sass is Deprecated](https://sass-lang.com/blog/ruby-sass-is-deprecated)

### Node Sass ä¸ Dart Sass å¦‚ä½•é€‰æ‹©ï¼Ÿ

æ–°é¡¹ç›®é¦–é€‰ Dart Sassï¼Œè¿™ä¹Ÿæ˜¯ Sass å›¢é˜Ÿæ‰€æ¨èçš„ã€‚ç”±äº Node Sass ä¸å†æ”¯æŒæ–°ç‰¹æ€§ï¼Œæœªæ¥é€æ­¥è¢«æ·˜æ±°æ˜¯å¾ˆè‡ªç„¶çš„äº‹ã€‚

Dart Sass æä¾›äº†çº¯ JavaScript çš„ npm åŒ… [`sass`](https://www.npmjs.com/package/sass)ï¼ˆä»¥å‰å«åš [`dart-sass`](https://www.npmjs.com/package/dart-sass)ï¼‰ï¼Œå®ƒçš„å®‰è£…å¯æ¯” [`node-sass`](https://www.npmjs.com/package/node-sass) çœå¿ƒå¤šäº† ğŸ˜ªã€‚ä» Node Sass è¿ç§»åˆ° Dart Sass ä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦æŠŠ `package.json` ä¸­çš„ `node-sass` ä¾èµ–æ”¹ä¸º `sass` å³å¯ï¼Œä¸¤è€…æä¾›çš„ JavaScript API æ˜¯ç›¸åŒçš„ã€‚

## node-sass

å†æ¬¡æé†’å¤§å®¶ï¼Œä¸è¦å†ç”¨ Node Sass äº†ï¼š

> **Warning:**Â [LibSass and Node Sass are deprecated](https://sass-lang.com/blog/libsass-is-deprecated). While they will continue to receive maintenance releases indefinitely, there are no plans to add additional features or compatibility with any new CSS or Sass features. Projects that still use it should move ontoÂ [Dart Sass](https://sass-lang.com/dart-sass).

### node-gyp

ç”±äº `node-sass` æ„å»ºåœ¨ LibSass ä¹‹ä¸Šï¼ŒLibSass åˆ™æ˜¯ç”¨ C++ å®ç°çš„ï¼Œå› æ­¤ä½¿ç”¨ `node-sass` çš„è¯ï¼Œ`node-gyp` æ˜¯å¿…éœ€çš„ã€‚`node-gyp` æ˜¯ [GYP](https://gyp.gsrc.io/index.md) åœ¨ Node ä¸­çš„å®ç°ï¼Œç”¨æ¥ç¼–è¯‘åŸç”Ÿ C++ æ¨¡å—çš„ã€‚å…¶ä¸­ `node-gyp` åœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ Node.js æ˜¯è‡ªå¸¦çš„ã€‚

### node-gyp æ­£å¸¸è¿è¡Œçš„å‰æ

ä½¿ç”¨ `node-gyp`ä¹‹å‰ï¼Œè¦å®‰è£…å¯¹åº”å¹³å°çš„ç›¸å…³å·¥å…·æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚æ›´å¤šå®‰è£…ä»‹ç»è¯·çœ‹ï¼š[node-gyp Installation](https://github.com/nodejs/node-gyp#installation)ã€‚

Linux/Unix å¹³å°ï¼š

> * Python 3.x
> * make
> * A proper C/C++ compiler toolchain, likeÂ [GCC](https://gcc.gnu.org/)

macOS å¹³å°ï¼š

> * Python 3.x
> * XCode Command Line Tools

Windows å¹³å°ï¼š

> * Python
> * VC++ ç¼–è¯‘å™¨



ä»¥ macOS ä¸ºä¾‹ï¼Œè¿™é‡Œä¸å…¨é‡å®‰è£… XCodeï¼Œåªè¦å®‰è£… XCode Command Line Tools å³å¯ã€‚

```shell
# å®‰è£… XCode Command Line Tools
$ xcode-select --install

# å®‰è£… Python 3
$ brew install python
```

ä»¥ Windows ä¸ºä¾‹ï¼Œå…ˆ Microsoft Store ä¸‹è½½å®‰è£… Pythonï¼Œæ¥ç€ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ cmd æˆ– PowerShell æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£… VC++ ç¼–è¯‘å™¨ï¼ˆæ›´å¤šè¯·çœ‹ [Environment setup and configuration](https://github.com/Microsoft/nodejs-guidelines/blob/master/windows-environment.md#environment-setup-and-configuration)ï¼‰ã€‚

```shell
$ npm install --global --production windows-build-tools
```

### æŒ‡å®š Python ç‰ˆæœ¬

å¦‚æœä½ å®‰è£…äº†å¤šä¸ª Python ç‰ˆæœ¬ï¼Œå¯åœ¨ npm æˆ– yarn çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚ä»¥ macOS ä¸ºä¾‹ï¼š

```shell
# è·å– Python è·¯å¾„
$ which python3
/usr/local/bin/python3

# é…ç½® npm æˆ– yarn çš„ python è·¯å¾„
$ npm config set python /usr/local/bin/python3
$ yarn config set python /usr/local/bin/python3
```

> è¯·æ³¨æ„ï¼Œä½ç‰ˆæœ¬ `node-gyp` å¯èƒ½ä»…æ”¯æŒ Python 2.xã€‚

### node-sass å®‰è£…æ…¢æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ

é¦–å…ˆæ˜¯é•œåƒæºçš„é—®é¢˜ï¼Œå®ƒä¸å•æ˜¯ `node-sass` åŒ…æ‰è¿™æ ·ï¼Œæ‰€æœ‰åŒ…éƒ½ä¸€æ ·ã€‚ç”±äº npm é»˜è®¤é•œåƒæº `https://registry.npmjs.org/` åœ¨å¢ƒå¤–ï¼Œè®¿é—®çš„æ—¶å€™æ…¢æˆ–è€…ä¸ç¨³å®šæ˜¯æ­£å¸¸çš„ã€‚è¿™ä¸ªå¯ä»¥æŒ‚æ¢¯å­æˆ–è€…ä¿®æ”¹ä¸ºå›½å†…é•œåƒæºè§£å†³ã€‚

æ¯”å¦‚ï¼Œä¿®æ”¹ä¸ºæ·˜å®é•œåƒæºï¼š

```shell
$ npm config set registry https://registry.npmmirror.com/
$ yarn config set reigstry https://registry.npmmirror.com/
```
> å¦‚æœæ˜¯ç®¡ç†é•œåƒæºï¼Œä¸ªäººæ¨èä½¿ç”¨ [nrm](https://www.jianshu.com/p/5ec39caa01cd) æˆ– [yrm](https://www.jianshu.com/p/2a4b345f35a8)ã€‚

### ä¸ºä»€ä¹ˆä¿®æ”¹ä¸ºå›½å†…é•œåƒæºè¿˜æ…¢ï¼Œç”šè‡³å¤±è´¥ï¼Ÿ

åœ¨ `node-sass` çš„ `package.json` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªå‘½ä»¤ï¼š

```json
{
  "scripts": {
    "install": "node scripts/install.js",
    "postinstall": "node scripts/build.js"
  }
}
```

æ‰€ä»¥åœ¨å®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œä¼šå…ˆåæ‰§è¡Œ `install`ã€`postinstall` å¯¹åº”å‘½ä»¤ï¼Œå®ƒä»¬æ‰€åšçš„äº‹æƒ…å¤§è‡´æ˜¯ï¼š

1. ä¸‹è½½å¯¹åº”å¹³å°çš„ `binding.node` æ–‡ä»¶ï¼›
2. ä¸‹è½½å®Œæˆï¼Œæ‰§è¡Œ [`node-gyp rebuild`](https://github.com/nodejs/node-gyp#commands) å‘½ä»¤è¿›è¡Œæ„å»ºã€‚

åœ¨ `script/index.js` ä¼šæ‰§è¡Œä¸€ä¸ª `checkAndDownloadBinary()` æ–¹æ³•ï¼Œä»¥æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜ã€‚è‹¥æ— ï¼Œç»§ç»­æ‰§è¡Œä¸€ä¸ª `download()` æ–¹æ³•åœ¨æŒ‡å®š URL ä¸­ä¸‹è½½ `binding.node` æ–‡ä»¶ï¼Œè€Œ URL åˆ™é€šè¿‡ `getBinaryUrl()` æ–¹æ³•è·å–ï¼š

```js
function getBinaryUrl() {
  var site = getArgument('--sass-binary-site') ||
             process.env.SASS_BINARY_SITE  ||
             process.env.npm_config_sass_binary_site ||
             (pkg.nodeSassConfig && pkg.nodeSassConfig.binarySite) ||
             'https://github.com/sass/node-sass/releases/download';

  return [site, 'v' + pkg.version, getBinaryName()].join('/');
}
```

ä»ä»£ç å¯çŸ¥ï¼Œå…ˆåé¡ºåºæ˜¯ï¼š
* å‘½ä»¤è¡Œå‚æ•° `--sass-binary-site`
* ç¯å¢ƒå˜é‡ `SASS_BINARY_SITE`
* `.npmrc` é…ç½® `sass_binary_site`
* `package.json` ä¸­çš„ `nodeSass.binarySite` å­—æ®µ
* è‹¥ä»¥ä¸Šéƒ½æ²¡æœ‰æŒ‡å®šï¼Œåˆ™ä» Github ä¸­ä¸‹è½½ï¼Œæ¯”å¦‚ï¼š`https://github.com/sass/node-sass/releases/download/v8.0.0/darwin-x64-83_binding.node`ã€‚

å› æ­¤ï¼Œä»…ä»…æŒ‡å®šå›½å†…é•œåƒæºè¿˜ä¸å¤Ÿï¼Œè¿˜è¦æŒ‡å®š Sass Binary Siteï¼Œæ–¹å¼æœ‰ä»¥ä¸Šå››ç§ã€‚

### æŒ‡å®š Sass Binary Site

é¦–å…ˆï¼Œä»ä¸Šé¢çš„ `getBinaryUrl()` æ–¹æ³•å¯çŸ¥ï¼Œå¯ä»¥æœ‰å¤šç§æ–¹å¼å»æŒ‡å®šï¼Œä½†ä¸ªäººæ¨èåœ¨ `.npmrc` æˆ– `.yarnrc` ä¸­æŒ‡å®šï¼š

```shell
$ npm config set sass_binary_site https://npmmirror.com/mirrors/node-sass
$ yarn config set sass_binary_site https://npmmirror.com/mirrors/node-sass
```

è¿™æ ·çš„è¯ï¼Œå…¶ `binding.node` æ–‡ä»¶å°±ä¼šä» `https://npmmirror.com/mirrors/node-sass/v8.0.0/darwin-x64-83_binding.node` ä¸‹è½½ï¼Œå°±ä¸ä¼šé¾Ÿé€Ÿé‚£ä¹ˆæ…¢äº†ã€‚

è¿˜å¯ä»¥è¿™æ ·ï¼š

> * å¦‚æœæ˜¯ä½¿ç”¨å‘½ä»¤è¡Œï¼Œå¯ä»¥åœ¨ `--sass-binary-site` å‚æ•°æŒ‡å®šï¼Œæ¯”å¦‚ï¼š`npm install node-sass --sass-binary-site=https://npmmirror.com/mirrors/node-sass`ã€‚
> * å¯ä»¥è®¾ç½® `SASS_BINARY_SITE` ç¯å¢ƒå˜é‡ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š
>   * å…¨å±€ç¯å¢ƒå˜é‡ï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œæ¯”å¦‚ `echo 'export SASS_BINARY_SITE=https://npmmirror.com/mirrors/node-sass' >> ~/.zshrc`ã€‚
>   * ä¸´æ—¶ç¯å¢ƒå˜é‡ï¼Œæ¯æ¬¡å®‰è£…çš„æ—¶å€™æŒ‡å®šã€‚æ¯”å¦‚ `SASS_BINARY_SITE=https://npmmirror.com/mirrors/node-sass npm install`ã€‚

æ€»çš„æ¥è®²ï¼Œåœ¨ `.npmrc` æˆ– `.yarnrc` ä¸­æŒ‡å®šä¸ªäººè®¤ä¸ºæ˜¯æœ€åˆé€‚çš„ã€‚

## é—®é¢˜æ’æŸ¥

å®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åï¼Œå®‰è£… `node-sass` è¿˜æ˜¯ä¸æˆåŠŸï¼Ÿ

### æ£€æŸ¥ Node ç‰ˆæœ¬

å…ˆæ£€æŸ¥å½“å‰ `node-sass` ç‰ˆæœ¬æ‰€æ”¯æŒçš„ Node ç‰ˆæœ¬ï¼Œç„¶ååœ¨å®‰è£…å¯¹åº”çš„ Node ç‰ˆæœ¬é‡è¯•ã€‚è¯¦è§ [Node version support policy](https://github.com/sass/node-sass#node-version-support-policy)ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-419b999883435558.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


åƒæˆ‘é¡¹ç›®ä¸­ `node-sass` ç‰ˆæœ¬å·ä¸º `4.13.0`ï¼Œä½¿ç”¨ Node 16 å°±ä¸è¡Œï¼Œå› æ­¤æˆ‘é™åˆ°äº† Node 12ã€‚

```shell
$ fnm install 12
$ fnm use 12
```

> Node å¤šç‰ˆæœ¬ç®¡ç†çš„è¯ï¼Œä¸ªäººæ¨èä½¿ç”¨ [`fnm`](https://www.jianshu.com/p/0843d55e044e)ã€‚

é™¤äº† Node ç‰ˆæœ¬è¿‡é«˜ä¹‹å¤–ï¼Œè¯¥ç‰ˆæœ¬ä»…æ”¯æŒ Python 2ã€‚è€Œç³»ç»Ÿå†…ç½®çš„ Python 2.x åœ¨ macOS 12.3 ä¹‹åè¢«ç§»é™¤äº†ï¼Œè€Œä¸”ç›®å‰ Homebrew ä¸å†æ”¯æŒå®‰è£… Python 2ã€‚ç„¶åå‚è€ƒè¿™ç¯‡[æ–‡ç« ](https://www.wyr.me/post/658)ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå®‰è£… Python 2 çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š

```shell
$ brew install pyenv
$ pyenv install 2.7.18
$ echo 'export PATH="$(pyenv root)/shims:${PATH}"' >> ~/.zshrc
$ source ~/.zshrc
$ pyenv global 2.7.18
```
å®‰è£…å®Œä¹‹åï¼Œå†å°†å®ƒçš„è·¯å¾„è®¾ç½®åˆ° `.npmrc` é‡Œé¢ã€‚

```shell
$ python --version
Python 2.7.18

$ which python
/Users/frankie/.pyenv/shims/python

$ npm config set python /Users/frankie/.pyenv/shims/python
$ yarn config set python /Users/frankie/.pyenv/shims/python
```

### è¿˜ä¸è¡Œï¼Ÿ

é‚£æˆ‘æƒ³ï¼Œé—®é¢˜å¤šåŠæ˜¯å‡ºç°åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼š

```json
{
  "scripts": {
    "postinstall": "node scripts/build.js"
  }
}
```

å®ƒæ— éå°±æ˜¯é€šè¿‡ Node æä¾› `child_process.spawn` å»æ‰§è¡Œ Shell å‘½ä»¤ã€‚

```js
function build(options) {
  var args = [require.resolve(path.join('node-gyp', 'bin', 'node-gyp.js')), 'rebuild', '--verbose'].concat(
    ['libsass_ext', 'libsass_cflags', 'libsass_ldflags', 'libsass_library'].map(function(subject) {
      return ['--', subject, '=', process.env[subject.toUpperCase()] || ''].join('');
    })).concat(options.args);

  console.log('Building:', [process.execPath].concat(args).join(' '));

  var proc = spawn(process.execPath, args, {
    stdio: [0, 1, 2]
  });

  proc.on('exit', function(errorCode) {
    if (!errorCode) {
      afterBuild(options);
      return;
    }

    if (errorCode === 127 ) {
      console.error('node-gyp not found!');
    } else {
      console.error('Build failed with error code:', errorCode);
    }

    process.exit(1);
  });
}
```

æ‰§è¡Œçš„å‘½ä»¤è¡Œç±»ä¼¼ `node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=`ã€‚ä¹Ÿå°±æ˜¯ `node-gyp rebuild` å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ä¸ªï¼š

| **Command**   | **Description**
|:--------------|:---------------------------------------------------------------
| `help`        | Shows the help dialog
| `build`       | Invokes `make`/`msbuild.exe` and builds the native addon
| `clean`       | Removes the `build` directory if it exists
| `configure`   | Generates project build files for the current platform
| `rebuild`     | Runs `clean`, `configure` and `build` all in a row
| `install`     | Installs Node.js header files for the given version
| `list`        | Lists the currently installed Node.js header versions
| `remove`      | Removes the Node.js header files for the given version

æ‰€ä»¥ `node-gyp rebuild` å°±æ˜¯å…ˆåæ‰§è¡Œ `node-gyp clean`ã€`node-gyp configure`ã€`node-gyp build` ä¸‰æ¡å‘½ä»¤è€Œå·²ã€‚ç»å¤§å¤šæ•°é—®é¢˜ï¼Œå¯èƒ½ä¼šå‡ºç°åœ¨ `node-gyp configure` ä¸Šï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆå¯¹åº”å¹³å°çš„é¡¹ç›®æ„å»ºæ–‡ä»¶ã€‚


### ç¤ºä¾‹åˆ†æä¸€
```
yarn install v1.22.19
[1/5] ğŸ”  Validating package.json...
[2/5] ğŸ”  Resolving packages...
[3/5] ğŸšš  Fetching packages...
[4/5] ğŸ”—  Linking dependencies...
warning " > styled-jsx@3.2.3" has incorrect peer dependency "react@15.x.x || 16.x.x".
warning "zent > react-beautiful-dnd > react-motion@0.5.2" has incorrect peer dependency "react@^0.14.9 || ^15.3.0 || ^16.0.0".
warning "zent > react-beautiful-dnd > react-redux@5.1.1" has incorrect peer dependency "react@^0.14.0 || ^15.0.0-0 || ^16.0.0-0".
[5/5] ğŸ”¨  Building fresh packages...
[-/3] â  waiting...
[2/3] â  fsevents
error /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass: Command failed.
Exit code: 1
Command: node scripts/build.js
Arguments: 
Directory: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass
Output:
Building: /usr/local/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/usr/local/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@3.8.0
gyp info using node@16.15.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb check python checking for Python executable "python2" in the PATH
gyp verb `which` failed Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
gyp verb `which` failed  python2 Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21) {
gyp verb `which` failed   code: 'ENOENT'
gyp verb `which` failed }
gyp verb check python checking for Python executable "python" in the PATH
gyp verb `which` failed Error: not found: python
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
gyp verb `which` failed  python Error: not found: python
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21) {
gyp verb `which` failed   code: 'ENOENT'
gyp verb `which` failed }
gyp ERR! configure error 
gyp ERR! stack Error: Can't find Python executable "python", you can set the PYTHON env variable.
gyp ERR! stack     at PythonFinder.failNoPython (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/lib/configure.js:484:19)
gyp ERR! stack     at PythonFinder.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/lib/configure.js:406:16)
gyp ERR! stack     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:16)
gyp ERR! stack     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp ERR! stack     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp ERR! stack     at FSReqCallback.oncomplete (node:fs:198:21)
gyp ERR! System Darwin 22.3.0
gyp ERR! command "/usr/local/bin/node" "/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass
gyp ERR! node -v v16.15.0
gyp ERR! node-gyp -v v3.8.0
gyp ERR! not ok 

...
```

ç„¶åå¯ä»¥å¿«é€Ÿé”å®šåˆ°è¿™å‡ è¡Œï¼š

```
Building: /usr/local/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/usr/local/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@3.8.0
gyp info using node@16.15.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb check python checking for Python executable "python2" in the PATH
gyp verb `which` failed Error: not found: python2
gyp verb `which` failed     at getNotFoundError (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:13:12)
gyp verb `which` failed     at F (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:68:19)
gyp verb `which` failed     at E (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:80:29)
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/which/which.js:89:16
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/index.js:42:5
gyp verb `which` failed     at /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/isexe/mode.js:8:5
gyp verb `which` failed     at FSReqCallback.oncomplete (node:fs:198:21)
```

çœ‹æ ·å­å‡ºç°åœ¨ `node-gyp configure` è¿‡ç¨‹ä¸Šï¼Œç„¶åè¿½æº¯åˆ° `node-gyp/lib/configure.js` ä¸­çš„ `findPython()` æ–¹æ³•ä¸Šï¼Œå…¶è·¯å¾„å–å†³äºï¼š

```js
var python = gyp.opts.python || process.env.PYTHON || 'python2'
```

å…¶ä¸­ `gyp.opts` å¯ä»¥æ˜¯ Command Options æˆ–è€…æ˜¯ `.npmrc` ä¸­çš„å¯¹åº”é…ç½®ã€‚ç”±äºæ‰§è¡Œ `node-gyp rebuild` æ—¶æ²¡æœ‰ä¼ é€’ `--python` å‚æ•°ï¼Œ`.npmrc` ä¸­æ²¡æœ‰è®¾ç½® `python` é…ç½®ï¼Œå› æ­¤é»˜è®¤ä½¿ç”¨ `python2`ã€‚ä½†ç”±äºæˆ‘æœ¬æœºçš„ç¯å¢ƒå˜é‡ `PATH` çš„è·¯å¾„ä¸­å¹¶æ²¡æœ‰åä¸º `python2` çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤æŠ¥é”™äº†ã€‚

è§£å†³æ–¹æ³•æ€è·¯å¾ˆç®€å•ï¼š

* å¦‚æœæ˜¯è¾ƒæ–°ç‰ˆæœ¬çš„ `node-sass`ï¼Œå®ƒå¯¹åº”çš„ `node-gyp` ç‰ˆæœ¬ä¹Ÿè¾ƒæ–°ï¼Œæ­¤æ—¶åº”é¦–é€‰å®‰è£… Python 3ã€‚
* å¦‚æœå½“å‰ `node-sass` ç‰ˆæœ¬ä»…æ”¯æŒ Python 2.xï¼Œé‚£ä¹ˆå®‰è£…è¯¥ç‰ˆæœ¬å°±è¡Œã€‚

å®‰è£…å®Œä¹‹åï¼Œè®¾ç½® npm æˆ– yarn é…ç½®ï¼Œé‚£ä¹ˆå®ƒèƒ½ä» `var python = gyp.opts.python` ä¸­è·å– Python çš„è·¯å¾„äº†ã€‚ä»¥ macOS ä¸ºä¾‹ï¼š

```shell
# è‹¥æ˜¯ Python 2ï¼Œåˆ™æ˜¯ which python
$ which python3
/usr/local/bin/python3

$ npm config set python /usr/local/bin/python3
$ yarn config set python /usr/local/bin/python3
```

### ç¤ºä¾‹åˆ†æäºŒ

```
yarn install v1.22.19
[1/5] ğŸ”  Validating package.json...
[2/5] ğŸ”  Resolving packages...
[3/5] ğŸšš  Fetching packages...
[4/5] ğŸ”—  Linking dependencies...
warning " > styled-jsx@3.2.3" has incorrect peer dependency "react@15.x.x || 16.x.x".
warning "zent > react-beautiful-dnd > react-motion@0.5.2" has incorrect peer dependency "react@^0.14.9 || ^15.3.0 || ^16.0.0".
warning "zent > react-beautiful-dnd > react-redux@5.1.1" has incorrect peer dependency "react@^0.14.0 || ^15.0.0-0 || ^16.0.0-0".
[5/5] ğŸ”¨  Building fresh packages...
[-/3] â ‚ waiting...
[2/3] â ‚ fsevents
warning Error running install script for optional dependency: "/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents: Command failed.
Exit code: 1
Command: node install
Arguments: 
Directory: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
Output:
node-pre-gyp info it worked if it ends with ok
node-pre-gyp info using node-pre-gyp@0.12.0
node-pre-gyp info using node@12.22.12 | darwin | x64
node-pre-gyp WARN Using request for node-pre-gyp https download 
node-pre-gyp info check checked for \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node\" (not found)
node-pre-gyp http GET https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz
node-pre-gyp http 403 https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz
node-pre-gyp WARN Tried to download(403): https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz 
node-pre-gyp WARN Pre-built binaries not found for fsevents@1.2.9 and node@12.22.12 (node-v72 ABI, unknown) (falling back to source compile with node-gyp) 
node-pre-gyp http 403 status code downloading tarball https://fsevents-binaries.s3-us-west-2.amazonaws.com/v1.2.9/fse-v1.2.9-node-v72-darwin-x64.tar.gz 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@12.22.12 | darwin | x64
gyp info ok 
gyp info it worked if it ends with ok
gyp info using node-gyp@3.8.0
gyp info using node@12.22.12 | darwin | x64
gyp ERR! configure error 
gyp ERR! stack Error: Command failed: /usr/bin/python3 -c import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack   File \"<string>\", line 1
gyp ERR! stack     import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack                       ^
gyp ERR! stack SyntaxError: invalid syntax
gyp ERR! stack 
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:308:12)
gyp ERR! stack     at ChildProcess.emit (events.js:314:20)
gyp ERR! stack     at maybeClose (internal/child_process.js:1022:16)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:287:5)
gyp ERR! System Darwin 22.3.0
gyp ERR! command \"/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js\" \"configure\" \"--fallback-to-build\" \"--module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node\" \"--module_name=fse\" \"--module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64\" \"--napi_version=8\" \"--node_abi_napi=napi\" \"--napi_build_version=0\" \"--node_napi_label=node-v72\" \"--python=/usr/bin/python3\"
gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
gyp ERR! node -v v12.22.12
gyp ERR! node-gyp -v v3.8.0
gyp ERR! not ok 
node-pre-gyp ERR! build error 
node-pre-gyp ERR! stack Error: Failed to execute '/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-gyp/bin/node-gyp.js configure --fallback-to-build --module=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node --module_name=fse --module_path=/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64 --napi_version=8 --node_abi_napi=napi --napi_build_version=0 --node_napi_label=node-v72 --python=/usr/bin/python3' (1)
node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
node-pre-gyp ERR! stack     at ChildProcess.emit (events.js:314:20)
node-pre-gyp ERR! stack     at maybeClose (internal/child_process.js:1022:16)
node-pre-gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:287:5)
node-pre-gyp ERR! System Darwin 22.3.0
node-pre-gyp ERR! command \"/Users/frankie/Library/Application Support/fnm/node-versions/v12.22.12/installation/bin/node\" \"/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents/node_modules/node-pre-gyp/bin/node-pre-gyp\" \"install\" \"--fallback-to-build\"
node-pre-gyp ERR! cwd /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/fsevents
node-pre-gyp ERR! node -v v12.22.12
node-pre-gyp ERR! node-pre-gyp -v v0.12.0
node-pre-gyp ERR! not ok 
```

æˆ‘ä»¬å¯ä»¥å¿«é€Ÿå®šä½åˆ°ï¼š

```
gyp ERR! configure error 
gyp ERR! stack Error: Command failed: /usr/bin/python3 -c import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack   File \"<string>\", line 1
gyp ERR! stack     import sys; print \"%s.%s.%s\" % sys.version_info[:3];
gyp ERR! stack                       ^
gyp ERR! stack SyntaxError: invalid syntax
```

ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä½¿ç”¨ Python3 æ‰§è¡Œä»£ç æ—¶å€™æç¤ºè¯­æ³•é”™è¯¯ï¼Œå› ä¸º `print "xxx"` æ˜¯ Python2 çš„è¯­æ³•ï¼Œè€Œ Python3 çš„è¯­æ³•åº”è¯¥æ˜¯ `print("xxx")`ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çŒœåˆ°æ˜¯ç›®å‰ `node-sass` æ‰€ä¾èµ–çš„ `node-gyp` ç‰ˆæœ¬è¿‡ä½ï¼Œåè€…ç”¨çš„æ˜¯ Python2 è¯­æ³•å®ç°çš„ã€‚

è§£å†³æ€è·¯å¾ˆç®€å•ï¼Œå®‰è£… Python2 å¹¶å°†å…¶è·¯å¾„æ·»åŠ åˆ° npm é…ç½®ä¸­æ¥ï¼Œå…·ä½“æ“ä½œä¸å±•å¼€èµ˜è¿°ï¼Œå‰æ–‡å·²ä»‹ç»è¿‡äº†ã€‚

### ç¤ºä¾‹åˆ†æä¸‰

å‰é¢å®‰è£…å®Œæˆä¹‹åï¼Œæ‰§è¡Œ `yarn start` æ„å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œå‡ºç°é—®é¢˜ï¼š

```
$ yarn start
yarn run v1.22.19
$ webpack-dev-server --env.NODE_ENV=development --hot
â„¹ ï½¢wdsï½£: Project is running at http://0.0.0.0:3001/
â„¹ ï½¢wdsï½£: webpack output is served from /
â„¹ ï½¢wdsï½£: Content not from webpack is served from /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/dist/
Browserslist: caniuse-lite is outdated. Please run next command `yarn upgrade`
[styled-jsx] Loading plugin from path: styled-jsx-plugin-sass
âœ– ï½¢wdmï½£: Hash: baa097cdaf43c729d164
Version: webpack 4.41.2
Time: 455ms
Built at: 2023/02/07 18:21:57
                  Asset       Size  Chunks                                Chunk Names
           ./index.html  812 bytes          [emitted]                     
assets/main.baa097cd.js    923 KiB    main  [emitted] [immutable]  [big]  main
Entrypoint main [big] = assets/main.baa097cd.js
[0] multi (webpack)-dev-server/client?http://0.0.0.0:3001 (webpack)/hot/dev-server.js ./src/index.tsx 52 bytes {main} [built]
[./node_modules/strip-ansi/index.js] 161 bytes {main} [built]
[./node_modules/webpack-dev-server/client/index.js?http://0.0.0.0:3001] (webpack)-dev-server/client?http://0.0.0.0:3001 4.29 KiB {main} [built]
[./node_modules/webpack-dev-server/client/overlay.js] (webpack)-dev-server/client/overlay.js 3.51 KiB {main} [built]
[./node_modules/webpack-dev-server/client/socket.js] (webpack)-dev-server/client/socket.js 1.53 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/createSocketUrl.js] (webpack)-dev-server/client/utils/createSocketUrl.js 2.89 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/log.js] (webpack)-dev-server/client/utils/log.js 964 bytes {main} [built]
[./node_modules/webpack-dev-server/client/utils/reloadApp.js] (webpack)-dev-server/client/utils/reloadApp.js 1.59 KiB {main} [built]
[./node_modules/webpack-dev-server/client/utils/sendMessage.js] (webpack)-dev-server/client/utils/sendMessage.js 402 bytes {main} [built]
[./node_modules/webpack/hot sync ^\.\/log$] (webpack)/hot sync nonrecursive ^\.\/log$ 170 bytes {main} [built]
[./node_modules/webpack/hot/dev-server.js] (webpack)/hot/dev-server.js 1.59 KiB {main} [built]
[./node_modules/webpack/hot/emitter.js] (webpack)/hot/emitter.js 75 bytes {main} [built]
[./node_modules/webpack/hot/log-apply-result.js] (webpack)/hot/log-apply-result.js 1.27 KiB {main} [built]
[./node_modules/webpack/hot/log.js] (webpack)/hot/log.js 1.34 KiB {main} [built]
[./src/index.tsx] 1.21 KiB {main} [built] [failed] [1 error]
    + 20 hidden modules

ERROR in ./src/index.tsx
Module build failed (from ./node_modules/babel-loader/lib/index.js):
Error: /Users/frankie/Web/ifanr/ifanr-wxlayout-editor/src/index.tsx: Node Sass does not yet support your current environment: OS X Unsupported architecture (arm64) with Unsupported runtime (93)
For more information on which environments are supported please see:
https://github.com/sass/node-sass/releases/tag/v4.13.0
    at module.exports (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/lib/binding.js:13:13)
    at Object.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/lib/index.js:14:35)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1159:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Module.require (node:internal/modules/cjs/loader:1005:19)
    at require (node:internal/modules/cjs/helpers:102:18)
    at Object.<anonymous> (/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/styled-jsx-plugin-sass/index.js:1:14)
    at Module._compile (node:internal/modules/cjs/loader:1105:14)
Child html-webpack-plugin for "index.html":
     1 asset
    Entrypoint undefined = ./index.html
    [./node_modules/html-webpack-plugin/lib/loader.js!./src/index.html] 980 bytes {0} [built]
    [./node_modules/lodash/lodash.js] 528 KiB {0} [built]
    [./node_modules/webpack/buildin/global.js] (webpack)/buildin/global.js 472 bytes {0} [built]
    [./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 497 bytes {0} [built]
â„¹ ï½¢wdmï½£: Failed to compile.
```

> Node Sass does not yet support your current environment: OS X Unsupported architecture (arm64) with Unsupported runtime (93)

å¯ä»¥è¿½æŸ¥åˆ° `node-sass/lib/extensions.js` çš„ `isSupportedEnvironment()` æ–¹æ³•ï¼š

```js
function isSupportedEnvironment(platform, arch, abi) {
  return (
    false !== getHumanPlatform(platform) &&
    false !== getHumanArchitecture(arch) &&
    false !== getHumanNodeVersion(abi)
  );
}
```

å¯¹åº” `getHumanArchitecture()` æ–¹æ³•å¦‚ä¸‹ï¼š

```js
function getHumanArchitecture(arch) {
  switch (arch || process.arch) {
    case 'ia32': return '32-bit';
    case 'x86': return '32-bit';
    case 'x64': return '64-bit';
    default: return false;
  }
}
```

å¹¶ä¸æ”¯æŒ `arm64` æ¶æ„ï¼Œå› æ­¤æŠ¥é”™äº†ã€‚ç›¸å…³ Issueï¼š[Apple ARM Support #3033](https://github.com/sass/node-sass/issues/3033)ã€‚

è§£å†³æ–¹æ³•æ˜¯é™ä½ Node ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼š

```
$ fnm use 12
```

ç„¶åä¸ºä»€ä¹ˆ Node 12 æ²¡é—®é¢˜å‘¢ï¼Ÿç¿»æŸ¥æºç  `node-sass/lib/binding.js` å‘ç°ï¼š

```js
/**
 * Require binding
 */
module.exports = function (ext) {
  if (!ext.hasBinary(ext.getBinaryPath())) {
    if (!ext.isSupportedEnvironment()) {
      throw new Error(errors.unsupportedEnvironment());
    } else {
      throw new Error(errors.missingBinary());
    }
  }

  return require(ext.getBinaryPath());
};
```

é¦–å…ˆ `ext.hasBinary(ext.getBinaryPath())` ä¼šæŒ‡å®šç›®å½•æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ `binding.node` æ–‡ä»¶ï¼ŒæŒ‡å®šè·¯å¾„ç±»ä¼¼ï¼š `/Users/frankie/Web/ifanr/ifanr-wxlayout-editor/node_modules/node-sass/vendor/darwin-x64-72/binding.node`ã€‚è¿™ä¸ªè·¯å¾„å¯ä»¥é€šè¿‡ `SASS_BINARY_PATH`ã€`SASS_BINARY_DIR`ã€ `SASS_BINARY_NAME` æ¥æŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå…¶é»˜è®¤å€¼ç”± `platform-arch-versions.modules` ç»„æˆï¼ˆå¦‚ `darwin-x64-72`ï¼‰ï¼Œå‰é¢ä¸¤ä¸ªå¥½ç†è§£ï¼Œåé¢é‚£ä¸ªåº”è¯¥æ˜¯ç”± [Node Module](https://github.com/sass/node-sass#node-version-support-policy) å¯¹åº”ç»„æˆã€‚

åœ¨ä½¿ç”¨ Node 12 çš„æ—¶å€™ï¼Œæœ¬åœ°å¯ä»¥æ‰¾åˆ° `node_modules/node-sass/vendor/darwin-x64-72/binding.node` æ–‡ä»¶ï¼Œå› æ­¤è·³è¿‡äº† `isSupportedEnvironment()` çš„æ£€æŸ¥ï¼Œæ‰€ä»¥é™ä½ Node ç‰ˆæœ¬ä¹Ÿæ˜¯è§£å†³æ–¹æ³•ä¹‹ä¸€ã€‚å½“ä½¿ç”¨ Node 16 çš„æ—¶å€™ï¼Œæœ¬åœ°æ²¡æœ‰ `node_modules/node-sass/vendor/darwin-arm64-93/binding.node` æ–‡ä»¶ï¼Œå› æ­¤è·‘å»æ ¡éªŒå¹³å°ã€æ¶æ„å»äº†ï¼Œä½†ç”±äºæœ¬æœºæ˜¯ ARM æ¶æ„çš„ Macï¼Œè€Œå‰é¢ä»£ç æ‰€ç¤ºæ˜¯ä¸æ”¯æŒ arm64 æ¶æ„çš„ï¼Œå› æ­¤å°±æŠ¥é”™äº†ã€‚

è§£å†³æ–¹æ³•æ˜¯ï¼Œå‰å¾€ GitHub ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ `binding.node` æ–‡ä»¶è‡³æœ¬åœ°ï¼Œç„¶åé€šè¿‡  `SASS_BINARY_PATH`ã€`SASS_BINARY_DIR`ã€ `SASS_BINARY_NAME` æ¥æŒ‡å®šè¯¥è·¯å¾„ï¼ˆå…·ä½“é…ç½®æ–¹æ³•è¯·çœ‹ï¼š[Binary configuration parameters](https://github.com/sass/node-sass#binary-configuration-parameters)ï¼‰ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-5bf3d319da8cf854.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å°½ç®¡è‡³ä»Š Node Sass è¿˜æœªæ”¯æŒ ARM æ¶æ„ï¼Œä½† ARM Mac åœ¨ä½¿ç”¨ Node 12 æ—¶ï¼Œå¯¹åº”çš„ `darwin-x64-72/binding.node` æ˜¯æ²¡é—®é¢˜çš„ï¼Œå› æ­¤æˆ‘çŒœä¸‹è½½ `darwin-x64-xx_binding.node` ä¹Ÿæ˜¯ OK çš„ï¼Œæ²¡äº²æµ‹ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œå°è¯•ã€‚

### ç¤ºä¾‹åˆ†æå››

```shell
$ yarn install                                                                                                                                                                                                                          [9:51:54]
yarn install v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
warning " > slick-carousel@1.8.1" has unmet peer dependency "jquery@>=1.8.0".
warning "react-dev-utils > fork-ts-checker-webpack-plugin@6.5.0" has unmet peer dependency "typescript@>= 2.7".
[4/4] ğŸ”¨  Building fresh packages...
[6/6] â  node-sass
[-/6] â  waiting...
[-/6] â  waiting...
[-/6] â  waiting...
error /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass: Command failed.
Exit code: 1
Command: node scripts/build.js
Arguments: 
Directory: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass
Output:
Building: /Users/frankie/.nvm/versions/node/v18.16.0/bin/node /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js rebuild --verbose --libsass_ext= --libsass_cflags= --libsass_ldflags= --libsass_library=
gyp info it worked if it ends with ok
gyp verb cli [
gyp verb cli   '/Users/frankie/.nvm/versions/node/v18.16.0/bin/node',
gyp verb cli   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js',
gyp verb cli   'rebuild',
gyp verb cli   '--verbose',
gyp verb cli   '--libsass_ext=',
gyp verb cli   '--libsass_cflags=',
gyp verb cli   '--libsass_ldflags=',
gyp verb cli   '--libsass_library='
gyp verb cli ]
gyp info using node-gyp@8.4.1
gyp info using node@18.16.0 | darwin | arm64
gyp verb command rebuild []
gyp verb command clean []
gyp verb clean removing "build" directory
gyp verb command configure []
gyp verb find Python checking Python explicitly set from command line or npm configuration
gyp verb find Python - "--python=" or "npm config get python" is "/Users/frankie/.pyenv/shims/python"
gyp verb find Python - executing "/Users/frankie/.pyenv/shims/python" to get executable path
gyp verb find Python - executable path is "/Users/frankie/.pyenv/versions/2.7.18/bin/python"
gyp verb find Python - executing "/Users/frankie/.pyenv/versions/2.7.18/bin/python" to get version
gyp verb find Python - version is "2.7.18"
gyp verb find Python - version is 2.7.18 - should be >=3.6.0
gyp verb find Python - THIS VERSION OF PYTHON IS NOT SUPPORTED
gyp verb find Python Python is not set from environment variable PYTHON
gyp verb find Python checking if "python3" can be used
gyp verb find Python - executing "python3" to get executable path
gyp verb find Python - executable path is "/opt/homebrew/opt/python@3.12/bin/python3.12"
gyp verb find Python - executing "/opt/homebrew/opt/python@3.12/bin/python3.12" to get version
gyp verb find Python - version is "3.12.3"
gyp info find Python using Python version 3.12.3 found at "/opt/homebrew/opt/python@3.12/bin/python3.12"
gyp verb get node dir no --target version specified, falling back to host node version: 18.16.0
gyp verb command install [ '18.16.0' ]
gyp verb install input version string "18.16.0"
gyp verb install installing version: 18.16.0
gyp verb install --ensure was passed, so won't reinstall if already installed
gyp verb install version is already installed, need to check "installVersion"
gyp verb got "installVersion" 11
gyp verb needs "installVersion" 9
gyp verb install version is good
gyp verb get node dir target node version installed: 18.16.0
gyp verb build dir attempting to create "build" dir: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build
gyp verb build dir "build" dir needed to be created? Yes
gyp verb build/config.gypi creating config file
gyp verb build/config.gypi writing out config file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build/config.gypi
gyp verb config.gypi checking for gypi file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/config.gypi
gyp verb common.gypi checking for gypi file: /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/common.gypi
gyp verb gyp gyp format was not specified; forcing "make"
gyp info spawn /opt/homebrew/opt/python@3.12/bin/python3.12
gyp info spawn args [
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/gyp_main.py',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'make',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass/build/config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   '/Users/frankie/Library/Caches/node-gyp/18.16.0/include/node/common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=/Users/frankie/Library/Caches/node-gyp/18.16.0',
gyp info spawn args   '-Dnode_gyp_dir=/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp',
gyp info spawn args   '-Dnode_lib_file=/Users/frankie/Library/Caches/node-gyp/18.16.0/<(target_arch)/node.lib',
gyp info spawn args   '-Dmodule_root_dir=/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass',
gyp info spawn args   '-Dnode_engine=v8',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--no-parallel',
gyp info spawn args   '--generator-output',
gyp info spawn args   'build',
gyp info spawn args   '-Goutput_dir=.'
gyp info spawn args ]
Traceback (most recent call last):
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/gyp_main.py", line 42, in <module>
    import gyp  # noqa: E402
    ^^^^^^^^^^
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/pylib/gyp/__init__.py", line 9, in <module>
    import gyp.input
  File "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/gyp/pylib/gyp/input.py", line 19, in <module>
    from distutils.version import StrictVersion
ModuleNotFoundError: No module named 'distutils'
gyp ERR! configure error 
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/lib/configure.js:259:16)
gyp ERR! stack     at ChildProcess.emit (node:events:513:28)
gyp ERR! stack     at ChildProcess._handle.onexit (node:internal/child_process:291:12)
gyp ERR! System Darwin 23.5.0
gyp ERR! command "/Users/frankie/.nvm/versions/node/v18.16.0/bin/node" "/Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-gyp/bin/node-gyp.js" "rebuild" "--verbose" "--libsass_ext=" "--libsass_cflags=" "--libsass_ldflags=" "--libsass_library="
gyp ERR! cwd /Users/frankie/Web/ifanr/puydufou/pc/node_modules/node-sass
gyp ERR! node -v v18.16.0
```

æŠ¥é”™åŸå› æ˜¯æ‰¾ä¸åˆ° `distutils` æ¨¡å—ï¼š

```shell
ModuleNotFoundError: No module named 'distutils'
```

ä» [Whatâ€™s New In Python 3.10](https://docs.python.org/3/whatsnew/3.10.html#distutils-deprecated) å¯çŸ¥ï¼š

> The entire distutils package is deprecated, to be removed in Python 3.12.

Python 3.12 äº 2023 å¹´ 10 æœˆ 2 æ—¥å‘å¸ƒï¼Œå·²æ­£å¼ç§»é™¤ `distutils`ï¼ˆ[Whatâ€™s New In Python 3.12](https://docs.python.org/3.12/whatsnew/3.12.html#distutils)ï¼‰ã€‚


æˆ‘ä¸Šé¢åˆšå¥½æ˜¯ 3.12 ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡æŒ‰ç…§æ¥è§£å†³ï¼š

```shell
$ brew install python-setuptools
```

Related Link: 

- [distutils is removed in Python 3.12 #2869](https://github.com/nodejs/node-gyp/issues/2869)
- [no module named distutils....but distutils installed?](https://stackoverflow.com/a/76691103/14569218)

<!--

## Other

https://www.cnblogs.com/yyh1/p/15954139.html
ä¸‹è¾¹æˆ‘ä»¬æ¥ä¸“é—¨è¯´ä¸€ä¸‹ sassã€dart-sass å’Œ node-sassï¼š

* sass æ˜¯ç”± tsè°ƒç”¨ dart-sasså®ç°çš„å·¥å…·ç±»ï¼Œæ¥ç¼–è¯‘ sassï¼ˆä»¥å‰æ˜¯ç”±å•çº¯çš„ tså®ç°çš„ï¼‰
* dart-sass æ˜¯ç”± dart å®ç°çš„,é€šè¿‡ dart vm è¿è¡Œ dart æ˜¯ç¼–è¯‘ sassï¼ˆåœ¨ npm å¯ä»¥çœ‹åˆ°è¯¥åŒ…å·²ä¸è¢«å¼€æ”¾ä¸‹è½½äº†ï¼‰
* node-sass æ˜¯ç”± node è°ƒç”¨ åº•å±‚ c++ å®ç°çš„ libsass æ¥ç¼–è¯‘ sass


https://cloud.tencent.com/developer/article/1843877
https://github.com/sass/node-sass/releases/tag/v4.13.0
node-sass@4.13.0 ç‰ˆæœ¬çœŸçš„ä¸æ”¯æŒ node@14

https://www.npmjs.com/package/dart-sass
This package has been renamed to 'sass'.

https://juejin.cn/post/7052193042752602148
ç»§å¾€å¼€æ¥çš„ sass ä¸‰ä»£ç¼–è¯‘å™¨ï¼šruby sassã€node-sassã€dart-sass


https://www.zhihu.com/question/36291768/answer/318429630
è¦ç†è§£node-gypé¦–å…ˆè¦çŸ¥é“ä»€ä¹ˆæ˜¯gyp([https://gyp.gsrc.io/index.md](https://link.zhihu.com/?target=https%3A//gyp.gsrc.io/index.md))ã€‚gypå…¶å®æ˜¯ä¸€ä¸ªç”¨æ¥ç”Ÿæˆé¡¹ç›®æ–‡ä»¶çš„å·¥å…·ï¼Œä¸€å¼€å§‹æ˜¯è®¾è®¡ç»™chromiumé¡¹ç›®ä½¿ç”¨çš„ï¼Œåæ¥å¤§å®¶å‘ç°æ¯”è¾ƒå¥½ç”¨å°±ç”¨åˆ°äº†å…¶ä»–åœ°æ–¹ã€‚ç”Ÿæˆé¡¹ç›®æ–‡ä»¶åå°±å¯ä»¥è°ƒç”¨GCC, vsbuild, xcodeç­‰ç¼–è¯‘å¹³å°æ¥ç¼–è¯‘ã€‚è‡³äºä¸ºä»€ä¹ˆè¦æœ‰node-gypï¼Œæ˜¯ç”±äºnodeç¨‹åºä¸­éœ€è¦è°ƒç”¨ä¸€äº›å…¶ä»–è¯­è¨€ç¼–å†™çš„å·¥å…·ç”šè‡³æ˜¯dllï¼Œéœ€è¦å…ˆç¼–è¯‘ä¸€ä¸‹ï¼Œå¦åˆ™å°±ä¼šæœ‰è·¨å¹³å°çš„é—®é¢˜ï¼Œä¾‹å¦‚åœ¨windowsä¸Šè¿è¡Œçš„è½¯ä»¶copyåˆ°macä¸Šå°±ä¸èƒ½ç”¨äº†ï¼Œä½†æ˜¯å¦‚æœæºç æ”¯æŒï¼Œç¼–è¯‘ä¸€ä¸‹ï¼Œåœ¨macä¸Šè¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚


-->
