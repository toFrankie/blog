---
title: AlmaLinux äº‘æœåŠ¡å™¨å›¾å½¢åŒ–ç•Œé¢ã€Chrome æµè§ˆå™¨çš„å®‰è£…
number: '#42'
link: 'https://github.com/toFrankie/blog/issues/42'
created_at: '2023-02-25 19:11:26'
updated_at: '2023-04-26 22:37:08'
labels:
  - Linux
  - '2022'
---
![é…å›¾æºè‡ª Freepik](https://upload-images.jianshu.io/upload_images/5128488-ab4bb3046d7fe8c9.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è®°å½•ä¸€ä¸‹~

### ä¸€ã€é€šè¿‡ SSH å®¢æˆ·ç«¯ç™»å½•äº‘æœåŠ¡å™¨

ä½¿ç”¨ `ssh` å‘½ä»¤è¿›è¡Œç™»å½•ï¼Œå¦‚ä¸‹ï¼š

```shell
$ ssh user@hostname
```

> * `user` æ˜¯ç”¨æˆ·å
> * `hostname` æ˜¯ä¸»æœºåï¼Œå¯ä»¥æ˜¯åŸŸåæˆ– IP åœ°å€ï¼ˆé€šå¸¸æ˜¯å…¬ç½‘ IP åœ°å€ï¼‰ã€‚

ç”¨æˆ·åä¸ä¸»æœºåä¹‹é—´ä½¿ç”¨ `@` éš”å¼€ã€‚
å‡è®¾äº‘æœåŠ¡å™¨çš„ç”¨æˆ·åæ˜¯ `root`ï¼Œäº‘æœåŠ¡å™¨å…¬ç½‘ IP åœ°å€ä¸ºï¼š`130.227.10.82`ï¼ˆå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆï¼‰ï¼Œå‘½ä»¤åˆ™æ˜¯ï¼š

```shell
$ ssh root@130.227.10.82
```

é€šè¿‡ ssh ç™»å½•è¿æ¥äº‘æœåŠ¡å™¨ï¼Œå…ˆä¼šæœ‰ä¸€ä¸ªéªŒè¯è¿‡ç¨‹ï¼Œä»¥éªŒè¯è¿œç¨‹æœåŠ¡å™¨æ˜¯å¦ä¸ºé™Œç”Ÿåœ°å€ã€‚

å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿æ¥äº‘æœåŠ¡å™¨ï¼Œä¼šæœ‰å¦‚ä¸‹ç±»ä¼¼çš„è¾“å‡ºï¼Œè¡¨ç¤ºä¸è®¤è¯†è¯¥æœºå™¨ï¼Œæé†’æ˜¯å¦ç¡®è®¤è¿æ¥ã€‚

```shell
The authenticity of host '130.227.10.82 (130.227.10.82)' can't be established.
ED25519 key fingerprint is SHA256:Vybt22mVXuNuB5unE++yowF7lgA/9/2bLSiO3qmYWBY.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? 
```

è‹¥è¦ç»§ç»­ï¼Œé”®å…¥ `yes` å³å¯ã€‚

æ¥ç€ï¼ŒæŒ‰è¦æ±‚è¾“å…¥æ‰€ç™»å½• `user` çš„å¯†ç ï¼ˆéæ˜æ–‡å½¢å¼çš„ï¼‰ï¼Œå°±èƒ½æˆåŠŸç™»å½•ä¸Šäº‘æœåŠ¡å™¨äº†ã€‚ğŸ‘‡

```shell
root@130.227.10.82's password:
	
	Welcome to Huawei Cloud Service

Last login: Sun Oct 30 11:50:46 2022 from 112.94.175.201
```

### äºŒã€å®‰è£…å›¾å½¢åŒ–ç•Œé¢
> åç»­æ“ä½œï¼Œå‡ä»¥ AlmaLinux æ“ä½œç³»ç»Ÿä¸ºä¾‹ã€‚

é€šè¿‡ SSH ç™»å½•äº‘æœåŠ¡å™¨ä¹‹å...

#### 1. ç¡®ä¿ç³»ç»Ÿæ˜¯æœ€æ–°çš„ã€‚

```shell
$ sudo dnf update
$ sudo dnf install epel-release
```

ä»¥ä¸Šä¸ºä¸¤æ¡å‘½ä»¤ï¼Œè¯·åœ¨å‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼ˆä¼šæœ‰ç±»ä¼¼ `Complete!` çš„æç¤ºï¼Œåç»­å‘½ä»¤åŒç†ï¼‰åï¼Œæ‰æ¥ç€æ‰§è¡Œç¬¬äºŒæ¡ã€‚

å®‰è£…è¿‡ç¨‹å¯èƒ½ä¼šæœ‰ç±»ä¼¼ `Is this ok [y/N]` çš„è¯¢é—®å¼äº¤äº’ï¼ŒæŒ‰æç¤ºé”®å…¥ `y` ä»¥ç»§ç»­ï¼ˆåç»­æ“ä½œåŒç†ï¼‰ã€‚

#### 2. å®‰è£… Gnome GUI å›¾å½¢åŒ–ç•Œé¢

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
$ sudo dnf groupinstall "Server with GUI"
```

è€å¿ƒç­‰å¾…å®‰è£…å®Œæˆå³å¯...


#### 3. é»˜è®¤ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢å¯åŠ¨ç³»ç»Ÿã€‚

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
$ sudo systemctl set-default graphical
```

#### 4. é‡å¯äº‘æœåŠ¡å™¨

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥é‡å¯äº‘æœåŠ¡å™¨ã€‚

```shell
$ reboot
```

æ³¨æ„ï¼Œæ‰§è¡Œ `reboot` ä¼šè‡ªåŠ¨æ–­å¼€ä¸äº‘æœåŠ¡å™¨çš„è¿æ¥ï¼Œè¯·ç¨ç­‰ä¸€ä¼šå¾…äº‘æœåŠ¡å™¨é‡æ–°å¯åŠ¨æˆåŠŸåï¼Œæ–¹å¯å†æ¬¡è¿æ¥äº‘æœåŠ¡å™¨ï¼Œå¦åˆ™é€šè¿‡ `ssh` è®¿é—®ä¼šæç¤º `Operation timed out` è¶…æ—¶ã€‚


> **è¯·æ³¨æ„ï¼Œå³ä½¿å®Œæˆä»¥ä¸Šæ“ä½œï¼Œé€šè¿‡ SSH å®¢æˆ·ç«¯æ¥è®¿é—®äº‘æœåŠ¡å™¨æ˜¯æ— æ³•çœ‹åˆ°å›¾å½¢åŒ–ç•Œé¢çš„ã€‚
> è¯·åœ¨äº‘æœåŠ¡å™¨å‚å•†çš„ Web æ§åˆ¶å°å»è®¿é—®ä¸äº‘æœåŠ¡å™¨ã€‚**

### ä¸‰ã€å®‰è£… Chrome æµè§ˆå™¨


#### 1. ä¸‹è½½ Chrome æµè§ˆå™¨ RPM åŒ…ï¼š

```shell
$ wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
```

#### 2. ä½¿ç”¨ dnf å‘½ä»¤å®‰è£… Chrome æµè§ˆå™¨

```shell
$ sudo dnf install google-chrome-stable_current_x86_64.rpm
```

#### 3. éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ

æ‰§è¡Œå‘½ä»¤ `google-chrome --version` åï¼Œå¦‚æ­£å¸¸æ‰“å°å‡ºç‰ˆæœ¬å·è¡¨ç¤ºå®‰è£…æˆåŠŸäº†ã€‚

```shell
$ google-chrome --version
Google Chrome 107.0.5304.87 
```

#### 4. è§£å†³ root ç”¨æˆ·æ— æ³•å¯åŠ¨ Chrome æµè§ˆå™¨çš„é—®é¢˜

å¦‚æœæˆ‘ä»¬é€šè¿‡ `root` ç”¨æˆ·ç™»å½•äº†äº‘æœåŠ¡å™¨ï¼Œå¯èƒ½ä¼šæ— æ³•æ­£å¸¸å¯åŠ¨ Chrome æµè§ˆå™¨ã€‚å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹æç¤ºï¼šğŸ‘‡

```shell
Running as root without --no-sandbox is not supported. SeeÂ https://crbug.com/638180.
```

è§£å†³æ–¹æ³•ï¼š

ä¸€æ˜¯ï¼Œé€šè¿‡å‘½ä»¤å¯åŠ¨ Chrome æµè§ˆå™¨ã€‚ğŸ‘‡

```shell
$ /usr/bin/google-chrome-stable --no-sandbox
```

äºŒæ˜¯ï¼Œæ‰¾åˆ° Chrome çš„å¿«æ·æ–¹å¼ï¼Œå³é”®åœ¨å…¶ Command ä¸­æœ«å°¾æ·»åŠ  `--no-sandbox` å³å¯ã€‚

![](https://upload-images.jianshu.io/upload_images/5128488-d13f8539eed86aed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ³¨æ„ï¼Œä¸Šå›¾ä¸º Ubuntu æ“ä½œç³»ç»Ÿï¼ŒAlmaLinux æ“ä½œç³»ç»Ÿåº”è¯¥ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚

### å››ã€ä¿®æ”¹æœåŠ¡å™¨ SSH ç™»å½•è¶…æ—¶æ—¶é—´

ç”±äºã€Œä¸æ´»åŠ¨ã€è€Œå¯¼è‡´çš„ SSH è¶…æ—¶æ˜¯ç›¸å½“æ¼äººçš„ï¼Œé€šå¸¸è¿«ä½¿ä½ é‡æ–°å¯åŠ¨è¿æ¥å¹¶é‡æ–°å¼€å§‹ï¼Œå› æ­¤æˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹è¶…æ—¶æ—¶é—´ã€‚

ä¸ºäº†ç®€åŒ–æ“ä½œï¼Œåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹ä¸¤æ¡å‘½ä»¤æ¥è®¾ç½® `ClientAliveInterval` å’Œ `ClientAliveCountMax`ï¼š

```shell
$ echo ClientAliveInterval 30 >> /etc/ssh/sshd_config
$ echo ClientAliveCountMax 120 >> /etc/ssh/sshd_config
```

è¯¥è®¾ç½®è¡¨ç¤ºï¼š

> * `ClientAliveInterval`ï¼šæ¯éš” 30s å‘é€å¿ƒè·³æ•°æ®
> * `ClientAliveCountMax`ï¼š å…è®¸è¶…æ—¶120æ¬¡æ•°ï¼Œè¶…è¿‡åæ–­å¼€é“¾æ¥

å› æ­¤ï¼Œæ•´ä¸ª SSH ä¼šè¯å°†ä¼šåœ¨ 1 å°æ—¶ï¼ˆ1200s Ã— 30 = 3600sï¼‰å†…ä¿æŒæ´»åŠ¨çŠ¶æ€è€Œä¸ä¼šä¸¢å¤±ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾ç½® `ClientAliveInterval 3600` æ¥è·å¾—ç›¸åŒçš„ç»“æœã€‚

é‡å¯ sshd æœåŠ¡ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚

```shell
$ sudo systemctl reload sshd
```


### äº”ã€å‚è€ƒæ–‡ç« 

* [å¦‚ä½•åœ¨ AlmaLinux 8 ä¸Šå®‰è£… Gnome](https://www.yundongfang.com/Yun47900.html)
* [å¦‚ä½•åœ¨ AlmaLinux 8 ä¸Šå®‰è£…è°·æ­Œæµè§ˆå™¨](https://www.xtuos.com/4224.html)
* [è§£å†³ ubuntu ç³»ç»Ÿ root ç”¨æˆ·ä¸‹ Chrome æ— æ³•å¯åŠ¨é—®é¢˜](https://www.cnblogs.com/hbsygfz/p/8409517.html)

The end.
