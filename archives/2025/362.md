---
title: CSS 中 display、opacity 、visibility 的区别
number: '#362'
link: 'https://github.com/toFrankie/blog/issues/362'
created_at: '2025-06-14 14:12:51'
updated_at: '2025-06-15 16:36:58'
labels:
  - CSS
  - 前端
  - '2025'
---
用 CSS 使元素在视觉上不可见，我们通常会想到以下几种属性：

- `display: none`
- `opacity: 0`
- `visibility: hidden`

尽管这些属性都能使元素不可见，但它们之间仍存在明显差异！

## 开始之前

页面生成过程：

1. 解析 HTML 构建 DOM Tree。
2. 解析 CSS 构建 CSSOM Tree。
3. 将 DOM 和 CSSOM 合并生成 Render Tree。
4. Layout 阶段，根据 Render Tree 计算每个节点的位置和尺寸。
5. Paint 阶段，将各个节点绘制到屏幕上。


回流与重绘：

- 回流 - 发生在 Layout 阶段，任何影响元素尺寸、位置的更改（如字号、display、文档结构等）都可能会触发。
- 重绘 - 发生在 Painting 阶段，元素的外观样式更改（如果颜色、透明度等）会触发。

根据两者的先后关系，明显可知：

- 有回流一定伴随着重绘。
- 反之，发生重绘不一定伴随着回流。

## 占据空间

在生成 Render Tree 时，不可见节点不会进入 Render Tree。

> 此处的“不可见节点”包括但不限于 meta、script、link 等标签，以及 display: none 的元素。而 opacity: 0 和 visibility: hidden 不在此列。

- `display: none` 会使得元素从文档流中移除，不占据任何页面空间。
- `opacity: 0` 和 `visibility: hidden` 仍会占据原有空间。


## 回流（重排）

- `display: none` 会产生回流。
- `opacity: 0` 和 `visibility: hidden` 不会产生回流。

前者由于不进入 Render Tree 会使得其他元素发生布局上的变化，因此会发生回流。而后两者仍占据着原有的位置，自然不会产生回流。

## 重绘

## 外设访问性

> 如键盘、屏幕阅读器等外设。

- `display: none` 不能被访问。
- `opacity: 0` 和 `visibility: hidden` 可以被访问。
